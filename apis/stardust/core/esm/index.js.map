{"version":3,"file":"index.js","sources":["../../node_modules/regenerator-runtime/runtime.js","../../../locale/src/translator.js","../../../locale/src/index.js","../../../nucleus/src/locale/app-locale.js","../../../../node_modules/node-event-emitter/index.js","../../../../node_modules/extend/index.js","../../../../node_modules/d3-color/src/define.js","../../../../node_modules/d3-color/src/color.js","../../../theme/src/color-scale.js","../../../theme/src/theme-scale-generator.js","../../../theme/src/style-resolver.js","../../../theme/src/contraster/luminance.js","../../../theme/src/contraster/contrast.js","../../../theme/src/index.js","../../../theme/src/palette-resolver.js","../../../theme/src/set-theme.js","../../../theme/src/contraster/contraster.js","../../../nucleus/src/app-theme.js","../../../../node_modules/@material-ui/core/node_modules/@babel/runtime/helpers/esm/extends.js","../../../../node_modules/@material-ui/core/node_modules/@babel/runtime/helpers/esm/typeof.js","../../../../node_modules/@material-ui/core/node_modules/@material-ui/utils/esm/deepmerge.js","../../../../node_modules/@material-ui/core/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../../../../node_modules/@material-ui/core/node_modules/@material-ui/utils/esm/formatMuiErrorMessage.js","../../../../node_modules/@material-ui/core/esm/styles/colorManipulator.js","../../../../node_modules/@material-ui/core/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../../../../node_modules/@material-ui/core/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../../../../node_modules/@material-ui/core/esm/styles/createBreakpoints.js","../../../../node_modules/@material-ui/core/esm/styles/createMixins.js","../../../../node_modules/@material-ui/core/esm/colors/common.js","../../../../node_modules/@material-ui/core/esm/colors/grey.js","../../../../node_modules/@material-ui/core/esm/colors/indigo.js","../../../../node_modules/@material-ui/core/esm/colors/pink.js","../../../../node_modules/@material-ui/core/esm/colors/red.js","../../../../node_modules/@material-ui/core/esm/colors/orange.js","../../../../node_modules/@material-ui/core/esm/colors/blue.js","../../../../node_modules/@material-ui/core/esm/colors/green.js","../../../../node_modules/@material-ui/core/esm/styles/createPalette.js","../../../../node_modules/@material-ui/core/esm/styles/createTypography.js","../../../../node_modules/@material-ui/core/esm/styles/shadows.js","../../../../node_modules/@material-ui/core/esm/styles/shape.js","../../../../node_modules/@material-ui/system/esm/spacing.js","../../../../node_modules/@material-ui/core/esm/styles/createSpacing.js","../../../../node_modules/@material-ui/core/esm/styles/transitions.js","../../../../node_modules/@material-ui/core/esm/styles/zIndex.js","../../../../packages/ui/theme/definitions/base.js","../../../../packages/ui/theme/definitions/colors.js","../../../../packages/ui/theme/definitions/light.js","../../../../packages/ui/theme/definitions/dark.js","../../../../packages/ui/theme/create.js","../../../../node_modules/@material-ui/core/esm/styles/createMuiTheme.js","../../../nucleus/src/contexts/InstanceContext.js","../../../nucleus/src/stores/create-key-store.js","../../../nucleus/src/stores/model-store.js","../../../nucleus/src/hooks/useRpc.js","../../../nucleus/src/hooks/useLayout.js","../../../nucleus/src/hooks/useSessionModel.js","../../../nucleus/src/hooks/useCurrentSelectionsModel.js","../../../nucleus/src/hooks/useAppSelectionsNavigation.js","../../../nucleus/src/stores/selections-store.js","../../../nucleus/src/hooks/useAppSelections.js","../../../nucleus/src/components/NebulaApp.jsx","../../../nucleus/src/hooks/useRect.js","../../../../packages/ui/icons/SvgIcon.jsx","../../../../packages/ui/icons/remove.js","../../../../packages/ui/icons/lock.js","../../../../packages/ui/icons/unlock.js","../../../../node_modules/react-window/node_modules/@babel/runtime/helpers/esm/extends.js","../../../../node_modules/react-window/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../../../../node_modules/memoize-one/dist/memoize-one.esm.js","../../../../node_modules/react-window/dist/index.esm.js","../../../../node_modules/react-window/node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","../../../../node_modules/react-window-infinite-loader/dist/index.esm.js","../../../../packages/ui/icons/tick.js","../../../nucleus/src/components/listbox/ListBoxRow.jsx","../../../nucleus/src/components/listbox/ListBox.jsx","../../../../packages/ui/icons/select-all.js","../../../../packages/ui/icons/select-alternative.js","../../../../packages/ui/icons/select-possible.js","../../../../packages/ui/icons/select-excluded.js","../../../../packages/ui/icons/more.js","../../../nucleus/src/hooks/useActionState.js","../../../nucleus/src/components/ActionsToolbarItem.jsx","../../../../packages/ui/icons/close.js","../../../../packages/ui/icons/clear-selections.js","../../../nucleus/src/components/ActionsToolbarMore.jsx","../../../nucleus/src/components/ActionsToolbar.jsx","../../../nucleus/src/hooks/useDefaultSelectionActions.js","../../../../packages/ui/icons/search.js","../../../nucleus/src/components/listbox/ListBoxSearch.jsx","../../../nucleus/src/hooks/useObjectSelections.js","../../../nucleus/src/selections/event-mixin.js","../../../nucleus/src/components/listbox/ListBoxPopover.jsx","../../../nucleus/src/components/listbox/listbox-selection-toolbar.js","../../../nucleus/src/components/selections/OneField.jsx","../../../../packages/ui/icons/down-arrow.js","../../../nucleus/src/components/selections/MultiState.jsx","../../../nucleus/src/components/selections/More.jsx","../../../nucleus/src/components/selections/SelectedFields.jsx","../../../../packages/ui/icons/selections-back.js","../../../../packages/ui/icons/selections-forward.js","../../../nucleus/src/components/selections/Nav.jsx","../../../nucleus/src/components/selections/AppSelections.jsx","../../../nucleus/src/object/uid.js","../../../nucleus/src/object/hc-handler.js","../../../nucleus/src/object/populator.js","../../../conversion/src/utils.js","../../../conversion/src/array-util.js","../../../conversion/src/library-utils.js","../../../conversion/src/helpers/index.js","../../../conversion/src/hypercube/index.js","../../../conversion/src/hypercube/export-properties.js","../../../conversion/src/export-format.js","../../../conversion/src/hypercube/import-properties.js","../../../conversion/src/index.js","../../../../packages/ui/icons/warning-triangle-2.js","../../../nucleus/src/components/Error.jsx","../../../nucleus/src/components/Progress.jsx","../../../nucleus/src/components/LongRunningQuery.jsx","../../../nucleus/src/components/Loading.jsx","../../../nucleus/src/components/Header.jsx","../../../nucleus/src/components/Footer.jsx","../../../nucleus/src/components/Supernova.jsx","../../../nucleus/src/hooks/getSessionModel.js","../../../nucleus/src/hooks/getRpc.js","../../../nucleus/src/hooks/getLayout.js","../../../nucleus/src/hooks/getLibraryList.js","../../../nucleus/src/components/Cell.jsx","../../../nucleus/src/components/glue.jsx","../../../nucleus/src/utils/patcher.js","../../../nucleus/src/viz.js","../../../nucleus/src/object/initiate.js","../../../nucleus/src/object/create-session-object.js","../../../nucleus/src/object/get-object.js","../../../nucleus/src/flags/flags.js","../../../supernova/src/json-patch.js","../../../supernova/src/action-hero.js","../../../supernova/src/hooks.js","../../../supernova/src/creator.js","../../../supernova/src/qae.js","../../../supernova/src/generator.js","../../../nucleus/node_modules/semver/semver.js","../../../nucleus/src/sn/load.js","../../../nucleus/src/sn/types.js","../../../nucleus/src/sn/type.js","../../../nucleus/src/index.js","../../src/index.js"],"sourcesContent":["/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","const format = (message = '', args = []) => {\n  const arr = typeof args === 'string' || typeof args === 'number' ? [args] : args;\n\n  return message.replace(/\\{(\\d+)\\}/g, (match, number) => (typeof arr[number] !== 'undefined' ? arr[number] : match));\n};\n\nexport default function translator({ initial = 'en-US', fallback = 'en-US' } = {}) {\n  const dictionaries = {};\n  let currentLocale = initial;\n\n  /**\n   * @class Translator\n   * @hideconstructor\n   */\n  const api = /** @lends Translator# */ {\n    language: (lang) => {\n      if (lang) {\n        currentLocale = lang;\n      }\n      return currentLocale;\n    },\n    /**\n     * Registers a string in multiple locales\n     * @param {object} item\n     * @param {string} item.id\n     * @param {object<string,string>} item.locale\n     * @example\n     * translator.add({\n     *   id: 'company.hello_user',\n     *   locale: {\n     *     'en-US': 'Hello {0}',\n     *     'sv-SE': 'Hej {0}'\n     *   }\n     * });\n     * translator.get('company.hello_user', ['John']); // Hello John\n     */\n    add: (item) => {\n      // TODO - disallow override?\n      const { id, locale } = item;\n      Object.keys(locale).forEach((lang) => {\n        if (!dictionaries[lang]) {\n          dictionaries[lang] = {};\n        }\n        dictionaries[lang][id] = locale[lang];\n      });\n    },\n    /**\n     * Translates a string for current locale\n     * @param {string} str - Id of the registered string\n     * @param {Array<string>=} args - Values passed down for string interpolation\n     * @returns {string} The translated string\n     */\n    get(str, args) {\n      let v;\n      if (dictionaries[currentLocale] && typeof dictionaries[currentLocale][str] !== 'undefined') {\n        v = dictionaries[currentLocale][str];\n      } else if (dictionaries[fallback] && typeof dictionaries[fallback][str] !== 'undefined') {\n        v = dictionaries[fallback][str];\n      } else {\n        v = str;\n      }\n\n      return typeof args !== 'undefined' ? format(v, args) : v;\n    },\n  };\n\n  return api;\n}\n","import translator from './translator';\n\nconst locale = ({ initial = 'en-US', fallback = 'en-US' } = {}) => {\n  const t = translator({\n    initial,\n    fallback,\n  });\n\n  return {\n    translator: t,\n  };\n};\n\nexport default locale;\n","import locale from '@nebula.js/locale';\nimport all from '@nebula.js/locale/all.json';\n\nexport default function appLocaleFn(language) {\n  const l = locale({\n    initial: language,\n  });\n\n  Object.keys(all).forEach((key) => {\n    l.translator.add(all[key]);\n  });\n\n  return {\n    translator: l.translator,\n  };\n}\n","/**\n * Utility functions\n */\n\nvar util = {};\n\nutil.isObject = function isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nutil.isNumber = function isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nutil.isUndefined = function isUndefined(arg) {\n  return arg === void 0;\n}\n\nutil.isFunction = function isFunction(arg){\n  return typeof arg === 'function';\n}\n\n\n/**\n * EventEmitter class\n */\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\nEventEmitter.init = function() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!util.isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error' && !this._events.error) {\n    er = arguments[1];\n    if (er instanceof Error) {\n      throw er; // Unhandled 'error' event\n    } else {\n      throw Error('Uncaught, unspecified \"error\" event.');\n    }\n    return false;\n  }\n\n  handler = this._events[type];\n\n  if (util.isUndefined(handler))\n    return false;\n\n  if (util.isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        len = arguments.length;\n        args = new Array(len - 1);\n        for (i = 1; i < len; i++)\n          args[i - 1] = arguments[i];\n        handler.apply(this, args);\n    }\n  } else if (util.isObject(handler)) {\n    len = arguments.length;\n    args = new Array(len - 1);\n    for (i = 1; i < len; i++)\n      args[i - 1] = arguments[i];\n\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!util.isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              util.isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (util.isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (util.isObject(this._events[type]) && !this._events[type].warned) {\n    var m;\n    if (!util.isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n\n      if (util.isFunction(console.error)) {\n        console.error('(node) warning: possible EventEmitter memory ' +\n                      'leak detected. %d listeners added. ' +\n                      'Use emitter.setMaxListeners() to increase limit.',\n                      this._events[type].length);\n      }\n      if (util.isFunction(console.trace))\n        console.trace();\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!util.isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!util.isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (util.isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (util.isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (util.isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (Array.isArray(listeners)) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (util.isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  var ret;\n  if (!emitter._events || !emitter._events[type])\n    ret = 0;\n  else if (util.isFunction(emitter._events[type]))\n    ret = 1;\n  else\n    ret = emitter._events[type].length;\n  return ret;\n};\n","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","import { color, rgb } from 'd3-color';\n\n/**\n * Gets this mapping between the scaled value and the color parts\n * @ignore\n * @param {Number} scaledValue - A value between 0 and 1 representing a value in the data scaled between the max and min boundaries of the data. Values are clamped to 0 and 1.\n * @param {Number} numEdges - Number of parts that makes up this scale\n */\nfunction limitFunction(scaledValue, numParts) {\n  /*\n   *\tColor-Scale doesn't calculate exact color blends based of the scaled value. It instead shifts the value inwards to achieve\n   *\ta better color representation at the edges. Primarily this is done to allow setting custom limits to where each color begins\n   *\tand ends. If a color begins and ends at 1, it should not be visible. The simplest way to achive this is to remove 1 and 0\n   *\tfrom the possible numbers that can be used. Colors that are not equal to 1 or 0 should not be affected.\n   */\n\n  // The following is done to keep the scaled value above 0 and below 1. This shifts values that hits an exact boundary upwards.\n  // eslint-disable-next-line no-param-reassign\n  scaledValue = Math.min(Math.max(scaledValue, 0.000000000001), 0.999999999999);\n  return numParts - scaledValue * numParts;\n}\n\nfunction getLevel(scale, level) {\n  return Math.min(level || scale.startLevel, scale.colorParts.length - 1);\n}\n\nfunction blend(c1, c2, t) {\n  const r = Math.floor(c1.r + (c2.r - c1.r) * t);\n  const g = Math.floor(c1.g + (c2.g - c1.g) * t);\n  const b = Math.floor(c1.b + (c2.b - c1.b) * t);\n  const a = Math.floor(c1.opacity + (c2.opacity - c1.opacity) * t);\n  return rgb(r, g, b, a);\n}\n\nclass ColorScale {\n  constructor(nanColor) {\n    this.colorParts = [];\n    this.startLevel = 0;\n    this.max = 1;\n    this.min = 0;\n    this.nanColor = color(nanColor);\n  }\n\n  /**\n   * Adds a part to this color scale. The input colors span one part of the gradient, colors between them are interpolated. Input two equal colors for a solid scale part.\n   * @ignore\n   * @param {String|Number} color1 - First color to be used, in formats defined by Color\n   * @param {String|Number} color2 - Second color to be used, in formats defined by Color\n   * @param {Number} level - Which level of the color pyramid to add this part to.\n   */\n  addColorPart(color1, color2, level) {\n    // eslint-disable-next-line no-param-reassign\n    level = level || 0;\n    this.startLevel = Math.max(level, this.startLevel);\n    if (!this.colorParts[level]) {\n      this.colorParts[level] = [];\n    }\n    this.colorParts[level].push([color(color1), color(color2)]);\n  }\n\n  /**\n   * Gets the color which represents the input value\n   * @ignore\n   * @param {Number} scaledValue - A value between 0 and 1 representing a value in the data scaled between the max and min boundaries of the data. Values are clamped to 0 and 1.\n   */\n  getColor(value, level) {\n    const scaledValue = value - this.min;\n    if (Number.isNaN(+value) || Number.isNaN(+scaledValue)) {\n      return this.nanColor;\n    }\n    // eslint-disable-next-line no-param-reassign\n    level = getLevel(this, level);\n    const k = limitFunction(scaledValue, this.colorParts[level].length);\n    let f = Math.floor(k);\n    f = f === k ? f - 1 : f; // To fulfill equal or greater than: 329-<330\n    const part = this.colorParts[level][f];\n    const c1 = part[0];\n    const c2 = part[1];\n\n    // For absolute edges we return the colors at the limit\n    if (value === this.min) {\n      return c2;\n    }\n    if (value === this.max) {\n      return c1;\n    }\n\n    const t = k - f;\n    const uc = blend(c1, c2, t);\n    return uc;\n  }\n}\n\nexport default ColorScale;\n","import { color } from 'd3-color';\nimport ColorScale from './color-scale';\n\n/* Calculates a value that expands from 0.5 out to 0 and 1\n * Ex for size 8:\n * current -> percent\n * 0 -> 0.0625\t4 -> 0.3125\n * 1 -> 0.125\t5 -> 0.375\n * 2 -> 0.1875\t6 -> 0.4375\n * 3 -> 0.25\t\t7 -> 0.5\n */\n\nfunction getScaleValue(value, current, size) {\n  const percent = 0.25 + ((current + 1) / size) * 0.25;\n  const min = 0.5 - percent;\n  const max = 0.5 + percent;\n  const span = max - min;\n  return min + (value / 1) * span;\n}\n\nfunction setupColorScale(colors, nanColor, gradient) {\n  const newColors = [];\n  const cs = new ColorScale(nanColor);\n  newColors.push(colors[0]);\n\n  if (!gradient) {\n    newColors.push(colors[0]);\n  }\n  let i = 1;\n  for (; i < colors.length - 1; i++) {\n    newColors.push(colors[i]);\n    newColors.push(colors[i]);\n  }\n\n  newColors.push(colors[i]);\n  if (!gradient) {\n    newColors.push(colors[i]);\n  }\n\n  for (let j = 0; j < newColors.length; j += 2) {\n    cs.addColorPart(newColors[j], newColors[j + 1]);\n  }\n\n  return cs;\n}\n\nfunction generateLevel(scale, current, size) {\n  const level = [];\n  for (let j = 0; j < current + 1; j++) {\n    let c;\n    switch (current) {\n      case 0:\n        c = scale.getColor(0.5);\n        break;\n      default: {\n        const scaled = getScaleValue((1 / current) * j, current, size);\n\n        c = scale.getColor(scaled);\n        break;\n      }\n    }\n    level.push(color(c).formatHex());\n  }\n  return level;\n}\n\n/**\n * Generates a pyramid of colors from a minimum of 2 colors\n *\n * @ignore\n * @internal\n * @param {Array} colors an array of colors to generate from\n * @param {number} size the integer size of the base of the pyramid\n * @returns {Array} A 2 dimensional array containing the levels of the color pyramid\n */\nfunction createPyramidFromColors(colors, size, nanColor) {\n  const gradientScale = setupColorScale(colors, nanColor, true);\n  const baseLevel = generateLevel(gradientScale, size - 1, size);\n  const scale = setupColorScale(baseLevel, nanColor, false);\n  const pyramid = [null];\n  for (let i = 0; i < size; i++) {\n    pyramid.push(generateLevel(scale, i, size));\n  }\n  return pyramid;\n}\n\nexport default function generateOrdinalScales(scalesDef, nanColor = '#d2d2d2') {\n  scalesDef.forEach((def) => {\n    if (def.type === 'class') {\n      // generate pyramid\n      const pyramid = createPyramidFromColors(def.scale, Math.max(def.scale.length, 7), nanColor);\n      // eslint-disable-next-line no-param-reassign\n      def.scale = pyramid;\n      // eslint-disable-next-line no-param-reassign\n      def.type = 'class-pyramid';\n    }\n  });\n}\n","import extend from 'extend';\nimport generateScales from './theme-scale-generator';\n\n/**\n * Creates the follwing array of paths\n * object.barChart - legend.title - fontSize\n * object - legend.title - fontSize\n * legend.title - fontSize\n * object.barChart - legend - fontSize\n * object - legend - fontSize\n * legend - fontSize\n * object.barChart - fontSize\n * object - fontSize\n * fontSize\n * @ignore\n */\nfunction constructPaths(pathSteps, baseSteps) {\n  const ret = [];\n  let localBaseSteps;\n  let baseLength;\n  if (pathSteps) {\n    let pathLength = pathSteps.length;\n    while (pathLength >= 0) {\n      localBaseSteps = baseSteps.slice();\n      baseLength = localBaseSteps.length;\n      while (baseLength >= 0) {\n        ret.push(localBaseSteps.concat(pathSteps));\n        localBaseSteps.pop();\n        baseLength--;\n      }\n      pathSteps.pop();\n      pathLength--;\n    }\n  } else {\n    localBaseSteps = baseSteps.slice();\n    baseLength = localBaseSteps.length;\n    while (baseLength >= 0) {\n      ret.push(localBaseSteps.concat());\n      localBaseSteps.pop();\n      baseLength--;\n    }\n  }\n  return ret;\n}\n\nfunction getObject(root, steps) {\n  let obj = root;\n  for (let i = 0; i < steps.length; i++) {\n    if (obj[steps[i]]) {\n      obj = obj[steps[i]];\n    } else {\n      return null;\n    }\n  }\n  return obj;\n}\n\nfunction searchPathArray(pathArray, attribute, theme) {\n  for (let i = 0; i < pathArray.length; i++) {\n    const target = getObject(theme, pathArray[i]);\n    if (target !== null && target[attribute]) {\n      return target[attribute];\n    }\n  }\n  return undefined;\n}\n\nfunction searchValue(path, attribute, baseSteps, component) {\n  let pathArray;\n  if (path === '') {\n    pathArray = constructPaths(null, baseSteps);\n  } else {\n    const steps = path.split('.');\n    pathArray = constructPaths(steps, baseSteps);\n  }\n  return searchPathArray(pathArray, attribute, component);\n}\n\nexport default function styleResolver(basePath, themeJSON) {\n  const basePathSteps = basePath.split('.');\n\n  const api = {\n    /**\n     *\n     * Get the value of a style attribute, starting in the given base path + path\n     * Ex: Base path: \"object.barChart\", Path: \"legend.title\", Attribute: \"fontSize\"\n     * Will search in, and fall back to:\n     * object.barChart - legend.title - fontSize\n     * object - legend.title - fontSize\n     * legend.title - fontSize\n     * object.barChart - legend - fontSize\n     * object - legend - fontSize\n     * legend - fontSize\n     * object.barChart - fontSize\n     * object - fontSize\n     * fontSize\n     * @ignore\n     *\n     * @param {string} component string of properties seperated by dots to search in\n     * @param {string} attribute to return\n     * @returns {any} value of the resolved path, undefined if not found\n     */\n    getStyle(component, attribute) {\n      // TODO - object overrides\n      // TODO - feature flag on font-family?\n      // TODO - caching\n      const baseSteps = basePathSteps.concat();\n      const result = searchValue(component, attribute, baseSteps, themeJSON);\n\n      // TODO - support functions\n      return result;\n    },\n  };\n\n  return api;\n}\n\n/**\n * Iterate the object tree and resolve variables and functions.\n * @ignore\n * @param {Object} - objTree\n * @param {Object} - variables\n */\nfunction resolveVariables(objTree, variables) {\n  Object.keys(objTree).forEach((key) => {\n    if (typeof objTree[key] === 'object' && objTree[key] !== null) {\n      resolveVariables(objTree[key], variables);\n    } else if (typeof objTree[key] === 'string' && objTree[key].charAt(0) === '@') {\n      // Resolve variables\n      objTree[key] = variables[objTree[key]]; // eslint-disable-line no-param-reassign\n    }\n  });\n}\n\nstyleResolver.resolveRawTheme = (raw) => {\n  // TODO - validate format\n  const c = extend(true, {}, raw);\n  resolveVariables(c, c._variables); // eslint-disable-line\n\n  // generate class-pyramid\n  if (c.scales) {\n    generateScales(c.scales, c.dataColors && c.dataColors.nullColor);\n  }\n\n  return c;\n};\n","import { color } from 'd3-color';\n\nexport default function luminance(colStr) {\n  const c = color(colStr).rgb();\n  const { r, g, b } = c;\n\n  // https://www.w3.org/TR/WCAG20/#relativeluminancedef\n  const [sR, sG, sB] = [r, g, b].map((v) => v / 255);\n  const [R, G, B] = [sR, sG, sB].map((v) => (v <= 0.03928 ? v / 12.92 : ((v + 0.055) / 1.055) ** 2.4));\n\n  return +(0.2126 * R + 0.7152 * G + 0.0722 * B).toFixed(5);\n}\n","// https://www.w3.org/TR/UNDERSTANDING-WCAG20/visual-audio-contrast-contrast.html#contrast-ratiodef\nexport default function contrast(L1, L2) {\n  return +((Math.max(L1, L2) + 0.05) / (Math.min(L1, L2) + 0.05)).toFixed(5);\n}\n","import EventEmitter from 'node-event-emitter';\n\nimport setTheme from './set-theme';\nimport paletteResolverFn from './palette-resolver';\nimport styleResolverFn from './style-resolver';\nimport contrasterFn from './contraster/contraster';\nimport luminance from './contraster/luminance';\n\nexport default function theme() {\n  let resolvedThemeJSON;\n  let styleResolverInstanceCache = {};\n\n  let paletteResolver;\n\n  let contraster;\n\n  /**\n   * @class\n   * @alias Theme\n   * @hideconstructor\n   */\n  const externalAPI = /** @lends Theme# */ {\n    /**\n     * @returns {Theme~ScalePalette[]}\n     */\n    getDataColorScales() {\n      return paletteResolver.dataScales();\n    },\n    /**\n     * @returns {Theme~DataPalette[]}\n     */\n    getDataColorPalettes() {\n      return paletteResolver.dataPalettes();\n    },\n    /**\n     * @returns {Theme~ColorPickerPalette[]}\n     */\n    getDataColorPickerPalettes() {\n      return paletteResolver.uiPalettes();\n    },\n    /**\n     * @returns {Theme~DataColorSpecials}\n     */\n    getDataColorSpecials() {\n      return paletteResolver.dataColors();\n    },\n    /**\n     * Resolve a color object using the color picker palette from the provided JSON theme.\n     * @param {object} c\n     * @param {number=} c.index\n     * @param {string=} c.color\n     * @returns {string} The resolved color.\n     *\n     * @example\n     * theme.getColorPickerColor({ index: 1 });\n     * theme.getColorPickerColor({ color: 'red' });\n     */\n    getColorPickerColor(...a) {\n      return paletteResolver.uiColor(...a);\n    },\n\n    /**\n     * Get the best contrasting color against the specified `color`.\n     * This is typically used to find a suitable text color for a label placed on an arbitrarily colored background.\n     *\n     * The returned colors are derived from the theme.\n     * @param {string} color - A color to measure the contrast against\n     * @returns {string} - The color that has the best contrast against the specified `color`.\n     * @example\n     * theme.getContrastingColorTo('#400');\n     */\n    getContrastingColorTo(color) {\n      return contraster.getBestContrastColor(color);\n    },\n\n    /**\n     * Get the value of a style attribute in the theme by searching in the theme's json structure.\n     * The search starts at the specified base path and continue upwards until the value is found.\n     * If possible it will get the attribute's value using the given path.\n     *\n     * @param {string} basePath - Base path in the theme's json structure to start the search in (specified as a name path separated by dots)\n     * @param {string} path - Expected path for the attribute (specified as a name path separated by dots)\n     * @param {string} attribute - Name of the style attribute\n     * @returns {string} The style value\n     *\n     * @example\n     * theme.getStyle('object', 'title.main', 'fontSize'));\n     * theme.getStyle('', '', 'fontSize'));\n     */\n    getStyle(basePath, path, attribute) {\n      if (!styleResolverInstanceCache[basePath]) {\n        styleResolverInstanceCache[basePath] = styleResolverFn(basePath, resolvedThemeJSON);\n      }\n      return styleResolverInstanceCache[basePath].getStyle(path, attribute, false);\n    },\n  };\n\n  const internalAPI = {\n    /**\n     * @private\n     * @param {object} t Raw JSON theme\n     */\n    setTheme(t, name) {\n      resolvedThemeJSON = setTheme(t, styleResolverFn.resolveRawTheme);\n      styleResolverInstanceCache = {};\n\n      paletteResolver = paletteResolverFn(resolvedThemeJSON);\n\n      // try to determine if the theme color is light or dark\n      const textColor = externalAPI.getStyle('', '', 'color');\n      const textColorLuminance = luminance(textColor);\n      // if it appears dark, create an inverse that is light and vice versa\n      const inverseTextColor = textColorLuminance < 0.2 ? '#ffffff' : '#333333';\n      // instantiate a contraster that uses those two colors when determining the best contrast for an arbitrary color\n      contraster = contrasterFn([textColor, inverseTextColor]);\n\n      externalAPI.emit('changed');\n      externalAPI.name = () => name;\n    },\n  };\n\n  Object.keys(EventEmitter.prototype).forEach((key) => {\n    externalAPI[key] = EventEmitter.prototype[key];\n  });\n  EventEmitter.init(externalAPI);\n\n  internalAPI.setTheme({}, 'light');\n\n  return {\n    externalAPI,\n    internalAPI,\n  };\n}\n","/**\n * @interface Theme~ScalePalette\n * @property {string} key\n * @property {'gradient'|'class-pyramid'} type\n * @property {string[]|Array<Array<string>>} colors\n */\n\n/**\n * @interface Theme~DataPalette\n * @property {string} key\n * @property {'pyramid'|'row'} type\n * @property {string[]|Array<Array<string>>} colors\n */\n\n/**\n * @interface Theme~ColorPickerPalette\n * @property {string} key\n * @property {string[]} colors\n */\n\nexport default function theme(resolvedTheme) {\n  let uiPalette;\n\n  return {\n    dataScales() {\n      const pals = [];\n      resolvedTheme.scales.forEach((s) => {\n        pals.push({\n          key: s.propertyValue,\n          name: s.name,\n          translation: s.translation,\n          scheme: true, // indicate that this is scheme that can be used to generate more colors\n          type: s.type, // gradient, class, pyramid, row\n          colors: s.scale,\n        });\n      });\n\n      return pals;\n    },\n    dataPalettes() {\n      const pals = [];\n      resolvedTheme.palettes.data.forEach((s) => {\n        pals.push({\n          key: s.propertyValue,\n          name: s.name,\n          translation: s.translation,\n          type: s.type,\n          colors: s.scale,\n        });\n      });\n\n      return pals;\n    },\n    uiPalettes() {\n      const pals = [];\n      resolvedTheme.palettes.ui.forEach((s) => {\n        pals.push({\n          key: 'ui',\n          name: s.name,\n          translation: s.translation,\n          type: 'row',\n          colors: s.colors,\n        });\n      });\n      return pals;\n    },\n    dataColors() {\n      /** @interface Theme~DataColorSpecials */\n      return /** @lends Theme~DataColorSpecials */ {\n        /** @type {string} */\n        primary: resolvedTheme.dataColors.primaryColor,\n        /** @type {string} */\n        nil: resolvedTheme.dataColors.nullColor,\n        /** @type {string} */\n        others: resolvedTheme.dataColors.othersColor,\n      };\n    },\n    uiColor(c) {\n      if (c.index < 0 || typeof c.index === 'undefined') {\n        return c.color;\n      }\n      if (typeof uiPalette === 'undefined') {\n        uiPalette = this.uiPalettes()[0] || false;\n      }\n      if (!uiPalette) {\n        return c.color;\n      }\n      if (typeof uiPalette.colors[c.index] === 'undefined') {\n        return c.color;\n      }\n      return uiPalette.colors[c.index];\n    },\n  };\n}\n","import extend from 'extend';\n\nimport baseRawJSON from './themes/base.json';\nimport lightRawJSON from './themes/light.json';\nimport darkRawJSON from './themes/dark.json';\n\nexport default function setTheme(t, resolve) {\n  const colorRawJSON = t.type === 'dark' ? darkRawJSON : lightRawJSON;\n  const root = extend(true, {}, baseRawJSON, colorRawJSON);\n  // avoid merging known array objects as it could cause issues if they are of different types (pyramid vs class) or length\n  const rawThemeJSON = extend(true, {}, root, { scales: null, palettes: { data: null, ui: null } }, t);\n  if (!rawThemeJSON.palettes.data || !rawThemeJSON.palettes.data.length) {\n    rawThemeJSON.palettes.data = root.palettes.data;\n  }\n  if (!rawThemeJSON.palettes.ui || !rawThemeJSON.palettes.ui.length) {\n    rawThemeJSON.palettes.ui = root.palettes.ui;\n  }\n  if (!rawThemeJSON.scales || !rawThemeJSON.scales.length) {\n    rawThemeJSON.scales = root.scales;\n  }\n\n  const resolvedThemeJSON = resolve(rawThemeJSON);\n\n  return resolvedThemeJSON;\n}\n","/* eslint no-cond-assign: 0 */\nimport luminance from './luminance';\nimport contrast from './contrast';\n\nconst MAX_SIZE = 1000;\n\nexport default function colorFn(colors = ['#333333', '#ffffff']) {\n  let cache = {};\n  let n = 0;\n\n  const luminances = colors.map(luminance);\n\n  return {\n    getBestContrastColor(colorString) {\n      if (!cache[colorString]) {\n        if (n > MAX_SIZE) {\n          cache = {};\n          n = 0;\n        }\n        const L = luminance(colorString);\n\n        const contrasts = luminances.map((lum) => contrast(L, lum));\n        const c = colors[contrasts.indexOf(Math.max(...contrasts))];\n\n        cache[colorString] = c;\n        n++;\n      }\n      return cache[colorString];\n    },\n  };\n}\n","/* eslint no-underscore-dangle:0 */\nimport themeFn from '@nebula.js/theme';\n\nconst timed = (t, v) => new Promise((resolve) => setTimeout(() => resolve(v), t));\n\nconst LOAD_THEME_TIMEOUT = 5000;\n\nexport default function appTheme({ themes = [], root } = {}) {\n  const wrappedTheme = themeFn();\n\n  const setTheme = async (themeId) => {\n    const found = themes.filter((t) => t.id === themeId)[0];\n    let muiTheme = themeId === 'dark' ? 'dark' : 'light';\n    if (found && found.load) {\n      try {\n        const raw = await Promise.race([found.load(), timed(LOAD_THEME_TIMEOUT, { __timedOut: true })]);\n        if (raw.__timedOut) {\n          if (__NEBULA_DEV__) {\n            console.warn(`Timeout when loading theme '${themeId}'`); // eslint-disable-line no-console\n          }\n        } else {\n          muiTheme = raw.type === 'dark' ? 'dark' : 'light';\n          wrappedTheme.internalAPI.setTheme(raw, themeId);\n          root.setMuiThemeName(muiTheme);\n        }\n      } catch (e) {\n        if (__NEBULA_DEV__) {\n          console.error(e); // eslint-disable-line no-console\n        }\n      }\n    } else {\n      wrappedTheme.internalAPI.setTheme(\n        {\n          type: muiTheme,\n        },\n        themeId\n      );\n      root.setMuiThemeName(muiTheme);\n    }\n  };\n\n  return {\n    setTheme,\n    externalAPI: wrappedTheme.externalAPI,\n  };\n}\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nexport default function _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nexport function isPlainObject(item) {\n  return item && _typeof(item) === 'object' && item.constructor === Object;\n}\nexport default function deepmerge(target, source) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n    clone: true\n  };\n  var output = options.clone ? _extends({}, target) : target;\n\n  if (isPlainObject(target) && isPlainObject(source)) {\n    Object.keys(source).forEach(function (key) {\n      // Avoid prototype pollution\n      if (key === '__proto__') {\n        return;\n      }\n\n      if (isPlainObject(source[key]) && key in target) {\n        output[key] = deepmerge(target[key], source[key], options);\n      } else {\n        output[key] = source[key];\n      }\n    });\n  }\n\n  return output;\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","/**\n * WARNING: Don't import this directly.\n * Use `MuiError` from `@material-ui/utils/macros/MuiError.macro` instead.\n * @param {number} code\n */\nexport default function formatMuiErrorMessage(code) {\n  // Apply babel-plugin-transform-template-literals in loose mode\n  // loose mode is safe iff we're concatenating primitives\n  // see https://babeljs.io/docs/en/babel-plugin-transform-template-literals#loose\n\n  /* eslint-disable prefer-template */\n  var url = 'https://material-ui.com/production-error/?code=' + code;\n\n  for (var i = 1; i < arguments.length; i += 1) {\n    // rest params over-transpile for this case\n    // eslint-disable-next-line prefer-rest-params\n    url += '&args[]=' + encodeURIComponent(arguments[i]);\n  }\n\n  return 'Minified Material-UI error #' + code + '; visit ' + url + ' for the full message.';\n  /* eslint-enable prefer-template */\n}","import { formatMuiErrorMessage as _formatMuiErrorMessage } from \"@material-ui/utils\";\n\n/* eslint-disable no-use-before-define */\n\n/**\n * Returns a number whose value is limited to the given range.\n *\n * @param {number} value The value to be clamped\n * @param {number} min The lower boundary of the output range\n * @param {number} max The upper boundary of the output range\n * @returns {number} A number in the range [min, max]\n */\nfunction clamp(value) {\n  var min = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var max = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (value < min || value > max) {\n      console.error(\"Material-UI: The value provided \".concat(value, \" is out of range [\").concat(min, \", \").concat(max, \"].\"));\n    }\n  }\n\n  return Math.min(Math.max(min, value), max);\n}\n/**\n * Converts a color from CSS hex format to CSS rgb format.\n *\n * @param {string} color - Hex color, i.e. #nnn or #nnnnnn\n * @returns {string} A CSS rgb color string\n */\n\n\nexport function hexToRgb(color) {\n  color = color.substr(1);\n  var re = new RegExp(\".{1,\".concat(color.length >= 6 ? 2 : 1, \"}\"), 'g');\n  var colors = color.match(re);\n\n  if (colors && colors[0].length === 1) {\n    colors = colors.map(function (n) {\n      return n + n;\n    });\n  }\n\n  return colors ? \"rgb\".concat(colors.length === 4 ? 'a' : '', \"(\").concat(colors.map(function (n, index) {\n    return index < 3 ? parseInt(n, 16) : Math.round(parseInt(n, 16) / 255 * 1000) / 1000;\n  }).join(', '), \")\") : '';\n}\n\nfunction intToHex(int) {\n  var hex = int.toString(16);\n  return hex.length === 1 ? \"0\".concat(hex) : hex;\n}\n/**\n * Converts a color from CSS rgb format to CSS hex format.\n *\n * @param {string} color - RGB color, i.e. rgb(n, n, n)\n * @returns {string} A CSS rgb color string, i.e. #nnnnnn\n */\n\n\nexport function rgbToHex(color) {\n  // Idempotent\n  if (color.indexOf('#') === 0) {\n    return color;\n  }\n\n  var _decomposeColor = decomposeColor(color),\n      values = _decomposeColor.values;\n\n  return \"#\".concat(values.map(function (n) {\n    return intToHex(n);\n  }).join(''));\n}\n/**\n * Converts a color from hsl format to rgb format.\n *\n * @param {string} color - HSL color values\n * @returns {string} rgb color values\n */\n\nexport function hslToRgb(color) {\n  color = decomposeColor(color);\n  var _color = color,\n      values = _color.values;\n  var h = values[0];\n  var s = values[1] / 100;\n  var l = values[2] / 100;\n  var a = s * Math.min(l, 1 - l);\n\n  var f = function f(n) {\n    var k = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : (n + h / 30) % 12;\n    return l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);\n  };\n\n  var type = 'rgb';\n  var rgb = [Math.round(f(0) * 255), Math.round(f(8) * 255), Math.round(f(4) * 255)];\n\n  if (color.type === 'hsla') {\n    type += 'a';\n    rgb.push(values[3]);\n  }\n\n  return recomposeColor({\n    type: type,\n    values: rgb\n  });\n}\n/**\n * Returns an object with the type and values of a color.\n *\n * Note: Does not support rgb % values.\n *\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\n * @returns {object} - A MUI color object: {type: string, values: number[]}\n */\n\nexport function decomposeColor(color) {\n  // Idempotent\n  if (color.type) {\n    return color;\n  }\n\n  if (color.charAt(0) === '#') {\n    return decomposeColor(hexToRgb(color));\n  }\n\n  var marker = color.indexOf('(');\n  var type = color.substring(0, marker);\n\n  if (['rgb', 'rgba', 'hsl', 'hsla'].indexOf(type) === -1) {\n    throw new Error(process.env.NODE_ENV !== \"production\" ? \"Material-UI: Unsupported `\".concat(color, \"` color.\\nWe support the following formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla().\") : _formatMuiErrorMessage(3, color));\n  }\n\n  var values = color.substring(marker + 1, color.length - 1).split(',');\n  values = values.map(function (value) {\n    return parseFloat(value);\n  });\n  return {\n    type: type,\n    values: values\n  };\n}\n/**\n * Converts a color object with type and values to a string.\n *\n * @param {object} color - Decomposed color\n * @param {string} color.type - One of: 'rgb', 'rgba', 'hsl', 'hsla'\n * @param {array} color.values - [n,n,n] or [n,n,n,n]\n * @returns {string} A CSS color string\n */\n\nexport function recomposeColor(color) {\n  var type = color.type;\n  var values = color.values;\n\n  if (type.indexOf('rgb') !== -1) {\n    // Only convert the first 3 values to int (i.e. not alpha)\n    values = values.map(function (n, i) {\n      return i < 3 ? parseInt(n, 10) : n;\n    });\n  } else if (type.indexOf('hsl') !== -1) {\n    values[1] = \"\".concat(values[1], \"%\");\n    values[2] = \"\".concat(values[2], \"%\");\n  }\n\n  return \"\".concat(type, \"(\").concat(values.join(', '), \")\");\n}\n/**\n * Calculates the contrast ratio between two colors.\n *\n * Formula: https://www.w3.org/TR/WCAG20-TECHS/G17.html#G17-tests\n *\n * @param {string} foreground - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\n * @param {string} background - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\n * @returns {number} A contrast ratio value in the range 0 - 21.\n */\n\nexport function getContrastRatio(foreground, background) {\n  var lumA = getLuminance(foreground);\n  var lumB = getLuminance(background);\n  return (Math.max(lumA, lumB) + 0.05) / (Math.min(lumA, lumB) + 0.05);\n}\n/**\n * The relative brightness of any point in a color space,\n * normalized to 0 for darkest black and 1 for lightest white.\n *\n * Formula: https://www.w3.org/TR/WCAG20-TECHS/G17.html#G17-tests\n *\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\n * @returns {number} The relative brightness of the color in the range 0 - 1\n */\n\nexport function getLuminance(color) {\n  color = decomposeColor(color);\n  var rgb = color.type === 'hsl' ? decomposeColor(hslToRgb(color)).values : color.values;\n  rgb = rgb.map(function (val) {\n    val /= 255; // normalized\n\n    return val <= 0.03928 ? val / 12.92 : Math.pow((val + 0.055) / 1.055, 2.4);\n  }); // Truncate at 3 digits\n\n  return Number((0.2126 * rgb[0] + 0.7152 * rgb[1] + 0.0722 * rgb[2]).toFixed(3));\n}\n/**\n * Darken or lighten a color, depending on its luminance.\n * Light colors are darkened, dark colors are lightened.\n *\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\n * @param {number} coefficient=0.15 - multiplier in the range 0 - 1\n * @returns {string} A CSS color string. Hex input values are returned as rgb\n */\n\nexport function emphasize(color) {\n  var coefficient = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.15;\n  return getLuminance(color) > 0.5 ? darken(color, coefficient) : lighten(color, coefficient);\n}\n/**\n * Set the absolute transparency of a color.\n * Any existing alpha values are overwritten.\n *\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\n * @param {number} value - value to set the alpha channel to in the range 0 -1\n * @returns {string} A CSS color string. Hex input values are returned as rgb\n */\n\nexport function fade(color, value) {\n  color = decomposeColor(color);\n  value = clamp(value);\n\n  if (color.type === 'rgb' || color.type === 'hsl') {\n    color.type += 'a';\n  }\n\n  color.values[3] = value;\n  return recomposeColor(color);\n}\n/**\n * Darkens a color.\n *\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\n * @param {number} coefficient - multiplier in the range 0 - 1\n * @returns {string} A CSS color string. Hex input values are returned as rgb\n */\n\nexport function darken(color, coefficient) {\n  color = decomposeColor(color);\n  coefficient = clamp(coefficient);\n\n  if (color.type.indexOf('hsl') !== -1) {\n    color.values[2] *= 1 - coefficient;\n  } else if (color.type.indexOf('rgb') !== -1) {\n    for (var i = 0; i < 3; i += 1) {\n      color.values[i] *= 1 - coefficient;\n    }\n  }\n\n  return recomposeColor(color);\n}\n/**\n * Lightens a color.\n *\n * @param {string} color - CSS color, i.e. one of: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla()\n * @param {number} coefficient - multiplier in the range 0 - 1\n * @returns {string} A CSS color string. Hex input values are returned as rgb\n */\n\nexport function lighten(color, coefficient) {\n  color = decomposeColor(color);\n  coefficient = clamp(coefficient);\n\n  if (color.type.indexOf('hsl') !== -1) {\n    color.values[2] += (100 - color.values[2]) * coefficient;\n  } else if (color.type.indexOf('rgb') !== -1) {\n    for (var i = 0; i < 3; i += 1) {\n      color.values[i] += (255 - color.values[i]) * coefficient;\n    }\n  }\n\n  return recomposeColor(color);\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\n// Sorted ASC by size. That's important.\n// It can't be configured as it's used statically for propTypes.\nexport var keys = ['xs', 'sm', 'md', 'lg', 'xl']; // Keep in mind that @media is inclusive by the CSS specification.\n\nexport default function createBreakpoints(breakpoints) {\n  var _breakpoints$values = breakpoints.values,\n      values = _breakpoints$values === void 0 ? {\n    xs: 0,\n    sm: 600,\n    md: 960,\n    lg: 1280,\n    xl: 1920\n  } : _breakpoints$values,\n      _breakpoints$unit = breakpoints.unit,\n      unit = _breakpoints$unit === void 0 ? 'px' : _breakpoints$unit,\n      _breakpoints$step = breakpoints.step,\n      step = _breakpoints$step === void 0 ? 5 : _breakpoints$step,\n      other = _objectWithoutProperties(breakpoints, [\"values\", \"unit\", \"step\"]);\n\n  function up(key) {\n    var value = typeof values[key] === 'number' ? values[key] : key;\n    return \"@media (min-width:\".concat(value).concat(unit, \")\");\n  }\n\n  function down(key) {\n    var endIndex = keys.indexOf(key) + 1;\n    var upperbound = values[keys[endIndex]];\n\n    if (endIndex === keys.length) {\n      // xl down applies to all sizes\n      return up('xs');\n    }\n\n    var value = typeof upperbound === 'number' && endIndex > 0 ? upperbound : key;\n    return \"@media (max-width:\".concat(value - step / 100).concat(unit, \")\");\n  }\n\n  function between(start, end) {\n    var endIndex = keys.indexOf(end);\n\n    if (endIndex === keys.length - 1) {\n      return up(start);\n    }\n\n    return \"@media (min-width:\".concat(typeof values[start] === 'number' ? values[start] : start).concat(unit, \") and \") + \"(max-width:\".concat((endIndex !== -1 && typeof values[keys[endIndex + 1]] === 'number' ? values[keys[endIndex + 1]] : end) - step / 100).concat(unit, \")\");\n  }\n\n  function only(key) {\n    return between(key, key);\n  }\n\n  function width(key) {\n    return values[key];\n  }\n\n  return _extends({\n    keys: keys,\n    values: values,\n    up: up,\n    down: down,\n    between: between,\n    only: only,\n    width: width\n  }, other);\n}","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nexport default function createMixins(breakpoints, spacing, mixins) {\n  var _toolbar;\n\n  return _extends({\n    gutters: function gutters() {\n      var styles = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      // To deprecate in v4.1\n      //       warning(\n      //         false,\n      //         [\n      //           'Material-UI: Theme.mixins.gutters() is deprecated.',\n      //           'You can use the source of the mixin directly:',\n      //           `\n      // paddingLeft: theme.spacing(2),\n      // paddingRight: theme.spacing(2),\n      // [theme.breakpoints.up('sm')]: {\n      //   paddingLeft: theme.spacing(3),\n      //   paddingRight: theme.spacing(3),\n      // },\n      // `,\n      //         ].join('\\n'),\n      //       );\n      return _extends({\n        paddingLeft: spacing(2),\n        paddingRight: spacing(2)\n      }, styles, _defineProperty({}, breakpoints.up('sm'), _extends({\n        paddingLeft: spacing(3),\n        paddingRight: spacing(3)\n      }, styles[breakpoints.up('sm')])));\n    },\n    toolbar: (_toolbar = {\n      minHeight: 56\n    }, _defineProperty(_toolbar, \"\".concat(breakpoints.up('xs'), \" and (orientation: landscape)\"), {\n      minHeight: 48\n    }), _defineProperty(_toolbar, breakpoints.up('sm'), {\n      minHeight: 64\n    }), _toolbar)\n  }, mixins);\n}","var common = {\n  black: '#000',\n  white: '#fff'\n};\nexport default common;","var grey = {\n  50: '#fafafa',\n  100: '#f5f5f5',\n  200: '#eeeeee',\n  300: '#e0e0e0',\n  400: '#bdbdbd',\n  500: '#9e9e9e',\n  600: '#757575',\n  700: '#616161',\n  800: '#424242',\n  900: '#212121',\n  A100: '#d5d5d5',\n  A200: '#aaaaaa',\n  A400: '#303030',\n  A700: '#616161'\n};\nexport default grey;","var indigo = {\n  50: '#e8eaf6',\n  100: '#c5cae9',\n  200: '#9fa8da',\n  300: '#7986cb',\n  400: '#5c6bc0',\n  500: '#3f51b5',\n  600: '#3949ab',\n  700: '#303f9f',\n  800: '#283593',\n  900: '#1a237e',\n  A100: '#8c9eff',\n  A200: '#536dfe',\n  A400: '#3d5afe',\n  A700: '#304ffe'\n};\nexport default indigo;","var pink = {\n  50: '#fce4ec',\n  100: '#f8bbd0',\n  200: '#f48fb1',\n  300: '#f06292',\n  400: '#ec407a',\n  500: '#e91e63',\n  600: '#d81b60',\n  700: '#c2185b',\n  800: '#ad1457',\n  900: '#880e4f',\n  A100: '#ff80ab',\n  A200: '#ff4081',\n  A400: '#f50057',\n  A700: '#c51162'\n};\nexport default pink;","var red = {\n  50: '#ffebee',\n  100: '#ffcdd2',\n  200: '#ef9a9a',\n  300: '#e57373',\n  400: '#ef5350',\n  500: '#f44336',\n  600: '#e53935',\n  700: '#d32f2f',\n  800: '#c62828',\n  900: '#b71c1c',\n  A100: '#ff8a80',\n  A200: '#ff5252',\n  A400: '#ff1744',\n  A700: '#d50000'\n};\nexport default red;","var orange = {\n  50: '#fff3e0',\n  100: '#ffe0b2',\n  200: '#ffcc80',\n  300: '#ffb74d',\n  400: '#ffa726',\n  500: '#ff9800',\n  600: '#fb8c00',\n  700: '#f57c00',\n  800: '#ef6c00',\n  900: '#e65100',\n  A100: '#ffd180',\n  A200: '#ffab40',\n  A400: '#ff9100',\n  A700: '#ff6d00'\n};\nexport default orange;","var blue = {\n  50: '#e3f2fd',\n  100: '#bbdefb',\n  200: '#90caf9',\n  300: '#64b5f6',\n  400: '#42a5f5',\n  500: '#2196f3',\n  600: '#1e88e5',\n  700: '#1976d2',\n  800: '#1565c0',\n  900: '#0d47a1',\n  A100: '#82b1ff',\n  A200: '#448aff',\n  A400: '#2979ff',\n  A700: '#2962ff'\n};\nexport default blue;","var green = {\n  50: '#e8f5e9',\n  100: '#c8e6c9',\n  200: '#a5d6a7',\n  300: '#81c784',\n  400: '#66bb6a',\n  500: '#4caf50',\n  600: '#43a047',\n  700: '#388e3c',\n  800: '#2e7d32',\n  900: '#1b5e20',\n  A100: '#b9f6ca',\n  A200: '#69f0ae',\n  A400: '#00e676',\n  A700: '#00c853'\n};\nexport default green;","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport { formatMuiErrorMessage as _formatMuiErrorMessage } from \"@material-ui/utils\";\nimport { deepmerge } from '@material-ui/utils';\nimport common from '../colors/common';\nimport grey from '../colors/grey';\nimport indigo from '../colors/indigo';\nimport pink from '../colors/pink';\nimport red from '../colors/red';\nimport orange from '../colors/orange';\nimport blue from '../colors/blue';\nimport green from '../colors/green';\nimport { darken, getContrastRatio, lighten } from './colorManipulator';\nexport var light = {\n  // The colors used to style the text.\n  text: {\n    // The most important text.\n    primary: 'rgba(0, 0, 0, 0.87)',\n    // Secondary text.\n    secondary: 'rgba(0, 0, 0, 0.54)',\n    // Disabled text have even lower visual prominence.\n    disabled: 'rgba(0, 0, 0, 0.38)',\n    // Text hints.\n    hint: 'rgba(0, 0, 0, 0.38)'\n  },\n  // The color used to divide different elements.\n  divider: 'rgba(0, 0, 0, 0.12)',\n  // The background colors used to style the surfaces.\n  // Consistency between these values is important.\n  background: {\n    paper: common.white,\n    default: grey[50]\n  },\n  // The colors used to style the action elements.\n  action: {\n    // The color of an active action like an icon button.\n    active: 'rgba(0, 0, 0, 0.54)',\n    // The color of an hovered action.\n    hover: 'rgba(0, 0, 0, 0.04)',\n    hoverOpacity: 0.04,\n    // The color of a selected action.\n    selected: 'rgba(0, 0, 0, 0.08)',\n    selectedOpacity: 0.08,\n    // The color of a disabled action.\n    disabled: 'rgba(0, 0, 0, 0.26)',\n    // The background color of a disabled action.\n    disabledBackground: 'rgba(0, 0, 0, 0.12)',\n    disabledOpacity: 0.38,\n    focus: 'rgba(0, 0, 0, 0.12)',\n    focusOpacity: 0.12,\n    activatedOpacity: 0.12\n  }\n};\nexport var dark = {\n  text: {\n    primary: common.white,\n    secondary: 'rgba(255, 255, 255, 0.7)',\n    disabled: 'rgba(255, 255, 255, 0.5)',\n    hint: 'rgba(255, 255, 255, 0.5)',\n    icon: 'rgba(255, 255, 255, 0.5)'\n  },\n  divider: 'rgba(255, 255, 255, 0.12)',\n  background: {\n    paper: grey[800],\n    default: '#303030'\n  },\n  action: {\n    active: common.white,\n    hover: 'rgba(255, 255, 255, 0.08)',\n    hoverOpacity: 0.08,\n    selected: 'rgba(255, 255, 255, 0.16)',\n    selectedOpacity: 0.16,\n    disabled: 'rgba(255, 255, 255, 0.3)',\n    disabledBackground: 'rgba(255, 255, 255, 0.12)',\n    disabledOpacity: 0.38,\n    focus: 'rgba(255, 255, 255, 0.12)',\n    focusOpacity: 0.12,\n    activatedOpacity: 0.24\n  }\n};\n\nfunction addLightOrDark(intent, direction, shade, tonalOffset) {\n  var tonalOffsetLight = tonalOffset.light || tonalOffset;\n  var tonalOffsetDark = tonalOffset.dark || tonalOffset * 1.5;\n\n  if (!intent[direction]) {\n    if (intent.hasOwnProperty(shade)) {\n      intent[direction] = intent[shade];\n    } else if (direction === 'light') {\n      intent.light = lighten(intent.main, tonalOffsetLight);\n    } else if (direction === 'dark') {\n      intent.dark = darken(intent.main, tonalOffsetDark);\n    }\n  }\n}\n\nexport default function createPalette(palette) {\n  var _palette$primary = palette.primary,\n      primary = _palette$primary === void 0 ? {\n    light: indigo[300],\n    main: indigo[500],\n    dark: indigo[700]\n  } : _palette$primary,\n      _palette$secondary = palette.secondary,\n      secondary = _palette$secondary === void 0 ? {\n    light: pink.A200,\n    main: pink.A400,\n    dark: pink.A700\n  } : _palette$secondary,\n      _palette$error = palette.error,\n      error = _palette$error === void 0 ? {\n    light: red[300],\n    main: red[500],\n    dark: red[700]\n  } : _palette$error,\n      _palette$warning = palette.warning,\n      warning = _palette$warning === void 0 ? {\n    light: orange[300],\n    main: orange[500],\n    dark: orange[700]\n  } : _palette$warning,\n      _palette$info = palette.info,\n      info = _palette$info === void 0 ? {\n    light: blue[300],\n    main: blue[500],\n    dark: blue[700]\n  } : _palette$info,\n      _palette$success = palette.success,\n      success = _palette$success === void 0 ? {\n    light: green[300],\n    main: green[500],\n    dark: green[700]\n  } : _palette$success,\n      _palette$type = palette.type,\n      type = _palette$type === void 0 ? 'light' : _palette$type,\n      _palette$contrastThre = palette.contrastThreshold,\n      contrastThreshold = _palette$contrastThre === void 0 ? 3 : _palette$contrastThre,\n      _palette$tonalOffset = palette.tonalOffset,\n      tonalOffset = _palette$tonalOffset === void 0 ? 0.2 : _palette$tonalOffset,\n      other = _objectWithoutProperties(palette, [\"primary\", \"secondary\", \"error\", \"warning\", \"info\", \"success\", \"type\", \"contrastThreshold\", \"tonalOffset\"]); // Use the same logic as\n  // Bootstrap: https://github.com/twbs/bootstrap/blob/1d6e3710dd447de1a200f29e8fa521f8a0908f70/scss/_functions.scss#L59\n  // and material-components-web https://github.com/material-components/material-components-web/blob/ac46b8863c4dab9fc22c4c662dc6bd1b65dd652f/packages/mdc-theme/_functions.scss#L54\n\n\n  function getContrastText(background) {\n    var contrastText = getContrastRatio(background, dark.text.primary) >= contrastThreshold ? dark.text.primary : light.text.primary;\n\n    if (process.env.NODE_ENV !== 'production') {\n      var contrast = getContrastRatio(background, contrastText);\n\n      if (contrast < 3) {\n        console.error([\"Material-UI: The contrast ratio of \".concat(contrast, \":1 for \").concat(contrastText, \" on \").concat(background), 'falls below the WCAG recommended absolute minimum contrast ratio of 3:1.', 'https://www.w3.org/TR/2008/REC-WCAG20-20081211/#visual-audio-contrast-contrast'].join('\\n'));\n      }\n    }\n\n    return contrastText;\n  }\n\n  var augmentColor = function augmentColor(color) {\n    var mainShade = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 500;\n    var lightShade = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 300;\n    var darkShade = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 700;\n    color = _extends({}, color);\n\n    if (!color.main && color[mainShade]) {\n      color.main = color[mainShade];\n    }\n\n    if (!color.main) {\n      throw new Error(process.env.NODE_ENV !== \"production\" ? \"Material-UI: The color provided to augmentColor(color) is invalid.\\nThe color object needs to have a `main` property or a `\".concat(mainShade, \"` property.\") : _formatMuiErrorMessage(4, mainShade));\n    }\n\n    if (typeof color.main !== 'string') {\n      throw new Error(process.env.NODE_ENV !== \"production\" ? \"Material-UI: The color provided to augmentColor(color) is invalid.\\n`color.main` should be a string, but `\".concat(JSON.stringify(color.main), \"` was provided instead.\\n\\nDid you intend to use one of the following approaches?\\n\\nimport {\\xA0green } from \\\"@material-ui/core/colors\\\";\\n\\nconst theme1 = createMuiTheme({ palette: {\\n  primary: green,\\n} });\\n\\nconst theme2 = createMuiTheme({ palette: {\\n  primary: { main: green[500] },\\n} });\") : _formatMuiErrorMessage(5, JSON.stringify(color.main)));\n    }\n\n    addLightOrDark(color, 'light', lightShade, tonalOffset);\n    addLightOrDark(color, 'dark', darkShade, tonalOffset);\n\n    if (!color.contrastText) {\n      color.contrastText = getContrastText(color.main);\n    }\n\n    return color;\n  };\n\n  var types = {\n    dark: dark,\n    light: light\n  };\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (!types[type]) {\n      console.error(\"Material-UI: The palette type `\".concat(type, \"` is not supported.\"));\n    }\n  }\n\n  var paletteOutput = deepmerge(_extends({\n    // A collection of common colors.\n    common: common,\n    // The palette type, can be light or dark.\n    type: type,\n    // The colors used to represent primary interface elements for a user.\n    primary: augmentColor(primary),\n    // The colors used to represent secondary interface elements for a user.\n    secondary: augmentColor(secondary, 'A400', 'A200', 'A700'),\n    // The colors used to represent interface elements that the user should be made aware of.\n    error: augmentColor(error),\n    // The colors used to represent potentially dangerous actions or important messages.\n    warning: augmentColor(warning),\n    // The colors used to present information to the user that is neutral and not necessarily important.\n    info: augmentColor(info),\n    // The colors used to indicate the successful completion of an action that user triggered.\n    success: augmentColor(success),\n    // The grey colors.\n    grey: grey,\n    // Used by `getContrastText()` to maximize the contrast between\n    // the background and the text.\n    contrastThreshold: contrastThreshold,\n    // Takes a background color and returns the text color that maximizes the contrast.\n    getContrastText: getContrastText,\n    // Generate a rich color object.\n    augmentColor: augmentColor,\n    // Used by the functions below to shift a color's luminance by approximately\n    // two indexes within its tonal palette.\n    // E.g., shift from Red 500 to Red 300 or Red 700.\n    tonalOffset: tonalOffset\n  }, types[type]), other);\n  return paletteOutput;\n}","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport { deepmerge } from '@material-ui/utils';\n\nfunction round(value) {\n  return Math.round(value * 1e5) / 1e5;\n}\n\nvar caseAllCaps = {\n  textTransform: 'uppercase'\n};\nvar defaultFontFamily = '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif';\n/**\n * @see @link{https://material.io/design/typography/the-type-system.html}\n * @see @link{https://material.io/design/typography/understanding-typography.html}\n */\n\nexport default function createTypography(palette, typography) {\n  var _ref = typeof typography === 'function' ? typography(palette) : typography,\n      _ref$fontFamily = _ref.fontFamily,\n      fontFamily = _ref$fontFamily === void 0 ? defaultFontFamily : _ref$fontFamily,\n      _ref$fontSize = _ref.fontSize,\n      fontSize = _ref$fontSize === void 0 ? 14 : _ref$fontSize,\n      _ref$fontWeightLight = _ref.fontWeightLight,\n      fontWeightLight = _ref$fontWeightLight === void 0 ? 300 : _ref$fontWeightLight,\n      _ref$fontWeightRegula = _ref.fontWeightRegular,\n      fontWeightRegular = _ref$fontWeightRegula === void 0 ? 400 : _ref$fontWeightRegula,\n      _ref$fontWeightMedium = _ref.fontWeightMedium,\n      fontWeightMedium = _ref$fontWeightMedium === void 0 ? 500 : _ref$fontWeightMedium,\n      _ref$fontWeightBold = _ref.fontWeightBold,\n      fontWeightBold = _ref$fontWeightBold === void 0 ? 700 : _ref$fontWeightBold,\n      _ref$htmlFontSize = _ref.htmlFontSize,\n      htmlFontSize = _ref$htmlFontSize === void 0 ? 16 : _ref$htmlFontSize,\n      allVariants = _ref.allVariants,\n      pxToRem2 = _ref.pxToRem,\n      other = _objectWithoutProperties(_ref, [\"fontFamily\", \"fontSize\", \"fontWeightLight\", \"fontWeightRegular\", \"fontWeightMedium\", \"fontWeightBold\", \"htmlFontSize\", \"allVariants\", \"pxToRem\"]);\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof fontSize !== 'number') {\n      console.error('Material-UI: `fontSize` is required to be a number.');\n    }\n\n    if (typeof htmlFontSize !== 'number') {\n      console.error('Material-UI: `htmlFontSize` is required to be a number.');\n    }\n  }\n\n  var coef = fontSize / 14;\n\n  var pxToRem = pxToRem2 || function (size) {\n    return \"\".concat(size / htmlFontSize * coef, \"rem\");\n  };\n\n  var buildVariant = function buildVariant(fontWeight, size, lineHeight, letterSpacing, casing) {\n    return _extends({\n      fontFamily: fontFamily,\n      fontWeight: fontWeight,\n      fontSize: pxToRem(size),\n      // Unitless following https://meyerweb.com/eric/thoughts/2006/02/08/unitless-line-heights/\n      lineHeight: lineHeight\n    }, fontFamily === defaultFontFamily ? {\n      letterSpacing: \"\".concat(round(letterSpacing / size), \"em\")\n    } : {}, casing, allVariants);\n  };\n\n  var variants = {\n    h1: buildVariant(fontWeightLight, 96, 1.167, -1.5),\n    h2: buildVariant(fontWeightLight, 60, 1.2, -0.5),\n    h3: buildVariant(fontWeightRegular, 48, 1.167, 0),\n    h4: buildVariant(fontWeightRegular, 34, 1.235, 0.25),\n    h5: buildVariant(fontWeightRegular, 24, 1.334, 0),\n    h6: buildVariant(fontWeightMedium, 20, 1.6, 0.15),\n    subtitle1: buildVariant(fontWeightRegular, 16, 1.75, 0.15),\n    subtitle2: buildVariant(fontWeightMedium, 14, 1.57, 0.1),\n    body1: buildVariant(fontWeightRegular, 16, 1.5, 0.15),\n    body2: buildVariant(fontWeightRegular, 14, 1.43, 0.15),\n    button: buildVariant(fontWeightMedium, 14, 1.75, 0.4, caseAllCaps),\n    caption: buildVariant(fontWeightRegular, 12, 1.66, 0.4),\n    overline: buildVariant(fontWeightRegular, 12, 2.66, 1, caseAllCaps)\n  };\n  return deepmerge(_extends({\n    htmlFontSize: htmlFontSize,\n    pxToRem: pxToRem,\n    round: round,\n    // TODO v5: remove\n    fontFamily: fontFamily,\n    fontSize: fontSize,\n    fontWeightLight: fontWeightLight,\n    fontWeightRegular: fontWeightRegular,\n    fontWeightMedium: fontWeightMedium,\n    fontWeightBold: fontWeightBold\n  }, variants), other, {\n    clone: false // No need to clone deep\n\n  });\n}","var shadowKeyUmbraOpacity = 0.2;\nvar shadowKeyPenumbraOpacity = 0.14;\nvar shadowAmbientShadowOpacity = 0.12;\n\nfunction createShadow() {\n  return [\"\".concat(arguments.length <= 0 ? undefined : arguments[0], \"px \").concat(arguments.length <= 1 ? undefined : arguments[1], \"px \").concat(arguments.length <= 2 ? undefined : arguments[2], \"px \").concat(arguments.length <= 3 ? undefined : arguments[3], \"px rgba(0,0,0,\").concat(shadowKeyUmbraOpacity, \")\"), \"\".concat(arguments.length <= 4 ? undefined : arguments[4], \"px \").concat(arguments.length <= 5 ? undefined : arguments[5], \"px \").concat(arguments.length <= 6 ? undefined : arguments[6], \"px \").concat(arguments.length <= 7 ? undefined : arguments[7], \"px rgba(0,0,0,\").concat(shadowKeyPenumbraOpacity, \")\"), \"\".concat(arguments.length <= 8 ? undefined : arguments[8], \"px \").concat(arguments.length <= 9 ? undefined : arguments[9], \"px \").concat(arguments.length <= 10 ? undefined : arguments[10], \"px \").concat(arguments.length <= 11 ? undefined : arguments[11], \"px rgba(0,0,0,\").concat(shadowAmbientShadowOpacity, \")\")].join(',');\n} // Values from https://github.com/material-components/material-components-web/blob/be8747f94574669cb5e7add1a7c54fa41a89cec7/packages/mdc-elevation/_variables.scss\n\n\nvar shadows = ['none', createShadow(0, 2, 1, -1, 0, 1, 1, 0, 0, 1, 3, 0), createShadow(0, 3, 1, -2, 0, 2, 2, 0, 0, 1, 5, 0), createShadow(0, 3, 3, -2, 0, 3, 4, 0, 0, 1, 8, 0), createShadow(0, 2, 4, -1, 0, 4, 5, 0, 0, 1, 10, 0), createShadow(0, 3, 5, -1, 0, 5, 8, 0, 0, 1, 14, 0), createShadow(0, 3, 5, -1, 0, 6, 10, 0, 0, 1, 18, 0), createShadow(0, 4, 5, -2, 0, 7, 10, 1, 0, 2, 16, 1), createShadow(0, 5, 5, -3, 0, 8, 10, 1, 0, 3, 14, 2), createShadow(0, 5, 6, -3, 0, 9, 12, 1, 0, 3, 16, 2), createShadow(0, 6, 6, -3, 0, 10, 14, 1, 0, 4, 18, 3), createShadow(0, 6, 7, -4, 0, 11, 15, 1, 0, 4, 20, 3), createShadow(0, 7, 8, -4, 0, 12, 17, 2, 0, 5, 22, 4), createShadow(0, 7, 8, -4, 0, 13, 19, 2, 0, 5, 24, 4), createShadow(0, 7, 9, -4, 0, 14, 21, 2, 0, 5, 26, 4), createShadow(0, 8, 9, -5, 0, 15, 22, 2, 0, 6, 28, 5), createShadow(0, 8, 10, -5, 0, 16, 24, 2, 0, 6, 30, 5), createShadow(0, 8, 11, -5, 0, 17, 26, 2, 0, 6, 32, 5), createShadow(0, 9, 11, -5, 0, 18, 28, 2, 0, 7, 34, 6), createShadow(0, 9, 12, -6, 0, 19, 29, 2, 0, 7, 36, 6), createShadow(0, 10, 13, -6, 0, 20, 31, 3, 0, 8, 38, 7), createShadow(0, 10, 13, -6, 0, 21, 33, 3, 0, 8, 40, 7), createShadow(0, 10, 14, -6, 0, 22, 35, 3, 0, 8, 42, 7), createShadow(0, 11, 14, -7, 0, 23, 36, 3, 0, 9, 44, 8), createShadow(0, 11, 15, -7, 0, 24, 38, 3, 0, 9, 46, 8)];\nexport default shadows;","var shape = {\n  borderRadius: 4\n};\nexport default shape;","import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport responsivePropType from './responsivePropType';\nimport { handleBreakpoints } from './breakpoints';\nimport merge from './merge';\nimport memoize from './memoize';\nvar properties = {\n  m: 'margin',\n  p: 'padding'\n};\nvar directions = {\n  t: 'Top',\n  r: 'Right',\n  b: 'Bottom',\n  l: 'Left',\n  x: ['Left', 'Right'],\n  y: ['Top', 'Bottom']\n};\nvar aliases = {\n  marginX: 'mx',\n  marginY: 'my',\n  paddingX: 'px',\n  paddingY: 'py'\n}; // memoize() impact:\n// From 300,000 ops/sec\n// To 350,000 ops/sec\n\nvar getCssProperties = memoize(function (prop) {\n  // It's not a shorthand notation.\n  if (prop.length > 2) {\n    if (aliases[prop]) {\n      prop = aliases[prop];\n    } else {\n      return [prop];\n    }\n  }\n\n  var _prop$split = prop.split(''),\n      _prop$split2 = _slicedToArray(_prop$split, 2),\n      a = _prop$split2[0],\n      b = _prop$split2[1];\n\n  var property = properties[a];\n  var direction = directions[b] || '';\n  return Array.isArray(direction) ? direction.map(function (dir) {\n    return property + dir;\n  }) : [property + direction];\n});\nvar spacingKeys = ['m', 'mt', 'mr', 'mb', 'ml', 'mx', 'my', 'p', 'pt', 'pr', 'pb', 'pl', 'px', 'py', 'margin', 'marginTop', 'marginRight', 'marginBottom', 'marginLeft', 'marginX', 'marginY', 'padding', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', 'paddingX', 'paddingY'];\nexport function createUnarySpacing(theme) {\n  var themeSpacing = theme.spacing || 8;\n\n  if (typeof themeSpacing === 'number') {\n    return function (abs) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (typeof abs !== 'number') {\n          console.error(\"Material-UI: Expected spacing argument to be a number, got \".concat(abs, \".\"));\n        }\n      }\n\n      return themeSpacing * abs;\n    };\n  }\n\n  if (Array.isArray(themeSpacing)) {\n    return function (abs) {\n      if (process.env.NODE_ENV !== 'production') {\n        if (abs > themeSpacing.length - 1) {\n          console.error([\"Material-UI: The value provided (\".concat(abs, \") overflows.\"), \"The supported values are: \".concat(JSON.stringify(themeSpacing), \".\"), \"\".concat(abs, \" > \").concat(themeSpacing.length - 1, \", you need to add the missing values.\")].join('\\n'));\n        }\n      }\n\n      return themeSpacing[abs];\n    };\n  }\n\n  if (typeof themeSpacing === 'function') {\n    return themeSpacing;\n  }\n\n  if (process.env.NODE_ENV !== 'production') {\n    console.error([\"Material-UI: The `theme.spacing` value (\".concat(themeSpacing, \") is invalid.\"), 'It should be a number, an array or a function.'].join('\\n'));\n  }\n\n  return function () {\n    return undefined;\n  };\n}\n\nfunction getValue(transformer, propValue) {\n  if (typeof propValue === 'string') {\n    return propValue;\n  }\n\n  var abs = Math.abs(propValue);\n  var transformed = transformer(abs);\n\n  if (propValue >= 0) {\n    return transformed;\n  }\n\n  if (typeof transformed === 'number') {\n    return -transformed;\n  }\n\n  return \"-\".concat(transformed);\n}\n\nfunction getStyleFromPropValue(cssProperties, transformer) {\n  return function (propValue) {\n    return cssProperties.reduce(function (acc, cssProperty) {\n      acc[cssProperty] = getValue(transformer, propValue);\n      return acc;\n    }, {});\n  };\n}\n\nfunction spacing(props) {\n  var theme = props.theme;\n  var transformer = createUnarySpacing(theme);\n  return Object.keys(props).map(function (prop) {\n    // Using a hash computation over an array iteration could be faster, but with only 28 items,\n    // it's doesn't worth the bundle size.\n    if (spacingKeys.indexOf(prop) === -1) {\n      return null;\n    }\n\n    var cssProperties = getCssProperties(prop);\n    var styleFromPropValue = getStyleFromPropValue(cssProperties, transformer);\n    var propValue = props[prop];\n    return handleBreakpoints(props, propValue, styleFromPropValue);\n  }).reduce(merge, {});\n}\n\nspacing.propTypes = process.env.NODE_ENV !== 'production' ? spacingKeys.reduce(function (obj, key) {\n  obj[key] = responsivePropType;\n  return obj;\n}, {}) : {};\nspacing.filterProps = spacingKeys;\nexport default spacing;","import { createUnarySpacing } from '@material-ui/system';\nvar warnOnce;\nexport default function createSpacing() {\n  var spacingInput = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 8;\n\n  // Already transformed.\n  if (spacingInput.mui) {\n    return spacingInput;\n  } // Material Design layouts are visually balanced. Most measurements align to an 8dp grid applied, which aligns both spacing and the overall layout.\n  // Smaller components, such as icons and type, can align to a 4dp grid.\n  // https://material.io/design/layout/understanding-layout.html#usage\n\n\n  var transform = createUnarySpacing({\n    spacing: spacingInput\n  });\n\n  var spacing = function spacing() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (!(args.length <= 4)) {\n        console.error(\"Material-UI: Too many arguments provided, expected between 0 and 4, got \".concat(args.length));\n      }\n    }\n\n    if (args.length === 0) {\n      return transform(1);\n    }\n\n    if (args.length === 1) {\n      return transform(args[0]);\n    }\n\n    return args.map(function (argument) {\n      if (typeof argument === 'string') {\n        return argument;\n      }\n\n      var output = transform(argument);\n      return typeof output === 'number' ? \"\".concat(output, \"px\") : output;\n    }).join(' ');\n  }; // Backward compatibility, to remove in v5.\n\n\n  Object.defineProperty(spacing, 'unit', {\n    get: function get() {\n      if (process.env.NODE_ENV !== 'production') {\n        if (!warnOnce || process.env.NODE_ENV === 'test') {\n          console.error(['Material-UI: theme.spacing.unit usage has been deprecated.', 'It will be removed in v5.', 'You can replace `theme.spacing.unit * y` with `theme.spacing(y)`.', '', 'You can use the `https://github.com/mui-org/material-ui/tree/master/packages/material-ui-codemod/README.md#theme-spacing-api` migration helper to make the process smoother.'].join('\\n'));\n        }\n\n        warnOnce = true;\n      }\n\n      return spacingInput;\n    }\n  });\n  spacing.mui = true;\n  return spacing;\n}","import _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\n// Follow https://material.google.com/motion/duration-easing.html#duration-easing-natural-easing-curves\n// to learn the context in which each easing should be used.\nexport var easing = {\n  // This is the most common easing curve.\n  easeInOut: 'cubic-bezier(0.4, 0, 0.2, 1)',\n  // Objects enter the screen at full velocity from off-screen and\n  // slowly decelerate to a resting point.\n  easeOut: 'cubic-bezier(0.0, 0, 0.2, 1)',\n  // Objects leave the screen at full velocity. They do not decelerate when off-screen.\n  easeIn: 'cubic-bezier(0.4, 0, 1, 1)',\n  // The sharp curve is used by objects that may return to the screen at any time.\n  sharp: 'cubic-bezier(0.4, 0, 0.6, 1)'\n}; // Follow https://material.io/guidelines/motion/duration-easing.html#duration-easing-common-durations\n// to learn when use what timing\n\nexport var duration = {\n  shortest: 150,\n  shorter: 200,\n  short: 250,\n  // most basic recommended timing\n  standard: 300,\n  // this is to be used in complex animations\n  complex: 375,\n  // recommended when something is entering screen\n  enteringScreen: 225,\n  // recommended when something is leaving screen\n  leavingScreen: 195\n};\n\nfunction formatMs(milliseconds) {\n  return \"\".concat(Math.round(milliseconds), \"ms\");\n}\n/**\n * @param {string|Array} props\n * @param {object} param\n * @param {string} param.prop\n * @param {number} param.duration\n * @param {string} param.easing\n * @param {number} param.delay\n */\n\n\nexport default {\n  easing: easing,\n  duration: duration,\n  create: function create() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ['all'];\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var _options$duration = options.duration,\n        durationOption = _options$duration === void 0 ? duration.standard : _options$duration,\n        _options$easing = options.easing,\n        easingOption = _options$easing === void 0 ? easing.easeInOut : _options$easing,\n        _options$delay = options.delay,\n        delay = _options$delay === void 0 ? 0 : _options$delay,\n        other = _objectWithoutProperties(options, [\"duration\", \"easing\", \"delay\"]);\n\n    if (process.env.NODE_ENV !== 'production') {\n      var isString = function isString(value) {\n        return typeof value === 'string';\n      };\n\n      var isNumber = function isNumber(value) {\n        return !isNaN(parseFloat(value));\n      };\n\n      if (!isString(props) && !Array.isArray(props)) {\n        console.error('Material-UI: Argument \"props\" must be a string or Array.');\n      }\n\n      if (!isNumber(durationOption) && !isString(durationOption)) {\n        console.error(\"Material-UI: Argument \\\"duration\\\" must be a number or a string but found \".concat(durationOption, \".\"));\n      }\n\n      if (!isString(easingOption)) {\n        console.error('Material-UI: Argument \"easing\" must be a string.');\n      }\n\n      if (!isNumber(delay) && !isString(delay)) {\n        console.error('Material-UI: Argument \"delay\" must be a number or a string.');\n      }\n\n      if (Object.keys(other).length !== 0) {\n        console.error(\"Material-UI: Unrecognized argument(s) [\".concat(Object.keys(other).join(','), \"].\"));\n      }\n    }\n\n    return (Array.isArray(props) ? props : [props]).map(function (animatedProp) {\n      return \"\".concat(animatedProp, \" \").concat(typeof durationOption === 'string' ? durationOption : formatMs(durationOption), \" \").concat(easingOption, \" \").concat(typeof delay === 'string' ? delay : formatMs(delay));\n    }).join(',');\n  },\n  getAutoHeightDuration: function getAutoHeightDuration(height) {\n    if (!height) {\n      return 0;\n    }\n\n    var constant = height / 36; // https://www.wolframalpha.com/input/?i=(4+%2B+15+*+(x+%2F+36+)+**+0.25+%2B+(x+%2F+36)+%2F+5)+*+10\n\n    return Math.round((4 + 15 * Math.pow(constant, 0.25) + constant / 5) * 10);\n  }\n};","// We need to centralize the zIndex definitions as they work\n// like global values in the browser.\nvar zIndex = {\n  mobileStepper: 1000,\n  speedDial: 1050,\n  appBar: 1100,\n  drawer: 1200,\n  modal: 1300,\n  snackbar: 1400,\n  tooltip: 1500\n};\nexport default zIndex;","export default {\n  typography: {\n    fontSize: 14,\n    htmlFontSize: 16,\n    fontWeightLight: 300,\n    fontWeightRegular: 400,\n    fontWeightMedium: 600,\n    fontFamily: ['\"Source Sans Pro\"', '\"Segoe UI\"', '\"Helvetica Neue\"', '-apple-system', 'Arial', 'sans-serif'].join(\n      ','\n    ),\n    button: {\n      textTransform: 'initial',\n      fontWeight: 400,\n    },\n  },\n  shape: {\n    borderRadius: 2,\n  },\n  shadows: [\n    'none',\n    '0px 1px 2px 0px rgba(0,0,0,0.15)',\n    '0px 1px 2px 0px rgba(0,0,0,0.15)',\n    '0px 1px 2px 0px rgba(0,0,0,0.15)',\n    '0px 1px 2px 0px rgba(0,0,0,0.15)',\n    '0px 1px 2px 0px rgba(0,0,0,0.15)',\n    '0px 1px 2px 0px rgba(0,0,0,0.15)',\n\n    '0px 2px 4px 0px rgba(0,0,0,0.15)',\n    '0px 2px 4px 0px rgba(0,0,0,0.15)',\n    '0px 2px 4px 0px rgba(0,0,0,0.15)',\n    '0px 2px 4px 0px rgba(0,0,0,0.15)',\n    '0px 2px 4px 0px rgba(0,0,0,0.15)',\n    '0px 2px 4px 0px rgba(0,0,0,0.15)',\n\n    '0px 4px 10px 0px rgba(0,0,0,0.15)',\n    '0px 4px 10px 0px rgba(0,0,0,0.15)',\n    '0px 4px 10px 0px rgba(0,0,0,0.15)',\n    '0px 4px 10px 0px rgba(0,0,0,0.15)',\n    '0px 4px 10px 0px rgba(0,0,0,0.15)',\n    '0px 4px 10px 0px rgba(0,0,0,0.15)',\n\n    '0px 6px 20px 0px rgba(0,0,0,0.15)',\n    '0px 6px 20px 0px rgba(0,0,0,0.15)',\n    '0px 6px 20px 0px rgba(0,0,0,0.15)',\n    '0px 6px 20px 0px rgba(0,0,0,0.15)',\n    '0px 6px 20px 0px rgba(0,0,0,0.15)',\n    '0px 6px 20px 0px rgba(0,0,0,0.15)',\n  ],\n  props: {\n    MuiButtonBase: {\n      disableRipple: true,\n      disableTouchRipple: true,\n      focusRipple: false,\n    },\n  },\n};\n","const colors = {\n  green: '#009845',\n  greenPale: '#0AAF54',\n  red: '#DC423F',\n  redPale: '#F05551',\n  blue: '#3F8AB3',\n  bluePale: '#469DCD',\n\n  // greyscale\n  grey100: '#ffffff',\n  grey98: '#FBFBFB',\n  grey95: '#F2F2F2',\n  grey90: '#E6E6E6',\n  grey85: '#D9D9D9',\n\n  grey55: '#8C8C8C',\n\n  grey30: '#4D4D4D',\n  grey25: '#404040',\n  grey20: '#333333',\n  grey15: '#262626',\n  grey10: '#1A1A1A',\n  grey5: '#0E0E0E',\n  grey0: '#000000',\n};\n\nexport default colors;\n","import colors from './colors';\n\nconst light = {\n  type: 'light',\n  palette: {\n    primary: {\n      main: colors.grey25,\n      contrastText: colors.grey100,\n    },\n    secondary: {\n      light: '#0AAF54',\n      main: '#009845',\n      dark: '#006937',\n    },\n    text: {\n      primary: colors.grey25,\n      secondary: 'rgba(0, 0, 0, 0.55)',\n      disabled: 'rgba(0, 0, 0, 0.3)',\n    },\n    action: {\n      active: colors.grey25, // color for actionable things like icon buttons\n      hover: 'rgba(0, 0, 0, 0.03)', // color for hoverable things like list items\n      hoverOpacity: 0.08, // used to fade primary/secondary colors\n      selected: 'rgba(0, 0, 0, 0.05)', // focused things like list items\n      disabled: 'rgba(0, 0, 0, 0.3)', // usually text\n      disabledBackground: 'rgba(0, 0, 0, 0.12)',\n    },\n    background: {\n      paper: colors.grey100,\n      default: colors.grey100,\n      // -- custom properties --\n      lightest: colors.grey100,\n      lighter: colors.grey98,\n      darker: colors.grey95,\n      darkest: colors.grey90,\n    },\n    // --- custom stuff ---\n    custom: {\n      focusBorder: colors.blue,\n      focusOutline: 'rgba(70, 157, 205, 0.3)',\n      inputBackground: 'rgba(255, 255, 255, 1)',\n    },\n    selected: {\n      main: colors.green,\n      alternative: '#E4E4E4',\n      excluded: '#BEBEBE',\n      mainContrastText: colors.grey100,\n      alternativeContrastText: colors.grey25,\n      excludedContrastText: colors.grey25,\n    },\n    btn: {\n      normal: 'rgba(255, 255, 255, 0.6)',\n      hover: 'rgba(0, 0, 0, 0.03)',\n      active: 'rgba(0, 0, 0, 0.1)',\n      disabled: 'rgba(255, 255, 255, 0.6)',\n      border: 'rgba(0, 0, 0, 0.15)',\n      borderHover: 'rgba(0, 0, 0, 0.15)',\n    },\n  },\n};\n\nexport default light;\n","import colors from './colors';\n\nconst dark = {\n  type: 'dark',\n  palette: {\n    primary: {\n      main: colors.grey20,\n      contrastText: colors.grey100,\n    },\n    secondary: {\n      light: '#0AAF54',\n      main: '#009845',\n      dark: '#006937',\n    },\n    text: {\n      primary: colors.grey100,\n      secondary: 'rgba(255, 255, 255, 0.6)',\n      disabled: 'rgba(255, 255, 255, 0.3)',\n    },\n    action: {\n      // active: 'rgba(0, 0, 0, 0.55)',\n      active: colors.grey100,\n      hover: 'rgba(255, 255, 255, 0.05)',\n      hoverOpacity: 0.08,\n      selected: 'rgba(0, 0, 0, 0.03)',\n      disabled: 'rgba(255, 255, 255, 0.3)',\n      disabledBackground: 'rgba(0, 0, 0, 0.12)',\n    },\n    divider: 'rgba(0,0,0,0.3)',\n    background: {\n      default: '#323232',\n      paper: '#323232',\n      // -- custom properties --\n      lightest: colors.grey25,\n      lighter: colors.grey20,\n      darker: colors.grey15,\n      darkest: colors.grey10,\n    },\n    // -- custom --\n    custom: {\n      focusBorder: colors.blue,\n      focusOutline: 'rgba(70, 157, 205, 0.3)',\n      inputBackground: 'rgba(0, 0, 0, 0.2)',\n    },\n    selected: {\n      main: colors.green,\n      alternative: colors.grey20,\n      excluded: colors.grey10,\n      mainContrastText: colors.grey100,\n      alternativeContrastText: colors.grey100,\n      excludedContrastText: colors.grey100,\n    },\n    btn: {\n      normal: 'rgba(255, 255, 255, 0.15)',\n      hover: 'rgba(255, 255, 255, 0.25)',\n      active: 'rgba(0, 0, 0, 0.6)',\n      disabled: 'rgba(255, 255, 255, 0.15)',\n      border: 'rgba(0, 0, 0, 0.15)',\n      borderHover: 'rgba(0, 0, 0, 0.30)',\n    },\n  },\n};\n\nexport default dark;\n","import { createMuiTheme } from '@material-ui/core/styles';\n\nimport base from './definitions/base';\nimport light from './definitions/light';\nimport dark from './definitions/dark';\n\nconst cache = {};\n\nconst overrides = (theme) => ({\n  MuiTypography: {\n    root: {\n      color: theme.palette.text.primary,\n    },\n  },\n  MuiIconButton: {\n    root: {\n      padding: 7,\n      borderRadius: 2,\n      border: '1px solid transparent',\n      // should ideally use $focusVisible, but that messes up focus in all other places where Iconbutton is used (Checkbox, Switch etc)\n      '&:focus': {\n        borderColor: theme.palette.custom.focusBorder,\n        boxShadow: `0 0 0 2px ${theme.palette.custom.focusOutline}`,\n      },\n    },\n  },\n  MuiOutlinedInput: {\n    root: {\n      backgroundColor: theme.palette.custom.inputBackground,\n      '&:hover $notchedOutline': {\n        borderColor: theme.palette.btn.border,\n      },\n      '&$focused $notchedOutline': {\n        borderColor: theme.palette.custom.focusBorder,\n        borderWidth: 2,\n      },\n    },\n  },\n  MuiButton: {\n    outlined: {\n      padding: '3px 11px',\n      '&$focusVisible': {\n        borderColor: theme.palette.custom.focusBorder,\n        boxShadow: `0 0 0 2px ${theme.palette.custom.focusOutline}`,\n      },\n    },\n    contained: {\n      color: theme.palette.text.primary,\n      padding: '3px 11px',\n      border: `1px solid ${theme.palette.btn.border}`,\n      backgroundColor: theme.palette.btn.normal,\n      boxShadow: 'none',\n      '&$focusVisible': {\n        borderColor: theme.palette.custom.focusBorder,\n        boxShadow: `0 0 0 2px ${theme.palette.custom.focusOutline}`,\n      },\n      '&:hover': {\n        backgroundColor: theme.palette.btn.hover,\n        borderColor: theme.palette.btn.borderHover,\n        boxShadow: 'none',\n        '&$disabled': {\n          backgroundColor: theme.palette.btn.disabled,\n        },\n      },\n      '&:active': {\n        boxShadow: 'none',\n        backgroundColor: theme.palette.btn.active,\n      },\n      '&$disabled': {\n        backgroundColor: theme.palette.btn.disabled,\n      },\n    },\n  },\n  MuiExpansionPanelSummary: {\n    content: {\n      margin: '8px 0',\n    },\n  },\n});\n\nexport default function create(definition) {\n  let def = light;\n  let name = '';\n  if (typeof definition === 'string') {\n    name = definition;\n    if (definition !== 'light' && definition !== 'dark') {\n      console.warn(`Invalid theme: '${definition}'`);\n    } else if (definition === 'dark') {\n      def = dark;\n    }\n  }\n\n  const key = JSON.stringify(def);\n  if (cache[key]) {\n    return cache[key];\n  }\n\n  const withDefaults = {\n    palette: {\n      type: def.type,\n      ...base.palette,\n      ...def.palette,\n    },\n    typography: {\n      ...base.typography,\n    },\n    shadows: base.shadows,\n    props: {\n      ...base.props,\n    },\n    shape: {\n      ...base.shape,\n    },\n  };\n\n  cache[key] = createMuiTheme({\n    ...withDefaults,\n    overrides: overrides(withDefaults),\n  });\n\n  cache[key].name = name;\n\n  return cache[key];\n}\n","import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport { deepmerge } from '@material-ui/utils';\nimport createBreakpoints from './createBreakpoints';\nimport createMixins from './createMixins';\nimport createPalette from './createPalette';\nimport createTypography from './createTypography';\nimport shadows from './shadows';\nimport shape from './shape';\nimport createSpacing from './createSpacing';\nimport transitions from './transitions';\nimport zIndex from './zIndex';\n\nfunction createMuiTheme() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  var _options$breakpoints = options.breakpoints,\n      breakpointsInput = _options$breakpoints === void 0 ? {} : _options$breakpoints,\n      _options$mixins = options.mixins,\n      mixinsInput = _options$mixins === void 0 ? {} : _options$mixins,\n      _options$palette = options.palette,\n      paletteInput = _options$palette === void 0 ? {} : _options$palette,\n      spacingInput = options.spacing,\n      _options$typography = options.typography,\n      typographyInput = _options$typography === void 0 ? {} : _options$typography,\n      other = _objectWithoutProperties(options, [\"breakpoints\", \"mixins\", \"palette\", \"spacing\", \"typography\"]);\n\n  var palette = createPalette(paletteInput);\n  var breakpoints = createBreakpoints(breakpointsInput);\n  var spacing = createSpacing(spacingInput);\n  var muiTheme = deepmerge({\n    breakpoints: breakpoints,\n    direction: 'ltr',\n    mixins: createMixins(breakpoints, spacing, mixinsInput),\n    overrides: {},\n    // Inject custom styles\n    palette: palette,\n    props: {},\n    // Provide default props\n    shadows: shadows,\n    typography: createTypography(palette, typographyInput),\n    spacing: spacing,\n    shape: shape,\n    transitions: transitions,\n    zIndex: zIndex\n  }, other);\n\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  muiTheme = args.reduce(function (acc, argument) {\n    return deepmerge(acc, argument);\n  }, muiTheme);\n\n  if (process.env.NODE_ENV !== 'production') {\n    var pseudoClasses = ['checked', 'disabled', 'error', 'focused', 'focusVisible', 'required', 'expanded', 'selected'];\n\n    var traverse = function traverse(node, parentKey) {\n      var depth = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n      var key; // eslint-disable-next-line guard-for-in, no-restricted-syntax\n\n      for (key in node) {\n        var child = node[key];\n\n        if (depth === 1) {\n          if (key.indexOf('Mui') === 0 && child) {\n            traverse(child, key, depth + 1);\n          }\n        } else if (pseudoClasses.indexOf(key) !== -1 && Object.keys(child).length > 0) {\n          if (process.env.NODE_ENV !== 'production') {\n            console.error([\"Material-UI: The `\".concat(parentKey, \"` component increases \") + \"the CSS specificity of the `\".concat(key, \"` internal state.\"), 'You can not override it like this: ', JSON.stringify(node, null, 2), '', 'Instead, you need to use the $ruleName syntax:', JSON.stringify({\n              root: _defineProperty({}, \"&$\".concat(key), child)\n            }, null, 2), '', 'https://material-ui.com/r/pseudo-classes-guide'].join('\\n'));\n          } // Remove the style to prevent global conflicts.\n\n\n          node[key] = {};\n        }\n      }\n    };\n\n    traverse(muiTheme.overrides);\n  }\n\n  return muiTheme;\n}\n\nexport default createMuiTheme;","import React from 'react';\n\nexport default React.createContext({\n  language: null,\n  theme: null,\n  translator: null,\n  constraints: {},\n});\n","import { useState, useEffect } from 'react';\n\nexport default (initialState = {}, applyMiddleware = () => {}) => {\n  const sharedState = initialState;\n  const hookListeners = [];\n\n  const store = {\n    get: (key) => sharedState[key],\n    set: (key, value) => {\n      if (typeof key === 'undefined' || typeof key === 'object') {\n        throw new Error(`Invalid key: ${JSON.stringify(key)}`);\n      }\n      sharedState[key] = value;\n      applyMiddleware({ type: 'SET', value });\n      return value;\n    },\n    clear: (key) => {\n      if (typeof key === 'undefined' || typeof key === 'object') {\n        throw new Error(`Invalid key: ${JSON.stringify(key)}`);\n      }\n      sharedState[key] = null;\n    },\n    dispatch: (forceNewState) => {\n      hookListeners.forEach((listener) => listener(forceNewState ? {} : sharedState));\n    },\n  };\n\n  const useKeyStore = () => {\n    const [, setState] = useState(sharedState);\n\n    useEffect(() => {\n      hookListeners.push(setState);\n      return () => {\n        const ix = hookListeners.indexOf(setState);\n        hookListeners.splice(ix, 1);\n      };\n    }, [setState]);\n\n    return [store];\n  };\n\n  return [useKeyStore, store];\n};\n","import createKeyStore from './create-key-store';\n\nconst [useRpcResultStore, rpcResultStore] = createKeyStore({});\nconst [useRpcRequestStore, rpcRequestStore] = createKeyStore({});\nconst [useRpcRequestSessionModelStore, rpcRequestSessionModelStore] = createKeyStore({});\nconst [useRpcRequestModelStore, rpcRequestModelStore] = createKeyStore({});\n\nconst [useModelChangedStore, modelChangedStore] = createKeyStore({});\nconst [, modelInitializedStore] = createKeyStore({});\n\nconst modelStoreMiddleware = ({ type, value: model }) => {\n  const initialized = modelInitializedStore.get(model.id);\n  modelInitializedStore.set(model.id, {});\n  const onChanged = () => {\n    rpcRequestStore.clear(model.id);\n    modelChangedStore.set(model.id, {});\n    modelChangedStore.dispatch(true); // Force new state to trigger hooks\n  };\n  const unsubscribe = () => {\n    model.removeListener('changed', onChanged);\n    rpcResultStore.clear(model.id);\n    rpcRequestStore.clear(model.id);\n    rpcRequestSessionModelStore.clear(model.id);\n    rpcRequestModelStore.clear(model.id);\n    modelChangedStore.clear(model.id);\n    modelInitializedStore.clear(model.id);\n  };\n  switch (type) {\n    case 'SET':\n      if (!initialized) {\n        model.on('changed', onChanged);\n        model.once('closed', () => {\n          unsubscribe();\n        });\n      }\n      break;\n    default:\n      break;\n  }\n  return unsubscribe;\n};\n\nconst [useModelStore, modelStore] = createKeyStore({}, modelStoreMiddleware);\n\nconst subscribe = (model) => {\n  const unsubscribe = modelStoreMiddleware({ type: 'SET', value: model });\n  return () => {\n    unsubscribe();\n    modelStore.clear(model.id);\n  };\n};\n\nexport {\n  subscribe,\n  useModelStore,\n  modelStore,\n  useModelChangedStore,\n  useRpcResultStore,\n  rpcResultStore,\n  useRpcRequestStore,\n  rpcRequestStore,\n  useRpcRequestModelStore,\n  rpcRequestModelStore,\n  useRpcRequestSessionModelStore,\n  rpcRequestSessionModelStore,\n  modelChangedStore,\n};\n","import { useReducer, useEffect } from 'react';\nimport { useModelChangedStore, useRpcResultStore, useRpcRequestStore } from '../stores/model-store';\n\n// eslint-disable-next-line no-unused-vars\nconst sleep = (delay) => {\n  return new Promise((resolve) => {\n    setTimeout(resolve, delay);\n  });\n};\n\nconst rpcReducer = (state, action) => {\n  const { rpcResultStore, key, method } = action;\n  let newState;\n  switch (action.type) {\n    case 'INVALID': {\n      newState = {\n        ...state,\n        valid: false,\n        invalid: true,\n        validating: true,\n        canCancel: true,\n        canRetry: false,\n        rpcRetry: false,\n      };\n      break;\n    }\n    case 'VALID': {\n      newState = {\n        result: {\n          ...action.result,\n        },\n        invalid: false,\n        valid: true,\n        validating: false,\n        canCancel: false,\n        canRetry: false,\n        rpcRetry: false,\n      };\n      break;\n    }\n    case 'CANCELLED': {\n      newState = {\n        ...state,\n        invalid: true,\n        valid: false,\n        validating: false,\n        canCancel: false,\n        canRetry: true,\n        rpcRetry: false,\n      };\n      break;\n    }\n    default:\n      throw new Error('Undefined action');\n  }\n  let sharedState = rpcResultStore.get(key);\n  if (!sharedState) {\n    sharedState = {};\n  }\n  sharedState[method] = newState;\n  rpcResultStore.set(key, sharedState);\n  return newState;\n};\n\nexport default function useRpc(model, method) {\n  const key = model ? `${model.id}` : null;\n  const [rpcResultStore] = useRpcResultStore();\n  const [state, dispatch] = useReducer(rpcReducer, key ? rpcResultStore.get(key) : null);\n  const [modelChangedStore] = useModelChangedStore();\n  const [rpcRequestStore] = useRpcRequestStore();\n\n  let rpcShared;\n\n  if (key) {\n    rpcShared = rpcRequestStore.get(key);\n    if (!rpcShared) {\n      rpcShared = {};\n      rpcRequestStore.set(key, rpcShared);\n    }\n  }\n\n  const call = async (skipRetry) => {\n    let cache = rpcShared[method];\n    if (!cache || (cache && cache.rpcRetry)) {\n      const rpc = model[method]();\n      cache = {\n        rpc,\n        rpcRetry: false,\n      };\n      rpcShared[method] = cache;\n\n      dispatch({\n        type: 'INVALID',\n        method,\n        key,\n        model,\n        rpcResultStore,\n        canCancel: true,\n      });\n    }\n\n    try {\n      // await sleep(5000);\n      const result = await cache.rpc;\n      dispatch({ type: 'VALID', result, key, method, model, rpcResultStore });\n    } catch (err) {\n      if (err.code === 15 && !skipRetry) {\n        // Request aborted. This will be called multiple times by hooks only retry once\n        if (!cache.rpcRetry) {\n          cache.rpcRetry = true;\n        }\n        call(true);\n      }\n    }\n  };\n  const longrunning = {\n    cancel: async () => {\n      const global = model.session.getObjectApi({ handle: -1 });\n      await global.cancelRequest(rpcShared[method].rpc.requestId);\n      dispatch({\n        type: 'CANCELLED',\n        key,\n        method,\n        model,\n        rpcResultStore,\n      });\n    },\n    retry: () => {\n      rpcShared[method].rpcRetry = true;\n      call();\n    },\n  };\n\n  useEffect(() => {\n    if (!model) return undefined;\n\n    call();\n\n    return undefined;\n  }, [model, modelChangedStore.get(model && model.id), key, method]);\n\n  return [\n    // Result\n    state && state.result,\n    { validating: state && state.validating, canCancel: state && state.canCancel, canRetry: state && state.canRetry },\n    // Long running api e.g cancel retry\n    longrunning,\n  ];\n}\n","import useRpc from './useRpc';\n\nexport default function useLayout(model) {\n  return useRpc(model, 'getLayout');\n}\n\nexport function useAppLayout(model) {\n  return useRpc(model, 'getAppLayout');\n}\n","import { useEffect, useState } from 'react';\nimport { useModelStore, useRpcRequestSessionModelStore } from '../stores/model-store';\n\nexport default function useSessionModel(definition, app, ...deps) {\n  const key = app ? `${app.id}/${JSON.stringify(definition)}` : null;\n  const [modelStore] = useModelStore();\n  const [rpcRequestSessionModelStore] = useRpcRequestSessionModelStore();\n  const [model, setModel] = useState();\n\n  let rpcShared;\n\n  if (key) {\n    rpcShared = rpcRequestSessionModelStore.get(key);\n  }\n\n  useEffect(() => {\n    if (!app) {\n      return;\n    }\n    // Create new session object\n    const create = async () => {\n      if (!rpcShared) {\n        const rpc = app.createSessionObject(definition);\n        rpcShared = rpc;\n        rpcRequestSessionModelStore.set(key, rpcShared);\n      }\n      const newModel = await rpcShared;\n      modelStore.set(key, newModel);\n      setModel(newModel);\n    };\n    create();\n  }, [app, ...deps]);\n\n  return [model];\n}\n","import useSessionModel from './useSessionModel';\n\nconst definition = {\n  qInfo: {\n    qType: 'current-selections',\n  },\n  qSelectionObjectDef: {\n    qStateName: '$',\n  },\n  alternateStates: [],\n};\n\nexport default function useCurrentSelectionsModel(app) {\n  return useSessionModel(definition, app);\n}\n","import { useState, useEffect } from 'react';\nimport useLayout, { useAppLayout } from './useLayout';\nimport useCurrentSelectionsModel from './useCurrentSelectionsModel';\n\nconst patchAlternateState = (currentSelectionsModel, currentSelectionsLayout, appLayout) => {\n  const states = [...(appLayout.qStateNames || [])].map((s) => ({\n    stateName: s, // need this as reference in selection toolbar since qSelectionObject.qStateName is not in the layout\n    qSelectionObjectDef: {\n      qStateName: s,\n    },\n  }));\n  const existingStates = (currentSelectionsLayout && currentSelectionsLayout.alternateStates\n    ? currentSelectionsLayout.alternateStates.map((s) => s.stateName)\n    : []\n  ).join('::');\n  const newStates = (appLayout.qStateNames || []).map((s) => s).join('::');\n  if (existingStates !== newStates) {\n    currentSelectionsModel.applyPatches(\n      [\n        {\n          qOp: 'replace',\n          qPath: '/alternateStates',\n          qValue: JSON.stringify(states),\n        },\n      ],\n      true\n    );\n  }\n};\n\nexport default function useAppSelectionsNavigation(app) {\n  const [currentSelectionsModel] = useCurrentSelectionsModel(app);\n  const [currentSelectionsLayout] = useLayout(currentSelectionsModel);\n  const [appLayout] = useAppLayout(app);\n  const [navigationState, setNavigationState] = useState(null);\n\n  useEffect(() => {\n    if (!appLayout || !currentSelectionsModel || !currentSelectionsLayout) return;\n    patchAlternateState(currentSelectionsModel, currentSelectionsLayout, appLayout);\n  }, [appLayout, currentSelectionsModel, currentSelectionsLayout]);\n\n  useEffect(() => {\n    if (!currentSelectionsLayout) return;\n    let canGoBack = false;\n    let canGoForward = false;\n    let canClear = false;\n    [currentSelectionsLayout, ...(currentSelectionsLayout.alternateStates || [])].forEach((state) => {\n      canGoBack = canGoBack || (state.qSelectionObject && state.qSelectionObject.qBackCount > 0);\n      canGoForward = canGoForward || (state.qSelectionObject && state.qSelectionObject.qForwardCount > 0);\n      canClear =\n        canClear ||\n        ((state.qSelectionObject && state.qSelectionObject.qSelections) || []).filter((s) => s.qLocked !== true)\n          .length > 0;\n    });\n    setNavigationState({\n      canGoBack,\n      canGoForward,\n      canClear,\n    });\n  }, [currentSelectionsLayout]);\n\n  return [navigationState, currentSelectionsModel, currentSelectionsLayout];\n}\n","import createKeyStore from './create-key-store';\n\nconst [useAppSelectionsStore, appSelectionsStore] = createKeyStore({});\nconst [useAppModalStore, appModalStore] = createKeyStore({});\nconst [useObjectSelectionsStore, objectSelectionsStore] = createKeyStore({});\nconst [useModalObjectStore, modalObjectStore] = createKeyStore({});\n\nexport {\n  useAppSelectionsStore,\n  useAppModalStore,\n  useObjectSelectionsStore,\n  appSelectionsStore,\n  appModalStore,\n  objectSelectionsStore,\n  useModalObjectStore,\n  modalObjectStore,\n};\n","/* eslint no-underscore-dangle: 0 */\nimport { useEffect } from 'react';\nimport useAppSelectionsNavigation from './useAppSelectionsNavigation';\nimport {\n  useAppSelectionsStore,\n  objectSelectionsStore,\n  modalObjectStore,\n  appModalStore,\n} from '../stores/selections-store';\n\nfunction createAppSelections({ app, currentSelectionsLayout, navState }) {\n  const key = `${app.id}`;\n\n  const end = async (accept = true) => {\n    const model = modalObjectStore.get(key);\n    if (model) {\n      await model.endSelections(accept);\n      modalObjectStore.clear(key);\n      const objectSelections = objectSelectionsStore.get(model.id);\n      objectSelections.emit('deactivated');\n    }\n  };\n\n  const begin = async (model, path, accept = true) => {\n    // Quick return if it's already in modal\n    if (model === modalObjectStore.get(key)) {\n      return;\n    }\n\n    // If other model is in modal state end it\n    end(accept);\n\n    // Pending modal\n    modalObjectStore.set(key, model);\n\n    const p = Array.isArray(path) ? path : [path];\n    const beginSelections = async (skipRetry) => {\n      try {\n        await model.beginSelections(p);\n        modalObjectStore.set(key, model); // We have a modal\n      } catch (err) {\n        if (err.code === 6003 && !skipRetry) {\n          await app.abortModal(accept);\n          beginSelections(true);\n        } else {\n          modalObjectStore.clear(key); // No modal\n        }\n      }\n    };\n    await beginSelections();\n  };\n\n  const appModal = {\n    begin,\n    end,\n  };\n\n  appModalStore.set(key, appModal);\n\n  /**\n   * @class\n   * @hideconstructor\n   * @alias AppSelections\n   */\n  const appSelections = {\n    model: app,\n    isInModal() {\n      return !!modalObjectStore.get(key);\n    },\n    isModal(object) {\n      // TODO check model state\n      return object ? modalObjectStore.get(key) === object : !!modalObjectStore.get(key);\n    },\n    canGoForward() {\n      return navState.canGoForward;\n    },\n    canGoBack() {\n      return navState.canGoBack;\n    },\n    canClear() {\n      return navState.canClear;\n    },\n    layout() {\n      return currentSelectionsLayout;\n    },\n    forward() {\n      return appModal.end().then(() => app.forward());\n    },\n    back() {\n      return appModal.end().then(() => app.back());\n    },\n    clear() {\n      return appModal.end().then(() => app.clearAll());\n    },\n    clearField(field, state = '$') {\n      return appModal.end().then(() => app.getField(field, state).then((f) => f.clear()));\n    },\n  };\n  return appSelections;\n}\nexport default function useAppSelections(app) {\n  if (!app.session) {\n    // assume the app is mocked if session is undefined\n    return [];\n  }\n  const [navState, currentSelectionsModel, currentSelectionsLayout] = useAppSelectionsNavigation(app);\n  const [appSelectionsStore] = useAppSelectionsStore();\n  const key = app ? app.id : null;\n  let appSelections = appSelectionsStore.get(key);\n\n  useEffect(() => {\n    if (!app || !currentSelectionsModel || !currentSelectionsLayout || !navState || appSelections) return;\n    appSelections = createAppSelections({ app, currentSelectionsLayout, navState });\n    appSelectionsStore.set(key, appSelections);\n    appSelectionsStore.dispatch(true);\n  }, [app, currentSelectionsModel, currentSelectionsLayout, navState]);\n\n  return [appSelections, navState];\n}\n","import React, { useState, useMemo, forwardRef, useImperativeHandle } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { createTheme, ThemeProvider, StylesProvider, createGenerateClassName } from '@nebula.js/ui/theme';\n\nimport InstanceContext from '../contexts/InstanceContext';\nimport useAppSelections from '../hooks/useAppSelections';\n\nconst NEBULA_VERSION_HASH = process.env.NEBULA_VERSION_HASH || '';\n\nlet counter = 0;\n\nconst NebulaApp = forwardRef(({ initialContext, app }, ref) => {\n  const [appSelections] = useAppSelections(app);\n  const [context, setContext] = useState(initialContext);\n  const [muiThemeName, setMuiThemeName] = useState();\n\n  const { theme, generator } = useMemo(\n    () => ({\n      theme: createTheme(muiThemeName),\n      generator: createGenerateClassName({\n        productionPrefix: `${NEBULA_VERSION_HASH}`,\n        disableGlobal: true,\n        seed: `njs-${counter++}`,\n      }),\n    }),\n    [muiThemeName]\n  );\n\n  const [components, setComponents] = useState([]);\n\n  useImperativeHandle(ref, () => ({\n    addComponent(component) {\n      setComponents([...components, component]);\n    },\n    removeComponent(component) {\n      const ix = components.indexOf(component);\n      if (ix !== -1) {\n        components.splice(ix, 1);\n        setComponents([...components]);\n      }\n    },\n    setMuiThemeName,\n    setContext,\n    getAppSelections: () => appSelections,\n  }));\n\n  return (\n    <StylesProvider generateClassName={generator}>\n      <ThemeProvider theme={theme}>\n        <InstanceContext.Provider value={context}>\n          <>{components}</>\n        </InstanceContext.Provider>\n      </ThemeProvider>\n    </StylesProvider>\n  );\n});\n\nexport { NebulaApp };\n\nexport default function boot({ app, context }) {\n  let resolveRender;\n  const rendered = new Promise((resolve) => {\n    resolveRender = resolve;\n  });\n  const appRef = React.createRef();\n  const element = document.createElement('div');\n  element.style.display = 'none';\n  element.setAttribute('data-nebulajs-version', process.env.NEBULA_VERSION || '');\n  element.setAttribute('data-app-id', app.id);\n  document.body.appendChild(element);\n\n  ReactDOM.render(<NebulaApp ref={appRef} app={app} initialContext={context} />, element, resolveRender);\n\n  return [\n    {\n      add(component) {\n        (async () => {\n          await rendered;\n          appRef.current.addComponent(component);\n        })();\n      },\n      remove(component) {\n        (async () => {\n          await rendered;\n          appRef.current.removeComponent(component);\n        })();\n      },\n      setMuiThemeName(themeName) {\n        (async () => {\n          await rendered;\n          appRef.current.setMuiThemeName(themeName);\n        })();\n      },\n      context(ctx) {\n        (async () => {\n          await rendered;\n          appRef.current.setContext(ctx);\n        })();\n      },\n      getAppSelections: async () => {\n        await rendered;\n        return appRef.current.getAppSelections();\n      },\n    },\n    appRef,\n    rendered,\n  ];\n}\n","import { useState, useCallback, useLayoutEffect } from 'react';\n\nexport default function useRect() {\n  const [node, setNode] = useState();\n  const [rect, setRect] = useState();\n  const callbackRef = useCallback((ref) => {\n    if (!ref) {\n      return;\n    }\n    setNode(ref);\n  }, []);\n  const handleResize = () => {\n    const { left, top, width, height } = node.getBoundingClientRect();\n    setRect({ left, top, width, height });\n  };\n  useLayoutEffect(() => {\n    if (!node) {\n      return undefined;\n    }\n    if (typeof ResizeObserver === 'function') {\n      let resizeObserver = new ResizeObserver(handleResize);\n      resizeObserver.observe(node);\n      return () => {\n        resizeObserver.unobserve(node);\n        resizeObserver.disconnect(node);\n        resizeObserver = null;\n      };\n    }\n\n    handleResize();\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, [node]);\n  return [callbackRef, rect, node];\n}\n","/* eslint-disable react/jsx-props-no-spreading */\nimport React from 'react';\n\nfunction getFontSize(size) {\n  if (size === 'large') {\n    return '20px';\n  }\n  if (size === 'small') {\n    return '12px';\n  }\n  return '16px';\n}\n\nexport default function SvgIcon({ size, style = {}, viewBox = '0 0 16 16', shapes = [] }) {\n  const s = {\n    fontSize: getFontSize(size),\n    display: 'inline-block',\n    fontStyle: 'normal',\n    lineHeight: '0',\n    textAlign: 'center',\n    textTransform: 'none',\n    verticalAlign: '-.125em',\n    textRendering: 'optimizeLegibility',\n    WebkitFontSmoothing: 'antialiased',\n    MozOsxFontSmoothing: 'grayscale',\n    ...style,\n  };\n  return (\n    <i style={s}>\n      <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"1em\" height=\"1em\" viewBox={viewBox} fill=\"currentColor\">\n        {shapes.map(({ type: Type, attrs }, ix) => (\n          // eslint-disable-next-line react/no-array-index-key\n          <Type key={ix} {...attrs} />\n        ))}\n      </svg>\n    </i>\n  );\n}\n","import SvgIcon from './SvgIcon';\n\nconst remove = (props) => ({\n  ...props,\n  shapes: [\n    {\n      type: 'path',\n      attrs: {\n        d:\n          'M9.41421356,8 L11.8890873,5.52512627 C12.065864,5.34834957 12.0305087,4.95944084 11.8183766,4.74730881 L11.2526912,4.18162338 C11.0405592,3.96949135 10.6516504,3.93413601 10.4748737,4.1109127 L8,6.58578644 L5.52512627,4.1109127 C5.34834957,3.93413601 4.95944084,3.96949135 4.74730881,4.18162338 L4.25233406,4.67659813 C3.96949135,4.95944084 3.93413601,5.34834957 4.1109127,5.52512627 L6.58578644,8 L4.1109127,10.4748737 C3.93413601,10.6516504 3.96949135,11.0405592 4.18162338,11.2526912 L4.67659813,11.7476659 C4.95944084,12.0305087 5.34834957,12.065864 5.52512627,11.8890873 L8,9.41421356 L10.4748737,11.8890873 C10.6516504,12.065864 11.0405592,12.0305087 11.2526912,11.8183766 L11.8183766,11.2526912 C12.0305087,11.0405592 12.065864,10.6516504 11.8890873,10.4748737 L9.41421356,8 Z M8,0 C12.4,0 16,3.6 16,8 C16,12.4 12.4,16 8,16 C3.6,16 0,12.4 0,8 C0,3.6 3.6,0 8,0 Z',\n      },\n    },\n  ],\n});\nexport default (props) => SvgIcon(remove(props));\nexport { remove };\n","import SvgIcon from './SvgIcon';\n\nconst lock = (props) => ({\n  ...props,\n  shapes: [\n    {\n      type: 'path',\n      attrs: {\n        d:\n          'M13,7 L8,7 L13,7 L13,4.98151367 C13,2.23029964 10.7614237,0 8,0 C5.23857625,0 3,2.23029964 3,4.98151367 L3,7 L3.75,7 L3,7 L4.5,7 L4.5,5.33193359 C4.5,3.21561511 5.54860291,1.5 8,1.5 C10.4513971,1.5 11.5,3.21561511 11.5,5.33193359 L11.5,7 L12.25,7 L3,7 C2.44771525,7 2,7.44771525 2,8 L2,15 C2,15.5522847 2.44771525,16 3,16 L13,16 C13.5522847,16 14,15.5522847 14,15 L14,8 C14,7.44771525 13.5522847,7 13,7 L3,7 L13,7 Z',\n      },\n    },\n  ],\n});\nexport default (props) => SvgIcon(lock(props));\nexport { lock };\n","import SvgIcon from './SvgIcon';\n\nconst unlock = (props) => ({\n  ...props,\n  shapes: [\n    {\n      type: 'path',\n      attrs: {\n        d:\n          'M2.5,7 L11,7 C11.5522847,7 12,7.44771525 12,8 L12,15 C12,15.5522847 11.5522847,16 11,16 L1,16 C0.44771525,16 0,15.5522847 0,15 L0,8 C0,7.44771525 0.44771525,7 1,7 L1,4.98151367 C1,2.23029964 3.23857625,0 6,0 C8.4241995,0 10.4454541,1.71883353 10.9029715,4 L9.34209114,4 C8.9671727,2.54028848 7.9088888,1.5 6,1.5 C3.54860291,1.5 2.5,3.21561511 2.5,5.33193359 L2.5,7 Z',\n      },\n    },\n  ],\n});\nexport default (props) => SvgIcon(unlock(props));\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","function areInputsEqual(newInputs, lastInputs) {\n  if (newInputs.length !== lastInputs.length) {\n    return false;\n  }\n\n  for (var i = 0; i < newInputs.length; i++) {\n    if (newInputs[i] !== lastInputs[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction index (resultFn, isEqual) {\n  if (isEqual === void 0) {\n    isEqual = areInputsEqual;\n  }\n\n  var lastThis;\n  var lastArgs = [];\n  var lastResult;\n  var calledOnce = false;\n\n  var result = function result() {\n    for (var _len = arguments.length, newArgs = new Array(_len), _key = 0; _key < _len; _key++) {\n      newArgs[_key] = arguments[_key];\n    }\n\n    if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {\n      return lastResult;\n    }\n\n    lastResult = resultFn.apply(this, newArgs);\n    calledOnce = true;\n    lastThis = this;\n    lastArgs = newArgs;\n    return lastResult;\n  };\n\n  return result;\n}\n\nexport default index;\n","import _extends from '@babel/runtime/helpers/esm/extends';\nimport _inheritsLoose from '@babel/runtime/helpers/esm/inheritsLoose';\nimport _assertThisInitialized from '@babel/runtime/helpers/esm/assertThisInitialized';\nimport memoizeOne from 'memoize-one';\nimport { createElement, PureComponent } from 'react';\nimport _objectWithoutPropertiesLoose from '@babel/runtime/helpers/esm/objectWithoutPropertiesLoose';\n\n// Animation frame based implementation of setTimeout.\n// Inspired by Joe Lambert, https://gist.github.com/joelambert/1002116#file-requesttimeout-js\nvar hasNativePerformanceNow = typeof performance === 'object' && typeof performance.now === 'function';\nvar now = hasNativePerformanceNow ? function () {\n  return performance.now();\n} : function () {\n  return Date.now();\n};\nfunction cancelTimeout(timeoutID) {\n  cancelAnimationFrame(timeoutID.id);\n}\nfunction requestTimeout(callback, delay) {\n  var start = now();\n\n  function tick() {\n    if (now() - start >= delay) {\n      callback.call(null);\n    } else {\n      timeoutID.id = requestAnimationFrame(tick);\n    }\n  }\n\n  var timeoutID = {\n    id: requestAnimationFrame(tick)\n  };\n  return timeoutID;\n}\n\nvar size = -1; // This utility copied from \"dom-helpers\" package.\n\nfunction getScrollbarSize(recalculate) {\n  if (recalculate === void 0) {\n    recalculate = false;\n  }\n\n  if (size === -1 || recalculate) {\n    var div = document.createElement('div');\n    var style = div.style;\n    style.width = '50px';\n    style.height = '50px';\n    style.overflow = 'scroll';\n    document.body.appendChild(div);\n    size = div.offsetWidth - div.clientWidth;\n    document.body.removeChild(div);\n  }\n\n  return size;\n}\nvar cachedRTLResult = null; // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n// Chrome does not seem to adhere; its scrollLeft values are positive (measured relative to the left).\n// Safari's elastic bounce makes detecting this even more complicated wrt potential false positives.\n// The safest way to check this is to intentionally set a negative offset,\n// and then verify that the subsequent \"scroll\" event matches the negative offset.\n// If it does not match, then we can assume a non-standard RTL scroll implementation.\n\nfunction getRTLOffsetType(recalculate) {\n  if (recalculate === void 0) {\n    recalculate = false;\n  }\n\n  if (cachedRTLResult === null || recalculate) {\n    var outerDiv = document.createElement('div');\n    var outerStyle = outerDiv.style;\n    outerStyle.width = '50px';\n    outerStyle.height = '50px';\n    outerStyle.overflow = 'scroll';\n    outerStyle.direction = 'rtl';\n    var innerDiv = document.createElement('div');\n    var innerStyle = innerDiv.style;\n    innerStyle.width = '100px';\n    innerStyle.height = '100px';\n    outerDiv.appendChild(innerDiv);\n    document.body.appendChild(outerDiv);\n\n    if (outerDiv.scrollLeft > 0) {\n      cachedRTLResult = 'positive-descending';\n    } else {\n      outerDiv.scrollLeft = 1;\n\n      if (outerDiv.scrollLeft === 0) {\n        cachedRTLResult = 'negative';\n      } else {\n        cachedRTLResult = 'positive-ascending';\n      }\n    }\n\n    document.body.removeChild(outerDiv);\n    return cachedRTLResult;\n  }\n\n  return cachedRTLResult;\n}\n\nvar IS_SCROLLING_DEBOUNCE_INTERVAL = 150;\n\nvar defaultItemKey = function defaultItemKey(_ref) {\n  var columnIndex = _ref.columnIndex,\n      data = _ref.data,\n      rowIndex = _ref.rowIndex;\n  return rowIndex + \":\" + columnIndex;\n}; // In DEV mode, this Set helps us only log a warning once per component instance.\n// This avoids spamming the console every time a render happens.\n\n\nvar devWarningsOverscanCount = null;\nvar devWarningsOverscanRowsColumnsCount = null;\nvar devWarningsTagName = null;\n\nif (process.env.NODE_ENV !== 'production') {\n  if (typeof window !== 'undefined' && typeof window.WeakSet !== 'undefined') {\n    devWarningsOverscanCount =\n    /*#__PURE__*/\n    new WeakSet();\n    devWarningsOverscanRowsColumnsCount =\n    /*#__PURE__*/\n    new WeakSet();\n    devWarningsTagName =\n    /*#__PURE__*/\n    new WeakSet();\n  }\n}\n\nfunction createGridComponent(_ref2) {\n  var _class, _temp;\n\n  var getColumnOffset = _ref2.getColumnOffset,\n      getColumnStartIndexForOffset = _ref2.getColumnStartIndexForOffset,\n      getColumnStopIndexForStartIndex = _ref2.getColumnStopIndexForStartIndex,\n      getColumnWidth = _ref2.getColumnWidth,\n      getEstimatedTotalHeight = _ref2.getEstimatedTotalHeight,\n      getEstimatedTotalWidth = _ref2.getEstimatedTotalWidth,\n      getOffsetForColumnAndAlignment = _ref2.getOffsetForColumnAndAlignment,\n      getOffsetForRowAndAlignment = _ref2.getOffsetForRowAndAlignment,\n      getRowHeight = _ref2.getRowHeight,\n      getRowOffset = _ref2.getRowOffset,\n      getRowStartIndexForOffset = _ref2.getRowStartIndexForOffset,\n      getRowStopIndexForStartIndex = _ref2.getRowStopIndexForStartIndex,\n      initInstanceProps = _ref2.initInstanceProps,\n      shouldResetStyleCacheOnItemSizeChange = _ref2.shouldResetStyleCacheOnItemSizeChange,\n      validateProps = _ref2.validateProps;\n  return _temp = _class =\n  /*#__PURE__*/\n  function (_PureComponent) {\n    _inheritsLoose(Grid, _PureComponent);\n\n    // Always use explicit constructor for React components.\n    // It produces less code after transpilation. (#26)\n    // eslint-disable-next-line no-useless-constructor\n    function Grid(props) {\n      var _this;\n\n      _this = _PureComponent.call(this, props) || this;\n      _this._instanceProps = initInstanceProps(_this.props, _assertThisInitialized(_assertThisInitialized(_this)));\n      _this._resetIsScrollingTimeoutId = null;\n      _this._outerRef = void 0;\n      _this.state = {\n        instance: _assertThisInitialized(_assertThisInitialized(_this)),\n        isScrolling: false,\n        horizontalScrollDirection: 'forward',\n        scrollLeft: typeof _this.props.initialScrollLeft === 'number' ? _this.props.initialScrollLeft : 0,\n        scrollTop: typeof _this.props.initialScrollTop === 'number' ? _this.props.initialScrollTop : 0,\n        scrollUpdateWasRequested: false,\n        verticalScrollDirection: 'forward'\n      };\n      _this._callOnItemsRendered = void 0;\n      _this._callOnItemsRendered = memoizeOne(function (overscanColumnStartIndex, overscanColumnStopIndex, overscanRowStartIndex, overscanRowStopIndex, visibleColumnStartIndex, visibleColumnStopIndex, visibleRowStartIndex, visibleRowStopIndex) {\n        return _this.props.onItemsRendered({\n          overscanColumnStartIndex: overscanColumnStartIndex,\n          overscanColumnStopIndex: overscanColumnStopIndex,\n          overscanRowStartIndex: overscanRowStartIndex,\n          overscanRowStopIndex: overscanRowStopIndex,\n          visibleColumnStartIndex: visibleColumnStartIndex,\n          visibleColumnStopIndex: visibleColumnStopIndex,\n          visibleRowStartIndex: visibleRowStartIndex,\n          visibleRowStopIndex: visibleRowStopIndex\n        });\n      });\n      _this._callOnScroll = void 0;\n      _this._callOnScroll = memoizeOne(function (scrollLeft, scrollTop, horizontalScrollDirection, verticalScrollDirection, scrollUpdateWasRequested) {\n        return _this.props.onScroll({\n          horizontalScrollDirection: horizontalScrollDirection,\n          scrollLeft: scrollLeft,\n          scrollTop: scrollTop,\n          verticalScrollDirection: verticalScrollDirection,\n          scrollUpdateWasRequested: scrollUpdateWasRequested\n        });\n      });\n      _this._getItemStyle = void 0;\n\n      _this._getItemStyle = function (rowIndex, columnIndex) {\n        var _this$props = _this.props,\n            columnWidth = _this$props.columnWidth,\n            direction = _this$props.direction,\n            rowHeight = _this$props.rowHeight;\n\n        var itemStyleCache = _this._getItemStyleCache(shouldResetStyleCacheOnItemSizeChange && columnWidth, shouldResetStyleCacheOnItemSizeChange && direction, shouldResetStyleCacheOnItemSizeChange && rowHeight);\n\n        var key = rowIndex + \":\" + columnIndex;\n        var style;\n\n        if (itemStyleCache.hasOwnProperty(key)) {\n          style = itemStyleCache[key];\n        } else {\n          var _offset = getColumnOffset(_this.props, columnIndex, _this._instanceProps);\n\n          var isRtl = direction === 'rtl';\n          itemStyleCache[key] = style = {\n            position: 'absolute',\n            left: isRtl ? undefined : _offset,\n            right: isRtl ? _offset : undefined,\n            top: getRowOffset(_this.props, rowIndex, _this._instanceProps),\n            height: getRowHeight(_this.props, rowIndex, _this._instanceProps),\n            width: getColumnWidth(_this.props, columnIndex, _this._instanceProps)\n          };\n        }\n\n        return style;\n      };\n\n      _this._getItemStyleCache = void 0;\n      _this._getItemStyleCache = memoizeOne(function (_, __, ___) {\n        return {};\n      });\n\n      _this._onScroll = function (event) {\n        var _event$currentTarget = event.currentTarget,\n            clientHeight = _event$currentTarget.clientHeight,\n            clientWidth = _event$currentTarget.clientWidth,\n            scrollLeft = _event$currentTarget.scrollLeft,\n            scrollTop = _event$currentTarget.scrollTop,\n            scrollHeight = _event$currentTarget.scrollHeight,\n            scrollWidth = _event$currentTarget.scrollWidth;\n\n        _this.setState(function (prevState) {\n          if (prevState.scrollLeft === scrollLeft && prevState.scrollTop === scrollTop) {\n            // Scroll position may have been updated by cDM/cDU,\n            // In which case we don't need to trigger another render,\n            // And we don't want to update state.isScrolling.\n            return null;\n          }\n\n          var direction = _this.props.direction; // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n          // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n          // It's also easier for this component if we convert offsets to the same format as they would be in for ltr.\n          // So the simplest solution is to determine which browser behavior we're dealing with, and convert based on it.\n\n          var calculatedScrollLeft = scrollLeft;\n\n          if (direction === 'rtl') {\n            switch (getRTLOffsetType()) {\n              case 'negative':\n                calculatedScrollLeft = -scrollLeft;\n                break;\n\n              case 'positive-descending':\n                calculatedScrollLeft = scrollWidth - clientWidth - scrollLeft;\n                break;\n            }\n          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n\n\n          calculatedScrollLeft = Math.max(0, Math.min(calculatedScrollLeft, scrollWidth - clientWidth));\n          var calculatedScrollTop = Math.max(0, Math.min(scrollTop, scrollHeight - clientHeight));\n          return {\n            isScrolling: true,\n            horizontalScrollDirection: prevState.scrollLeft < scrollLeft ? 'forward' : 'backward',\n            scrollLeft: calculatedScrollLeft,\n            scrollTop: calculatedScrollTop,\n            verticalScrollDirection: prevState.scrollTop < scrollTop ? 'forward' : 'backward',\n            scrollUpdateWasRequested: false\n          };\n        }, _this._resetIsScrollingDebounced);\n      };\n\n      _this._outerRefSetter = function (ref) {\n        var outerRef = _this.props.outerRef;\n        _this._outerRef = ref;\n\n        if (typeof outerRef === 'function') {\n          outerRef(ref);\n        } else if (outerRef != null && typeof outerRef === 'object' && outerRef.hasOwnProperty('current')) {\n          outerRef.current = ref;\n        }\n      };\n\n      _this._resetIsScrollingDebounced = function () {\n        if (_this._resetIsScrollingTimeoutId !== null) {\n          cancelTimeout(_this._resetIsScrollingTimeoutId);\n        }\n\n        _this._resetIsScrollingTimeoutId = requestTimeout(_this._resetIsScrolling, IS_SCROLLING_DEBOUNCE_INTERVAL);\n      };\n\n      _this._resetIsScrolling = function () {\n        _this._resetIsScrollingTimeoutId = null;\n\n        _this.setState({\n          isScrolling: false\n        }, function () {\n          // Clear style cache after state update has been committed.\n          // This way we don't break pure sCU for items that don't use isScrolling param.\n          _this._getItemStyleCache(-1);\n        });\n      };\n\n      return _this;\n    }\n\n    Grid.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n      validateSharedProps(nextProps, prevState);\n      validateProps(nextProps);\n      return null;\n    };\n\n    var _proto = Grid.prototype;\n\n    _proto.scrollTo = function scrollTo(_ref3) {\n      var scrollLeft = _ref3.scrollLeft,\n          scrollTop = _ref3.scrollTop;\n\n      if (scrollLeft !== undefined) {\n        scrollLeft = Math.max(0, scrollLeft);\n      }\n\n      if (scrollTop !== undefined) {\n        scrollTop = Math.max(0, scrollTop);\n      }\n\n      this.setState(function (prevState) {\n        if (scrollLeft === undefined) {\n          scrollLeft = prevState.scrollLeft;\n        }\n\n        if (scrollTop === undefined) {\n          scrollTop = prevState.scrollTop;\n        }\n\n        if (prevState.scrollLeft === scrollLeft && prevState.scrollTop === scrollTop) {\n          return null;\n        }\n\n        return {\n          horizontalScrollDirection: prevState.scrollLeft < scrollLeft ? 'forward' : 'backward',\n          scrollLeft: scrollLeft,\n          scrollTop: scrollTop,\n          scrollUpdateWasRequested: true,\n          verticalScrollDirection: prevState.scrollTop < scrollTop ? 'forward' : 'backward'\n        };\n      }, this._resetIsScrollingDebounced);\n    };\n\n    _proto.scrollToItem = function scrollToItem(_ref4) {\n      var _ref4$align = _ref4.align,\n          align = _ref4$align === void 0 ? 'auto' : _ref4$align,\n          columnIndex = _ref4.columnIndex,\n          rowIndex = _ref4.rowIndex;\n      var _this$props2 = this.props,\n          columnCount = _this$props2.columnCount,\n          height = _this$props2.height,\n          rowCount = _this$props2.rowCount,\n          width = _this$props2.width;\n      var _this$state = this.state,\n          scrollLeft = _this$state.scrollLeft,\n          scrollTop = _this$state.scrollTop;\n      var scrollbarSize = getScrollbarSize();\n\n      if (columnIndex !== undefined) {\n        columnIndex = Math.max(0, Math.min(columnIndex, columnCount - 1));\n      }\n\n      if (rowIndex !== undefined) {\n        rowIndex = Math.max(0, Math.min(rowIndex, rowCount - 1));\n      }\n\n      var estimatedTotalHeight = getEstimatedTotalHeight(this.props, this._instanceProps);\n      var estimatedTotalWidth = getEstimatedTotalWidth(this.props, this._instanceProps); // The scrollbar size should be considered when scrolling an item into view,\n      // to ensure it's fully visible.\n      // But we only need to account for its size when it's actually visible.\n\n      var horizontalScrollbarSize = estimatedTotalWidth > width ? scrollbarSize : 0;\n      var verticalScrollbarSize = estimatedTotalHeight > height ? scrollbarSize : 0;\n      this.scrollTo({\n        scrollLeft: columnIndex !== undefined ? getOffsetForColumnAndAlignment(this.props, columnIndex, align, scrollLeft, this._instanceProps, verticalScrollbarSize) : scrollLeft,\n        scrollTop: rowIndex !== undefined ? getOffsetForRowAndAlignment(this.props, rowIndex, align, scrollTop, this._instanceProps, horizontalScrollbarSize) : scrollTop\n      });\n    };\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this$props3 = this.props,\n          initialScrollLeft = _this$props3.initialScrollLeft,\n          initialScrollTop = _this$props3.initialScrollTop;\n\n      if (this._outerRef != null) {\n        var outerRef = this._outerRef;\n\n        if (typeof initialScrollLeft === 'number') {\n          outerRef.scrollLeft = initialScrollLeft;\n        }\n\n        if (typeof initialScrollTop === 'number') {\n          outerRef.scrollTop = initialScrollTop;\n        }\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate() {\n      var direction = this.props.direction;\n      var _this$state2 = this.state,\n          scrollLeft = _this$state2.scrollLeft,\n          scrollTop = _this$state2.scrollTop,\n          scrollUpdateWasRequested = _this$state2.scrollUpdateWasRequested;\n\n      if (scrollUpdateWasRequested && this._outerRef != null) {\n        // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n        // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n        // So we need to determine which browser behavior we're dealing with, and mimic it.\n        var outerRef = this._outerRef;\n\n        if (direction === 'rtl') {\n          switch (getRTLOffsetType()) {\n            case 'negative':\n              outerRef.scrollLeft = -scrollLeft;\n              break;\n\n            case 'positive-ascending':\n              outerRef.scrollLeft = scrollLeft;\n              break;\n\n            default:\n              var clientWidth = outerRef.clientWidth,\n                  scrollWidth = outerRef.scrollWidth;\n              outerRef.scrollLeft = scrollWidth - clientWidth - scrollLeft;\n              break;\n          }\n        } else {\n          outerRef.scrollLeft = Math.max(0, scrollLeft);\n        }\n\n        outerRef.scrollTop = Math.max(0, scrollTop);\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      if (this._resetIsScrollingTimeoutId !== null) {\n        cancelTimeout(this._resetIsScrollingTimeoutId);\n      }\n    };\n\n    _proto.render = function render() {\n      var _this$props4 = this.props,\n          children = _this$props4.children,\n          className = _this$props4.className,\n          columnCount = _this$props4.columnCount,\n          direction = _this$props4.direction,\n          height = _this$props4.height,\n          innerRef = _this$props4.innerRef,\n          innerElementType = _this$props4.innerElementType,\n          innerTagName = _this$props4.innerTagName,\n          itemData = _this$props4.itemData,\n          _this$props4$itemKey = _this$props4.itemKey,\n          itemKey = _this$props4$itemKey === void 0 ? defaultItemKey : _this$props4$itemKey,\n          outerElementType = _this$props4.outerElementType,\n          outerTagName = _this$props4.outerTagName,\n          rowCount = _this$props4.rowCount,\n          style = _this$props4.style,\n          useIsScrolling = _this$props4.useIsScrolling,\n          width = _this$props4.width;\n      var isScrolling = this.state.isScrolling;\n\n      var _this$_getHorizontalR = this._getHorizontalRangeToRender(),\n          columnStartIndex = _this$_getHorizontalR[0],\n          columnStopIndex = _this$_getHorizontalR[1];\n\n      var _this$_getVerticalRan = this._getVerticalRangeToRender(),\n          rowStartIndex = _this$_getVerticalRan[0],\n          rowStopIndex = _this$_getVerticalRan[1];\n\n      var items = [];\n\n      if (columnCount > 0 && rowCount) {\n        for (var _rowIndex = rowStartIndex; _rowIndex <= rowStopIndex; _rowIndex++) {\n          for (var _columnIndex = columnStartIndex; _columnIndex <= columnStopIndex; _columnIndex++) {\n            items.push(createElement(children, {\n              columnIndex: _columnIndex,\n              data: itemData,\n              isScrolling: useIsScrolling ? isScrolling : undefined,\n              key: itemKey({\n                columnIndex: _columnIndex,\n                data: itemData,\n                rowIndex: _rowIndex\n              }),\n              rowIndex: _rowIndex,\n              style: this._getItemStyle(_rowIndex, _columnIndex)\n            }));\n          }\n        }\n      } // Read this value AFTER items have been created,\n      // So their actual sizes (if variable) are taken into consideration.\n\n\n      var estimatedTotalHeight = getEstimatedTotalHeight(this.props, this._instanceProps);\n      var estimatedTotalWidth = getEstimatedTotalWidth(this.props, this._instanceProps);\n      return createElement(outerElementType || outerTagName || 'div', {\n        className: className,\n        onScroll: this._onScroll,\n        ref: this._outerRefSetter,\n        style: _extends({\n          position: 'relative',\n          height: height,\n          width: width,\n          overflow: 'auto',\n          WebkitOverflowScrolling: 'touch',\n          willChange: 'transform',\n          direction: direction\n        }, style)\n      }, createElement(innerElementType || innerTagName || 'div', {\n        children: items,\n        ref: innerRef,\n        style: {\n          height: estimatedTotalHeight,\n          pointerEvents: isScrolling ? 'none' : undefined,\n          width: estimatedTotalWidth\n        }\n      }));\n    };\n\n    _proto._callPropsCallbacks = function _callPropsCallbacks() {\n      var _this$props5 = this.props,\n          columnCount = _this$props5.columnCount,\n          onItemsRendered = _this$props5.onItemsRendered,\n          onScroll = _this$props5.onScroll,\n          rowCount = _this$props5.rowCount;\n\n      if (typeof onItemsRendered === 'function') {\n        if (columnCount > 0 && rowCount > 0) {\n          var _this$_getHorizontalR2 = this._getHorizontalRangeToRender(),\n              _overscanColumnStartIndex = _this$_getHorizontalR2[0],\n              _overscanColumnStopIndex = _this$_getHorizontalR2[1],\n              _visibleColumnStartIndex = _this$_getHorizontalR2[2],\n              _visibleColumnStopIndex = _this$_getHorizontalR2[3];\n\n          var _this$_getVerticalRan2 = this._getVerticalRangeToRender(),\n              _overscanRowStartIndex = _this$_getVerticalRan2[0],\n              _overscanRowStopIndex = _this$_getVerticalRan2[1],\n              _visibleRowStartIndex = _this$_getVerticalRan2[2],\n              _visibleRowStopIndex = _this$_getVerticalRan2[3];\n\n          this._callOnItemsRendered(_overscanColumnStartIndex, _overscanColumnStopIndex, _overscanRowStartIndex, _overscanRowStopIndex, _visibleColumnStartIndex, _visibleColumnStopIndex, _visibleRowStartIndex, _visibleRowStopIndex);\n        }\n      }\n\n      if (typeof onScroll === 'function') {\n        var _this$state3 = this.state,\n            _horizontalScrollDirection = _this$state3.horizontalScrollDirection,\n            _scrollLeft = _this$state3.scrollLeft,\n            _scrollTop = _this$state3.scrollTop,\n            _scrollUpdateWasRequested = _this$state3.scrollUpdateWasRequested,\n            _verticalScrollDirection = _this$state3.verticalScrollDirection;\n\n        this._callOnScroll(_scrollLeft, _scrollTop, _horizontalScrollDirection, _verticalScrollDirection, _scrollUpdateWasRequested);\n      }\n    }; // Lazily create and cache item styles while scrolling,\n    // So that pure component sCU will prevent re-renders.\n    // We maintain this cache, and pass a style prop rather than index,\n    // So that List can clear cached styles and force item re-render if necessary.\n\n\n    _proto._getHorizontalRangeToRender = function _getHorizontalRangeToRender() {\n      var _this$props6 = this.props,\n          columnCount = _this$props6.columnCount,\n          overscanColumnCount = _this$props6.overscanColumnCount,\n          overscanColumnsCount = _this$props6.overscanColumnsCount,\n          overscanCount = _this$props6.overscanCount,\n          rowCount = _this$props6.rowCount;\n      var _this$state4 = this.state,\n          horizontalScrollDirection = _this$state4.horizontalScrollDirection,\n          isScrolling = _this$state4.isScrolling,\n          scrollLeft = _this$state4.scrollLeft;\n      var overscanCountResolved = overscanColumnCount || overscanColumnsCount || overscanCount || 1;\n\n      if (columnCount === 0 || rowCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      var startIndex = getColumnStartIndexForOffset(this.props, scrollLeft, this._instanceProps);\n      var stopIndex = getColumnStopIndexForStartIndex(this.props, startIndex, scrollLeft, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n\n      var overscanBackward = !isScrolling || horizontalScrollDirection === 'backward' ? Math.max(1, overscanCountResolved) : 1;\n      var overscanForward = !isScrolling || horizontalScrollDirection === 'forward' ? Math.max(1, overscanCountResolved) : 1;\n      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(columnCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];\n    };\n\n    _proto._getVerticalRangeToRender = function _getVerticalRangeToRender() {\n      var _this$props7 = this.props,\n          columnCount = _this$props7.columnCount,\n          overscanCount = _this$props7.overscanCount,\n          overscanRowCount = _this$props7.overscanRowCount,\n          overscanRowsCount = _this$props7.overscanRowsCount,\n          rowCount = _this$props7.rowCount;\n      var _this$state5 = this.state,\n          isScrolling = _this$state5.isScrolling,\n          verticalScrollDirection = _this$state5.verticalScrollDirection,\n          scrollTop = _this$state5.scrollTop;\n      var overscanCountResolved = overscanRowCount || overscanRowsCount || overscanCount || 1;\n\n      if (columnCount === 0 || rowCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      var startIndex = getRowStartIndexForOffset(this.props, scrollTop, this._instanceProps);\n      var stopIndex = getRowStopIndexForStartIndex(this.props, startIndex, scrollTop, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n\n      var overscanBackward = !isScrolling || verticalScrollDirection === 'backward' ? Math.max(1, overscanCountResolved) : 1;\n      var overscanForward = !isScrolling || verticalScrollDirection === 'forward' ? Math.max(1, overscanCountResolved) : 1;\n      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(rowCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];\n    };\n\n    return Grid;\n  }(PureComponent), _class.defaultProps = {\n    direction: 'ltr',\n    itemData: undefined,\n    useIsScrolling: false\n  }, _temp;\n}\n\nvar validateSharedProps = function validateSharedProps(_ref5, _ref6) {\n  var children = _ref5.children,\n      direction = _ref5.direction,\n      height = _ref5.height,\n      innerTagName = _ref5.innerTagName,\n      outerTagName = _ref5.outerTagName,\n      overscanColumnsCount = _ref5.overscanColumnsCount,\n      overscanCount = _ref5.overscanCount,\n      overscanRowsCount = _ref5.overscanRowsCount,\n      width = _ref5.width;\n  var instance = _ref6.instance;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (typeof overscanCount === 'number') {\n      if (devWarningsOverscanCount && !devWarningsOverscanCount.has(instance)) {\n        devWarningsOverscanCount.add(instance);\n        console.warn('The overscanCount prop has been deprecated. ' + 'Please use the overscanColumnCount and overscanRowCount props instead.');\n      }\n    }\n\n    if (typeof overscanColumnsCount === 'number' || typeof overscanRowsCount === 'number') {\n      if (devWarningsOverscanRowsColumnsCount && !devWarningsOverscanRowsColumnsCount.has(instance)) {\n        devWarningsOverscanRowsColumnsCount.add(instance);\n        console.warn('The overscanColumnsCount and overscanRowsCount props have been deprecated. ' + 'Please use the overscanColumnCount and overscanRowCount props instead.');\n      }\n    }\n\n    if (innerTagName != null || outerTagName != null) {\n      if (devWarningsTagName && !devWarningsTagName.has(instance)) {\n        devWarningsTagName.add(instance);\n        console.warn('The innerTagName and outerTagName props have been deprecated. ' + 'Please use the innerElementType and outerElementType props instead.');\n      }\n    }\n\n    if (children == null) {\n      throw Error('An invalid \"children\" prop has been specified. ' + 'Value should be a React component. ' + (\"\\\"\" + (children === null ? 'null' : typeof children) + \"\\\" was specified.\"));\n    }\n\n    switch (direction) {\n      case 'ltr':\n      case 'rtl':\n        // Valid values\n        break;\n\n      default:\n        throw Error('An invalid \"direction\" prop has been specified. ' + 'Value should be either \"ltr\" or \"rtl\". ' + (\"\\\"\" + direction + \"\\\" was specified.\"));\n    }\n\n    if (typeof width !== 'number') {\n      throw Error('An invalid \"width\" prop has been specified. ' + 'Grids must specify a number for width. ' + (\"\\\"\" + (width === null ? 'null' : typeof width) + \"\\\" was specified.\"));\n    }\n\n    if (typeof height !== 'number') {\n      throw Error('An invalid \"height\" prop has been specified. ' + 'Grids must specify a number for height. ' + (\"\\\"\" + (height === null ? 'null' : typeof height) + \"\\\" was specified.\"));\n    }\n  }\n};\n\nvar DEFAULT_ESTIMATED_ITEM_SIZE = 50;\n\nvar getEstimatedTotalHeight = function getEstimatedTotalHeight(_ref, _ref2) {\n  var rowCount = _ref.rowCount;\n  var rowMetadataMap = _ref2.rowMetadataMap,\n      estimatedRowHeight = _ref2.estimatedRowHeight,\n      lastMeasuredRowIndex = _ref2.lastMeasuredRowIndex;\n  var totalSizeOfMeasuredRows = 0; // Edge case check for when the number of items decreases while a scroll is in progress.\n  // https://github.com/bvaughn/react-window/pull/138\n\n  if (lastMeasuredRowIndex >= rowCount) {\n    lastMeasuredRowIndex = rowCount - 1;\n  }\n\n  if (lastMeasuredRowIndex >= 0) {\n    var itemMetadata = rowMetadataMap[lastMeasuredRowIndex];\n    totalSizeOfMeasuredRows = itemMetadata.offset + itemMetadata.size;\n  }\n\n  var numUnmeasuredItems = rowCount - lastMeasuredRowIndex - 1;\n  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedRowHeight;\n  return totalSizeOfMeasuredRows + totalSizeOfUnmeasuredItems;\n};\n\nvar getEstimatedTotalWidth = function getEstimatedTotalWidth(_ref3, _ref4) {\n  var columnCount = _ref3.columnCount;\n  var columnMetadataMap = _ref4.columnMetadataMap,\n      estimatedColumnWidth = _ref4.estimatedColumnWidth,\n      lastMeasuredColumnIndex = _ref4.lastMeasuredColumnIndex;\n  var totalSizeOfMeasuredRows = 0; // Edge case check for when the number of items decreases while a scroll is in progress.\n  // https://github.com/bvaughn/react-window/pull/138\n\n  if (lastMeasuredColumnIndex >= columnCount) {\n    lastMeasuredColumnIndex = columnCount - 1;\n  }\n\n  if (lastMeasuredColumnIndex >= 0) {\n    var itemMetadata = columnMetadataMap[lastMeasuredColumnIndex];\n    totalSizeOfMeasuredRows = itemMetadata.offset + itemMetadata.size;\n  }\n\n  var numUnmeasuredItems = columnCount - lastMeasuredColumnIndex - 1;\n  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedColumnWidth;\n  return totalSizeOfMeasuredRows + totalSizeOfUnmeasuredItems;\n};\n\nvar getItemMetadata = function getItemMetadata(itemType, props, index, instanceProps) {\n  var itemMetadataMap, itemSize, lastMeasuredIndex;\n\n  if (itemType === 'column') {\n    itemMetadataMap = instanceProps.columnMetadataMap;\n    itemSize = props.columnWidth;\n    lastMeasuredIndex = instanceProps.lastMeasuredColumnIndex;\n  } else {\n    itemMetadataMap = instanceProps.rowMetadataMap;\n    itemSize = props.rowHeight;\n    lastMeasuredIndex = instanceProps.lastMeasuredRowIndex;\n  }\n\n  if (index > lastMeasuredIndex) {\n    var offset = 0;\n\n    if (lastMeasuredIndex >= 0) {\n      var itemMetadata = itemMetadataMap[lastMeasuredIndex];\n      offset = itemMetadata.offset + itemMetadata.size;\n    }\n\n    for (var i = lastMeasuredIndex + 1; i <= index; i++) {\n      var size = itemSize(i);\n      itemMetadataMap[i] = {\n        offset: offset,\n        size: size\n      };\n      offset += size;\n    }\n\n    if (itemType === 'column') {\n      instanceProps.lastMeasuredColumnIndex = index;\n    } else {\n      instanceProps.lastMeasuredRowIndex = index;\n    }\n  }\n\n  return itemMetadataMap[index];\n};\n\nvar findNearestItem = function findNearestItem(itemType, props, instanceProps, offset) {\n  var itemMetadataMap, lastMeasuredIndex;\n\n  if (itemType === 'column') {\n    itemMetadataMap = instanceProps.columnMetadataMap;\n    lastMeasuredIndex = instanceProps.lastMeasuredColumnIndex;\n  } else {\n    itemMetadataMap = instanceProps.rowMetadataMap;\n    lastMeasuredIndex = instanceProps.lastMeasuredRowIndex;\n  }\n\n  var lastMeasuredItemOffset = lastMeasuredIndex > 0 ? itemMetadataMap[lastMeasuredIndex].offset : 0;\n\n  if (lastMeasuredItemOffset >= offset) {\n    // If we've already measured items within this range just use a binary search as it's faster.\n    return findNearestItemBinarySearch(itemType, props, instanceProps, lastMeasuredIndex, 0, offset);\n  } else {\n    // If we haven't yet measured this high, fallback to an exponential search with an inner binary search.\n    // The exponential search avoids pre-computing sizes for the full set of items as a binary search would.\n    // The overall complexity for this approach is O(log n).\n    return findNearestItemExponentialSearch(itemType, props, instanceProps, Math.max(0, lastMeasuredIndex), offset);\n  }\n};\n\nvar findNearestItemBinarySearch = function findNearestItemBinarySearch(itemType, props, instanceProps, high, low, offset) {\n  while (low <= high) {\n    var middle = low + Math.floor((high - low) / 2);\n    var currentOffset = getItemMetadata(itemType, props, middle, instanceProps).offset;\n\n    if (currentOffset === offset) {\n      return middle;\n    } else if (currentOffset < offset) {\n      low = middle + 1;\n    } else if (currentOffset > offset) {\n      high = middle - 1;\n    }\n  }\n\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\n\nvar findNearestItemExponentialSearch = function findNearestItemExponentialSearch(itemType, props, instanceProps, index, offset) {\n  var itemCount = itemType === 'column' ? props.columnCount : props.rowCount;\n  var interval = 1;\n\n  while (index < itemCount && getItemMetadata(itemType, props, index, instanceProps).offset < offset) {\n    index += interval;\n    interval *= 2;\n  }\n\n  return findNearestItemBinarySearch(itemType, props, instanceProps, Math.min(index, itemCount - 1), Math.floor(index / 2), offset);\n};\n\nvar getOffsetForIndexAndAlignment = function getOffsetForIndexAndAlignment(itemType, props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n  var size = itemType === 'column' ? props.width : props.height;\n  var itemMetadata = getItemMetadata(itemType, props, index, instanceProps); // Get estimated total size after ItemMetadata is computed,\n  // To ensure it reflects actual measurements instead of just estimates.\n\n  var estimatedTotalSize = itemType === 'column' ? getEstimatedTotalWidth(props, instanceProps) : getEstimatedTotalHeight(props, instanceProps);\n  var maxOffset = Math.max(0, Math.min(estimatedTotalSize - size, itemMetadata.offset));\n  var minOffset = Math.max(0, itemMetadata.offset - size + scrollbarSize + itemMetadata.size);\n\n  if (align === 'smart') {\n    if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {\n      align = 'auto';\n    } else {\n      align = 'center';\n    }\n  }\n\n  switch (align) {\n    case 'start':\n      return maxOffset;\n\n    case 'end':\n      return minOffset;\n\n    case 'center':\n      return Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n    case 'auto':\n    default:\n      if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {\n        return scrollOffset;\n      } else if (minOffset > maxOffset) {\n        // Because we only take into account the scrollbar size when calculating minOffset\n        // this value can be larger than maxOffset when at the end of the list\n        return minOffset;\n      } else if (scrollOffset < minOffset) {\n        return minOffset;\n      } else {\n        return maxOffset;\n      }\n\n  }\n};\n\nvar VariableSizeGrid =\n/*#__PURE__*/\ncreateGridComponent({\n  getColumnOffset: function getColumnOffset(props, index, instanceProps) {\n    return getItemMetadata('column', props, index, instanceProps).offset;\n  },\n  getColumnStartIndexForOffset: function getColumnStartIndexForOffset(props, scrollLeft, instanceProps) {\n    return findNearestItem('column', props, instanceProps, scrollLeft);\n  },\n  getColumnStopIndexForStartIndex: function getColumnStopIndexForStartIndex(props, startIndex, scrollLeft, instanceProps) {\n    var columnCount = props.columnCount,\n        width = props.width;\n    var itemMetadata = getItemMetadata('column', props, startIndex, instanceProps);\n    var maxOffset = scrollLeft + width;\n    var offset = itemMetadata.offset + itemMetadata.size;\n    var stopIndex = startIndex;\n\n    while (stopIndex < columnCount - 1 && offset < maxOffset) {\n      stopIndex++;\n      offset += getItemMetadata('column', props, stopIndex, instanceProps).size;\n    }\n\n    return stopIndex;\n  },\n  getColumnWidth: function getColumnWidth(props, index, instanceProps) {\n    return instanceProps.columnMetadataMap[index].size;\n  },\n  getEstimatedTotalHeight: getEstimatedTotalHeight,\n  getEstimatedTotalWidth: getEstimatedTotalWidth,\n  getOffsetForColumnAndAlignment: function getOffsetForColumnAndAlignment(props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n    return getOffsetForIndexAndAlignment('column', props, index, align, scrollOffset, instanceProps, scrollbarSize);\n  },\n  getOffsetForRowAndAlignment: function getOffsetForRowAndAlignment(props, index, align, scrollOffset, instanceProps, scrollbarSize) {\n    return getOffsetForIndexAndAlignment('row', props, index, align, scrollOffset, instanceProps, scrollbarSize);\n  },\n  getRowOffset: function getRowOffset(props, index, instanceProps) {\n    return getItemMetadata('row', props, index, instanceProps).offset;\n  },\n  getRowHeight: function getRowHeight(props, index, instanceProps) {\n    return instanceProps.rowMetadataMap[index].size;\n  },\n  getRowStartIndexForOffset: function getRowStartIndexForOffset(props, scrollTop, instanceProps) {\n    return findNearestItem('row', props, instanceProps, scrollTop);\n  },\n  getRowStopIndexForStartIndex: function getRowStopIndexForStartIndex(props, startIndex, scrollTop, instanceProps) {\n    var rowCount = props.rowCount,\n        height = props.height;\n    var itemMetadata = getItemMetadata('row', props, startIndex, instanceProps);\n    var maxOffset = scrollTop + height;\n    var offset = itemMetadata.offset + itemMetadata.size;\n    var stopIndex = startIndex;\n\n    while (stopIndex < rowCount - 1 && offset < maxOffset) {\n      stopIndex++;\n      offset += getItemMetadata('row', props, stopIndex, instanceProps).size;\n    }\n\n    return stopIndex;\n  },\n  initInstanceProps: function initInstanceProps(props, instance) {\n    var _ref5 = props,\n        estimatedColumnWidth = _ref5.estimatedColumnWidth,\n        estimatedRowHeight = _ref5.estimatedRowHeight;\n    var instanceProps = {\n      columnMetadataMap: {},\n      estimatedColumnWidth: estimatedColumnWidth || DEFAULT_ESTIMATED_ITEM_SIZE,\n      estimatedRowHeight: estimatedRowHeight || DEFAULT_ESTIMATED_ITEM_SIZE,\n      lastMeasuredColumnIndex: -1,\n      lastMeasuredRowIndex: -1,\n      rowMetadataMap: {}\n    };\n\n    instance.resetAfterColumnIndex = function (columnIndex, shouldForceUpdate) {\n      if (shouldForceUpdate === void 0) {\n        shouldForceUpdate = true;\n      }\n\n      instance.resetAfterIndices({\n        columnIndex: columnIndex,\n        shouldForceUpdate: shouldForceUpdate\n      });\n    };\n\n    instance.resetAfterRowIndex = function (rowIndex, shouldForceUpdate) {\n      if (shouldForceUpdate === void 0) {\n        shouldForceUpdate = true;\n      }\n\n      instance.resetAfterIndices({\n        rowIndex: rowIndex,\n        shouldForceUpdate: shouldForceUpdate\n      });\n    };\n\n    instance.resetAfterIndices = function (_ref6) {\n      var columnIndex = _ref6.columnIndex,\n          rowIndex = _ref6.rowIndex,\n          _ref6$shouldForceUpda = _ref6.shouldForceUpdate,\n          shouldForceUpdate = _ref6$shouldForceUpda === void 0 ? true : _ref6$shouldForceUpda;\n\n      if (typeof columnIndex === 'number') {\n        instanceProps.lastMeasuredColumnIndex = Math.min(instanceProps.lastMeasuredColumnIndex, columnIndex - 1);\n      }\n\n      if (typeof rowIndex === 'number') {\n        instanceProps.lastMeasuredRowIndex = Math.min(instanceProps.lastMeasuredRowIndex, rowIndex - 1);\n      } // We could potentially optimize further by only evicting styles after this index,\n      // But since styles are only cached while scrolling is in progress-\n      // It seems an unnecessary optimization.\n      // It's unlikely that resetAfterIndex() will be called while a user is scrolling.\n\n\n      instance._getItemStyleCache(-1);\n\n      if (shouldForceUpdate) {\n        instance.forceUpdate();\n      }\n    };\n\n    return instanceProps;\n  },\n  shouldResetStyleCacheOnItemSizeChange: false,\n  validateProps: function validateProps(_ref7) {\n    var columnWidth = _ref7.columnWidth,\n        rowHeight = _ref7.rowHeight;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof columnWidth !== 'function') {\n        throw Error('An invalid \"columnWidth\" prop has been specified. ' + 'Value should be a function. ' + (\"\\\"\" + (columnWidth === null ? 'null' : typeof columnWidth) + \"\\\" was specified.\"));\n      } else if (typeof rowHeight !== 'function') {\n        throw Error('An invalid \"rowHeight\" prop has been specified. ' + 'Value should be a function. ' + (\"\\\"\" + (rowHeight === null ? 'null' : typeof rowHeight) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\nvar IS_SCROLLING_DEBOUNCE_INTERVAL$1 = 150;\n\nvar defaultItemKey$1 = function defaultItemKey(index, data) {\n  return index;\n}; // In DEV mode, this Set helps us only log a warning once per component instance.\n// This avoids spamming the console every time a render happens.\n\n\nvar devWarningsDirection = null;\nvar devWarningsTagName$1 = null;\n\nif (process.env.NODE_ENV !== 'production') {\n  if (typeof window !== 'undefined' && typeof window.WeakSet !== 'undefined') {\n    devWarningsDirection =\n    /*#__PURE__*/\n    new WeakSet();\n    devWarningsTagName$1 =\n    /*#__PURE__*/\n    new WeakSet();\n  }\n}\n\nfunction createListComponent(_ref) {\n  var _class, _temp;\n\n  var getItemOffset = _ref.getItemOffset,\n      getEstimatedTotalSize = _ref.getEstimatedTotalSize,\n      getItemSize = _ref.getItemSize,\n      getOffsetForIndexAndAlignment = _ref.getOffsetForIndexAndAlignment,\n      getStartIndexForOffset = _ref.getStartIndexForOffset,\n      getStopIndexForStartIndex = _ref.getStopIndexForStartIndex,\n      initInstanceProps = _ref.initInstanceProps,\n      shouldResetStyleCacheOnItemSizeChange = _ref.shouldResetStyleCacheOnItemSizeChange,\n      validateProps = _ref.validateProps;\n  return _temp = _class =\n  /*#__PURE__*/\n  function (_PureComponent) {\n    _inheritsLoose(List, _PureComponent);\n\n    // Always use explicit constructor for React components.\n    // It produces less code after transpilation. (#26)\n    // eslint-disable-next-line no-useless-constructor\n    function List(props) {\n      var _this;\n\n      _this = _PureComponent.call(this, props) || this;\n      _this._instanceProps = initInstanceProps(_this.props, _assertThisInitialized(_assertThisInitialized(_this)));\n      _this._outerRef = void 0;\n      _this._resetIsScrollingTimeoutId = null;\n      _this.state = {\n        instance: _assertThisInitialized(_assertThisInitialized(_this)),\n        isScrolling: false,\n        scrollDirection: 'forward',\n        scrollOffset: typeof _this.props.initialScrollOffset === 'number' ? _this.props.initialScrollOffset : 0,\n        scrollUpdateWasRequested: false\n      };\n      _this._callOnItemsRendered = void 0;\n      _this._callOnItemsRendered = memoizeOne(function (overscanStartIndex, overscanStopIndex, visibleStartIndex, visibleStopIndex) {\n        return _this.props.onItemsRendered({\n          overscanStartIndex: overscanStartIndex,\n          overscanStopIndex: overscanStopIndex,\n          visibleStartIndex: visibleStartIndex,\n          visibleStopIndex: visibleStopIndex\n        });\n      });\n      _this._callOnScroll = void 0;\n      _this._callOnScroll = memoizeOne(function (scrollDirection, scrollOffset, scrollUpdateWasRequested) {\n        return _this.props.onScroll({\n          scrollDirection: scrollDirection,\n          scrollOffset: scrollOffset,\n          scrollUpdateWasRequested: scrollUpdateWasRequested\n        });\n      });\n      _this._getItemStyle = void 0;\n\n      _this._getItemStyle = function (index) {\n        var _this$props = _this.props,\n            direction = _this$props.direction,\n            itemSize = _this$props.itemSize,\n            layout = _this$props.layout;\n\n        var itemStyleCache = _this._getItemStyleCache(shouldResetStyleCacheOnItemSizeChange && itemSize, shouldResetStyleCacheOnItemSizeChange && layout, shouldResetStyleCacheOnItemSizeChange && direction);\n\n        var style;\n\n        if (itemStyleCache.hasOwnProperty(index)) {\n          style = itemStyleCache[index];\n        } else {\n          var _offset = getItemOffset(_this.props, index, _this._instanceProps);\n\n          var size = getItemSize(_this.props, index, _this._instanceProps); // TODO Deprecate direction \"horizontal\"\n\n          var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n          var isRtl = direction === 'rtl';\n          var offsetHorizontal = isHorizontal ? _offset : 0;\n          itemStyleCache[index] = style = {\n            position: 'absolute',\n            left: isRtl ? undefined : offsetHorizontal,\n            right: isRtl ? offsetHorizontal : undefined,\n            top: !isHorizontal ? _offset : 0,\n            height: !isHorizontal ? size : '100%',\n            width: isHorizontal ? size : '100%'\n          };\n        }\n\n        return style;\n      };\n\n      _this._getItemStyleCache = void 0;\n      _this._getItemStyleCache = memoizeOne(function (_, __, ___) {\n        return {};\n      });\n\n      _this._onScrollHorizontal = function (event) {\n        var _event$currentTarget = event.currentTarget,\n            clientWidth = _event$currentTarget.clientWidth,\n            scrollLeft = _event$currentTarget.scrollLeft,\n            scrollWidth = _event$currentTarget.scrollWidth;\n\n        _this.setState(function (prevState) {\n          if (prevState.scrollOffset === scrollLeft) {\n            // Scroll position may have been updated by cDM/cDU,\n            // In which case we don't need to trigger another render,\n            // And we don't want to update state.isScrolling.\n            return null;\n          }\n\n          var direction = _this.props.direction;\n          var scrollOffset = scrollLeft;\n\n          if (direction === 'rtl') {\n            // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n            // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n            // It's also easier for this component if we convert offsets to the same format as they would be in for ltr.\n            // So the simplest solution is to determine which browser behavior we're dealing with, and convert based on it.\n            switch (getRTLOffsetType()) {\n              case 'negative':\n                scrollOffset = -scrollLeft;\n                break;\n\n              case 'positive-descending':\n                scrollOffset = scrollWidth - clientWidth - scrollLeft;\n                break;\n            }\n          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n\n\n          scrollOffset = Math.max(0, Math.min(scrollOffset, scrollWidth - clientWidth));\n          return {\n            isScrolling: true,\n            scrollDirection: prevState.scrollOffset < scrollLeft ? 'forward' : 'backward',\n            scrollOffset: scrollOffset,\n            scrollUpdateWasRequested: false\n          };\n        }, _this._resetIsScrollingDebounced);\n      };\n\n      _this._onScrollVertical = function (event) {\n        var _event$currentTarget2 = event.currentTarget,\n            clientHeight = _event$currentTarget2.clientHeight,\n            scrollHeight = _event$currentTarget2.scrollHeight,\n            scrollTop = _event$currentTarget2.scrollTop;\n\n        _this.setState(function (prevState) {\n          if (prevState.scrollOffset === scrollTop) {\n            // Scroll position may have been updated by cDM/cDU,\n            // In which case we don't need to trigger another render,\n            // And we don't want to update state.isScrolling.\n            return null;\n          } // Prevent Safari's elastic scrolling from causing visual shaking when scrolling past bounds.\n\n\n          var scrollOffset = Math.max(0, Math.min(scrollTop, scrollHeight - clientHeight));\n          return {\n            isScrolling: true,\n            scrollDirection: prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',\n            scrollOffset: scrollOffset,\n            scrollUpdateWasRequested: false\n          };\n        }, _this._resetIsScrollingDebounced);\n      };\n\n      _this._outerRefSetter = function (ref) {\n        var outerRef = _this.props.outerRef;\n        _this._outerRef = ref;\n\n        if (typeof outerRef === 'function') {\n          outerRef(ref);\n        } else if (outerRef != null && typeof outerRef === 'object' && outerRef.hasOwnProperty('current')) {\n          outerRef.current = ref;\n        }\n      };\n\n      _this._resetIsScrollingDebounced = function () {\n        if (_this._resetIsScrollingTimeoutId !== null) {\n          cancelTimeout(_this._resetIsScrollingTimeoutId);\n        }\n\n        _this._resetIsScrollingTimeoutId = requestTimeout(_this._resetIsScrolling, IS_SCROLLING_DEBOUNCE_INTERVAL$1);\n      };\n\n      _this._resetIsScrolling = function () {\n        _this._resetIsScrollingTimeoutId = null;\n\n        _this.setState({\n          isScrolling: false\n        }, function () {\n          // Clear style cache after state update has been committed.\n          // This way we don't break pure sCU for items that don't use isScrolling param.\n          _this._getItemStyleCache(-1, null);\n        });\n      };\n\n      return _this;\n    }\n\n    List.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n      validateSharedProps$1(nextProps, prevState);\n      validateProps(nextProps);\n      return null;\n    };\n\n    var _proto = List.prototype;\n\n    _proto.scrollTo = function scrollTo(scrollOffset) {\n      scrollOffset = Math.max(0, scrollOffset);\n      this.setState(function (prevState) {\n        if (prevState.scrollOffset === scrollOffset) {\n          return null;\n        }\n\n        return {\n          scrollDirection: prevState.scrollOffset < scrollOffset ? 'forward' : 'backward',\n          scrollOffset: scrollOffset,\n          scrollUpdateWasRequested: true\n        };\n      }, this._resetIsScrollingDebounced);\n    };\n\n    _proto.scrollToItem = function scrollToItem(index, align) {\n      if (align === void 0) {\n        align = 'auto';\n      }\n\n      var itemCount = this.props.itemCount;\n      var scrollOffset = this.state.scrollOffset;\n      index = Math.max(0, Math.min(index, itemCount - 1));\n      this.scrollTo(getOffsetForIndexAndAlignment(this.props, index, align, scrollOffset, this._instanceProps));\n    };\n\n    _proto.componentDidMount = function componentDidMount() {\n      var _this$props2 = this.props,\n          direction = _this$props2.direction,\n          initialScrollOffset = _this$props2.initialScrollOffset,\n          layout = _this$props2.layout;\n\n      if (typeof initialScrollOffset === 'number' && this._outerRef != null) {\n        var outerRef = this._outerRef; // TODO Deprecate direction \"horizontal\"\n\n        if (direction === 'horizontal' || layout === 'horizontal') {\n          outerRef.scrollLeft = initialScrollOffset;\n        } else {\n          outerRef.scrollTop = initialScrollOffset;\n        }\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentDidUpdate = function componentDidUpdate() {\n      var _this$props3 = this.props,\n          direction = _this$props3.direction,\n          layout = _this$props3.layout;\n      var _this$state = this.state,\n          scrollOffset = _this$state.scrollOffset,\n          scrollUpdateWasRequested = _this$state.scrollUpdateWasRequested;\n\n      if (scrollUpdateWasRequested && this._outerRef != null) {\n        var outerRef = this._outerRef; // TODO Deprecate direction \"horizontal\"\n\n        if (direction === 'horizontal' || layout === 'horizontal') {\n          if (direction === 'rtl') {\n            // TRICKY According to the spec, scrollLeft should be negative for RTL aligned elements.\n            // This is not the case for all browsers though (e.g. Chrome reports values as positive, measured relative to the left).\n            // So we need to determine which browser behavior we're dealing with, and mimic it.\n            switch (getRTLOffsetType()) {\n              case 'negative':\n                outerRef.scrollLeft = -scrollOffset;\n                break;\n\n              case 'positive-ascending':\n                outerRef.scrollLeft = scrollOffset;\n                break;\n\n              default:\n                var clientWidth = outerRef.clientWidth,\n                    scrollWidth = outerRef.scrollWidth;\n                outerRef.scrollLeft = scrollWidth - clientWidth - scrollOffset;\n                break;\n            }\n          } else {\n            outerRef.scrollLeft = scrollOffset;\n          }\n        } else {\n          outerRef.scrollTop = scrollOffset;\n        }\n      }\n\n      this._callPropsCallbacks();\n    };\n\n    _proto.componentWillUnmount = function componentWillUnmount() {\n      if (this._resetIsScrollingTimeoutId !== null) {\n        cancelTimeout(this._resetIsScrollingTimeoutId);\n      }\n    };\n\n    _proto.render = function render() {\n      var _this$props4 = this.props,\n          children = _this$props4.children,\n          className = _this$props4.className,\n          direction = _this$props4.direction,\n          height = _this$props4.height,\n          innerRef = _this$props4.innerRef,\n          innerElementType = _this$props4.innerElementType,\n          innerTagName = _this$props4.innerTagName,\n          itemCount = _this$props4.itemCount,\n          itemData = _this$props4.itemData,\n          _this$props4$itemKey = _this$props4.itemKey,\n          itemKey = _this$props4$itemKey === void 0 ? defaultItemKey$1 : _this$props4$itemKey,\n          layout = _this$props4.layout,\n          outerElementType = _this$props4.outerElementType,\n          outerTagName = _this$props4.outerTagName,\n          style = _this$props4.style,\n          useIsScrolling = _this$props4.useIsScrolling,\n          width = _this$props4.width;\n      var isScrolling = this.state.isScrolling; // TODO Deprecate direction \"horizontal\"\n\n      var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n      var onScroll = isHorizontal ? this._onScrollHorizontal : this._onScrollVertical;\n\n      var _this$_getRangeToRend = this._getRangeToRender(),\n          startIndex = _this$_getRangeToRend[0],\n          stopIndex = _this$_getRangeToRend[1];\n\n      var items = [];\n\n      if (itemCount > 0) {\n        for (var _index = startIndex; _index <= stopIndex; _index++) {\n          items.push(createElement(children, {\n            data: itemData,\n            key: itemKey(_index, itemData),\n            index: _index,\n            isScrolling: useIsScrolling ? isScrolling : undefined,\n            style: this._getItemStyle(_index)\n          }));\n        }\n      } // Read this value AFTER items have been created,\n      // So their actual sizes (if variable) are taken into consideration.\n\n\n      var estimatedTotalSize = getEstimatedTotalSize(this.props, this._instanceProps);\n      return createElement(outerElementType || outerTagName || 'div', {\n        className: className,\n        onScroll: onScroll,\n        ref: this._outerRefSetter,\n        style: _extends({\n          position: 'relative',\n          height: height,\n          width: width,\n          overflow: 'auto',\n          WebkitOverflowScrolling: 'touch',\n          willChange: 'transform',\n          direction: direction\n        }, style)\n      }, createElement(innerElementType || innerTagName || 'div', {\n        children: items,\n        ref: innerRef,\n        style: {\n          height: isHorizontal ? '100%' : estimatedTotalSize,\n          pointerEvents: isScrolling ? 'none' : undefined,\n          width: isHorizontal ? estimatedTotalSize : '100%'\n        }\n      }));\n    };\n\n    _proto._callPropsCallbacks = function _callPropsCallbacks() {\n      if (typeof this.props.onItemsRendered === 'function') {\n        var itemCount = this.props.itemCount;\n\n        if (itemCount > 0) {\n          var _this$_getRangeToRend2 = this._getRangeToRender(),\n              _overscanStartIndex = _this$_getRangeToRend2[0],\n              _overscanStopIndex = _this$_getRangeToRend2[1],\n              _visibleStartIndex = _this$_getRangeToRend2[2],\n              _visibleStopIndex = _this$_getRangeToRend2[3];\n\n          this._callOnItemsRendered(_overscanStartIndex, _overscanStopIndex, _visibleStartIndex, _visibleStopIndex);\n        }\n      }\n\n      if (typeof this.props.onScroll === 'function') {\n        var _this$state2 = this.state,\n            _scrollDirection = _this$state2.scrollDirection,\n            _scrollOffset = _this$state2.scrollOffset,\n            _scrollUpdateWasRequested = _this$state2.scrollUpdateWasRequested;\n\n        this._callOnScroll(_scrollDirection, _scrollOffset, _scrollUpdateWasRequested);\n      }\n    }; // Lazily create and cache item styles while scrolling,\n    // So that pure component sCU will prevent re-renders.\n    // We maintain this cache, and pass a style prop rather than index,\n    // So that List can clear cached styles and force item re-render if necessary.\n\n\n    _proto._getRangeToRender = function _getRangeToRender() {\n      var _this$props5 = this.props,\n          itemCount = _this$props5.itemCount,\n          overscanCount = _this$props5.overscanCount;\n      var _this$state3 = this.state,\n          isScrolling = _this$state3.isScrolling,\n          scrollDirection = _this$state3.scrollDirection,\n          scrollOffset = _this$state3.scrollOffset;\n\n      if (itemCount === 0) {\n        return [0, 0, 0, 0];\n      }\n\n      var startIndex = getStartIndexForOffset(this.props, scrollOffset, this._instanceProps);\n      var stopIndex = getStopIndexForStartIndex(this.props, startIndex, scrollOffset, this._instanceProps); // Overscan by one item in each direction so that tab/focus works.\n      // If there isn't at least one extra item, tab loops back around.\n\n      var overscanBackward = !isScrolling || scrollDirection === 'backward' ? Math.max(1, overscanCount) : 1;\n      var overscanForward = !isScrolling || scrollDirection === 'forward' ? Math.max(1, overscanCount) : 1;\n      return [Math.max(0, startIndex - overscanBackward), Math.max(0, Math.min(itemCount - 1, stopIndex + overscanForward)), startIndex, stopIndex];\n    };\n\n    return List;\n  }(PureComponent), _class.defaultProps = {\n    direction: 'ltr',\n    itemData: undefined,\n    layout: 'vertical',\n    overscanCount: 2,\n    useIsScrolling: false\n  }, _temp;\n} // NOTE: I considered further wrapping individual items with a pure ListItem component.\n// This would avoid ever calling the render function for the same index more than once,\n// But it would also add the overhead of a lot of components/fibers.\n// I assume people already do this (render function returning a class component),\n// So my doing it would just unnecessarily double the wrappers.\n\nvar validateSharedProps$1 = function validateSharedProps(_ref2, _ref3) {\n  var children = _ref2.children,\n      direction = _ref2.direction,\n      height = _ref2.height,\n      layout = _ref2.layout,\n      innerTagName = _ref2.innerTagName,\n      outerTagName = _ref2.outerTagName,\n      width = _ref2.width;\n  var instance = _ref3.instance;\n\n  if (process.env.NODE_ENV !== 'production') {\n    if (innerTagName != null || outerTagName != null) {\n      if (devWarningsTagName$1 && !devWarningsTagName$1.has(instance)) {\n        devWarningsTagName$1.add(instance);\n        console.warn('The innerTagName and outerTagName props have been deprecated. ' + 'Please use the innerElementType and outerElementType props instead.');\n      }\n    } // TODO Deprecate direction \"horizontal\"\n\n\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n\n    switch (direction) {\n      case 'horizontal':\n      case 'vertical':\n        if (devWarningsDirection && !devWarningsDirection.has(instance)) {\n          devWarningsDirection.add(instance);\n          console.warn('The direction prop should be either \"ltr\" (default) or \"rtl\". ' + 'Please use the layout prop to specify \"vertical\" (default) or \"horizontal\" orientation.');\n        }\n\n        break;\n\n      case 'ltr':\n      case 'rtl':\n        // Valid values\n        break;\n\n      default:\n        throw Error('An invalid \"direction\" prop has been specified. ' + 'Value should be either \"ltr\" or \"rtl\". ' + (\"\\\"\" + direction + \"\\\" was specified.\"));\n    }\n\n    switch (layout) {\n      case 'horizontal':\n      case 'vertical':\n        // Valid values\n        break;\n\n      default:\n        throw Error('An invalid \"layout\" prop has been specified. ' + 'Value should be either \"horizontal\" or \"vertical\". ' + (\"\\\"\" + layout + \"\\\" was specified.\"));\n    }\n\n    if (children == null) {\n      throw Error('An invalid \"children\" prop has been specified. ' + 'Value should be a React component. ' + (\"\\\"\" + (children === null ? 'null' : typeof children) + \"\\\" was specified.\"));\n    }\n\n    if (isHorizontal && typeof width !== 'number') {\n      throw Error('An invalid \"width\" prop has been specified. ' + 'Horizontal lists must specify a number for width. ' + (\"\\\"\" + (width === null ? 'null' : typeof width) + \"\\\" was specified.\"));\n    } else if (!isHorizontal && typeof height !== 'number') {\n      throw Error('An invalid \"height\" prop has been specified. ' + 'Vertical lists must specify a number for height. ' + (\"\\\"\" + (height === null ? 'null' : typeof height) + \"\\\" was specified.\"));\n    }\n  }\n};\n\nvar DEFAULT_ESTIMATED_ITEM_SIZE$1 = 50;\n\nvar getItemMetadata$1 = function getItemMetadata(props, index, instanceProps) {\n  var _ref = props,\n      itemSize = _ref.itemSize;\n  var itemMetadataMap = instanceProps.itemMetadataMap,\n      lastMeasuredIndex = instanceProps.lastMeasuredIndex;\n\n  if (index > lastMeasuredIndex) {\n    var offset = 0;\n\n    if (lastMeasuredIndex >= 0) {\n      var itemMetadata = itemMetadataMap[lastMeasuredIndex];\n      offset = itemMetadata.offset + itemMetadata.size;\n    }\n\n    for (var i = lastMeasuredIndex + 1; i <= index; i++) {\n      var size = itemSize(i);\n      itemMetadataMap[i] = {\n        offset: offset,\n        size: size\n      };\n      offset += size;\n    }\n\n    instanceProps.lastMeasuredIndex = index;\n  }\n\n  return itemMetadataMap[index];\n};\n\nvar findNearestItem$1 = function findNearestItem(props, instanceProps, offset) {\n  var itemMetadataMap = instanceProps.itemMetadataMap,\n      lastMeasuredIndex = instanceProps.lastMeasuredIndex;\n  var lastMeasuredItemOffset = lastMeasuredIndex > 0 ? itemMetadataMap[lastMeasuredIndex].offset : 0;\n\n  if (lastMeasuredItemOffset >= offset) {\n    // If we've already measured items within this range just use a binary search as it's faster.\n    return findNearestItemBinarySearch$1(props, instanceProps, lastMeasuredIndex, 0, offset);\n  } else {\n    // If we haven't yet measured this high, fallback to an exponential search with an inner binary search.\n    // The exponential search avoids pre-computing sizes for the full set of items as a binary search would.\n    // The overall complexity for this approach is O(log n).\n    return findNearestItemExponentialSearch$1(props, instanceProps, Math.max(0, lastMeasuredIndex), offset);\n  }\n};\n\nvar findNearestItemBinarySearch$1 = function findNearestItemBinarySearch(props, instanceProps, high, low, offset) {\n  while (low <= high) {\n    var middle = low + Math.floor((high - low) / 2);\n    var currentOffset = getItemMetadata$1(props, middle, instanceProps).offset;\n\n    if (currentOffset === offset) {\n      return middle;\n    } else if (currentOffset < offset) {\n      low = middle + 1;\n    } else if (currentOffset > offset) {\n      high = middle - 1;\n    }\n  }\n\n  if (low > 0) {\n    return low - 1;\n  } else {\n    return 0;\n  }\n};\n\nvar findNearestItemExponentialSearch$1 = function findNearestItemExponentialSearch(props, instanceProps, index, offset) {\n  var itemCount = props.itemCount;\n  var interval = 1;\n\n  while (index < itemCount && getItemMetadata$1(props, index, instanceProps).offset < offset) {\n    index += interval;\n    interval *= 2;\n  }\n\n  return findNearestItemBinarySearch$1(props, instanceProps, Math.min(index, itemCount - 1), Math.floor(index / 2), offset);\n};\n\nvar getEstimatedTotalSize = function getEstimatedTotalSize(_ref2, _ref3) {\n  var itemCount = _ref2.itemCount;\n  var itemMetadataMap = _ref3.itemMetadataMap,\n      estimatedItemSize = _ref3.estimatedItemSize,\n      lastMeasuredIndex = _ref3.lastMeasuredIndex;\n  var totalSizeOfMeasuredItems = 0; // Edge case check for when the number of items decreases while a scroll is in progress.\n  // https://github.com/bvaughn/react-window/pull/138\n\n  if (lastMeasuredIndex >= itemCount) {\n    lastMeasuredIndex = itemCount - 1;\n  }\n\n  if (lastMeasuredIndex >= 0) {\n    var itemMetadata = itemMetadataMap[lastMeasuredIndex];\n    totalSizeOfMeasuredItems = itemMetadata.offset + itemMetadata.size;\n  }\n\n  var numUnmeasuredItems = itemCount - lastMeasuredIndex - 1;\n  var totalSizeOfUnmeasuredItems = numUnmeasuredItems * estimatedItemSize;\n  return totalSizeOfMeasuredItems + totalSizeOfUnmeasuredItems;\n};\n\nvar VariableSizeList =\n/*#__PURE__*/\ncreateListComponent({\n  getItemOffset: function getItemOffset(props, index, instanceProps) {\n    return getItemMetadata$1(props, index, instanceProps).offset;\n  },\n  getItemSize: function getItemSize(props, index, instanceProps) {\n    return instanceProps.itemMetadataMap[index].size;\n  },\n  getEstimatedTotalSize: getEstimatedTotalSize,\n  getOffsetForIndexAndAlignment: function getOffsetForIndexAndAlignment(props, index, align, scrollOffset, instanceProps) {\n    var direction = props.direction,\n        height = props.height,\n        layout = props.layout,\n        width = props.width; // TODO Deprecate direction \"horizontal\"\n\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var size = isHorizontal ? width : height;\n    var itemMetadata = getItemMetadata$1(props, index, instanceProps); // Get estimated total size after ItemMetadata is computed,\n    // To ensure it reflects actual measurements instead of just estimates.\n\n    var estimatedTotalSize = getEstimatedTotalSize(props, instanceProps);\n    var maxOffset = Math.max(0, Math.min(estimatedTotalSize - size, itemMetadata.offset));\n    var minOffset = Math.max(0, itemMetadata.offset - size + itemMetadata.size);\n\n    if (align === 'smart') {\n      if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        return Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n      case 'auto':\n      default:\n        if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {\n          return scrollOffset;\n        } else if (scrollOffset < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getStartIndexForOffset: function getStartIndexForOffset(props, offset, instanceProps) {\n    return findNearestItem$1(props, instanceProps, offset);\n  },\n  getStopIndexForStartIndex: function getStopIndexForStartIndex(props, startIndex, scrollOffset, instanceProps) {\n    var direction = props.direction,\n        height = props.height,\n        itemCount = props.itemCount,\n        layout = props.layout,\n        width = props.width; // TODO Deprecate direction \"horizontal\"\n\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var size = isHorizontal ? width : height;\n    var itemMetadata = getItemMetadata$1(props, startIndex, instanceProps);\n    var maxOffset = scrollOffset + size;\n    var offset = itemMetadata.offset + itemMetadata.size;\n    var stopIndex = startIndex;\n\n    while (stopIndex < itemCount - 1 && offset < maxOffset) {\n      stopIndex++;\n      offset += getItemMetadata$1(props, stopIndex, instanceProps).size;\n    }\n\n    return stopIndex;\n  },\n  initInstanceProps: function initInstanceProps(props, instance) {\n    var _ref4 = props,\n        estimatedItemSize = _ref4.estimatedItemSize;\n    var instanceProps = {\n      itemMetadataMap: {},\n      estimatedItemSize: estimatedItemSize || DEFAULT_ESTIMATED_ITEM_SIZE$1,\n      lastMeasuredIndex: -1\n    };\n\n    instance.resetAfterIndex = function (index, shouldForceUpdate) {\n      if (shouldForceUpdate === void 0) {\n        shouldForceUpdate = true;\n      }\n\n      instanceProps.lastMeasuredIndex = Math.min(instanceProps.lastMeasuredIndex, index - 1); // We could potentially optimize further by only evicting styles after this index,\n      // But since styles are only cached while scrolling is in progress-\n      // It seems an unnecessary optimization.\n      // It's unlikely that resetAfterIndex() will be called while a user is scrolling.\n\n      instance._getItemStyleCache(-1);\n\n      if (shouldForceUpdate) {\n        instance.forceUpdate();\n      }\n    };\n\n    return instanceProps;\n  },\n  shouldResetStyleCacheOnItemSizeChange: false,\n  validateProps: function validateProps(_ref5) {\n    var itemSize = _ref5.itemSize;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof itemSize !== 'function') {\n        throw Error('An invalid \"itemSize\" prop has been specified. ' + 'Value should be a function. ' + (\"\\\"\" + (itemSize === null ? 'null' : typeof itemSize) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\nvar FixedSizeGrid =\n/*#__PURE__*/\ncreateGridComponent({\n  getColumnOffset: function getColumnOffset(_ref, index) {\n    var columnWidth = _ref.columnWidth;\n    return index * columnWidth;\n  },\n  getColumnWidth: function getColumnWidth(_ref2, index) {\n    var columnWidth = _ref2.columnWidth;\n    return columnWidth;\n  },\n  getRowOffset: function getRowOffset(_ref3, index) {\n    var rowHeight = _ref3.rowHeight;\n    return index * rowHeight;\n  },\n  getRowHeight: function getRowHeight(_ref4, index) {\n    var rowHeight = _ref4.rowHeight;\n    return rowHeight;\n  },\n  getEstimatedTotalHeight: function getEstimatedTotalHeight(_ref5) {\n    var rowCount = _ref5.rowCount,\n        rowHeight = _ref5.rowHeight;\n    return rowHeight * rowCount;\n  },\n  getEstimatedTotalWidth: function getEstimatedTotalWidth(_ref6) {\n    var columnCount = _ref6.columnCount,\n        columnWidth = _ref6.columnWidth;\n    return columnWidth * columnCount;\n  },\n  getOffsetForColumnAndAlignment: function getOffsetForColumnAndAlignment(_ref7, columnIndex, align, scrollLeft, instanceProps, scrollbarSize) {\n    var columnCount = _ref7.columnCount,\n        columnWidth = _ref7.columnWidth,\n        width = _ref7.width;\n    var lastColumnOffset = Math.max(0, columnCount * columnWidth - width);\n    var maxOffset = Math.min(lastColumnOffset, columnIndex * columnWidth);\n    var minOffset = Math.max(0, columnIndex * columnWidth - width + scrollbarSize + columnWidth);\n\n    if (align === 'smart') {\n      if (scrollLeft >= minOffset - width && scrollLeft <= maxOffset + width) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        // \"Centered\" offset is usually the average of the min and max.\n        // But near the edges of the list, this doesn't hold true.\n        var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n        if (middleOffset < Math.ceil(width / 2)) {\n          return 0; // near the beginning\n        } else if (middleOffset > lastColumnOffset + Math.floor(width / 2)) {\n          return lastColumnOffset; // near the end\n        } else {\n          return middleOffset;\n        }\n\n      case 'auto':\n      default:\n        if (scrollLeft >= minOffset && scrollLeft <= maxOffset) {\n          return scrollLeft;\n        } else if (minOffset > maxOffset) {\n          // Because we only take into account the scrollbar size when calculating minOffset\n          // this value can be larger than maxOffset when at the end of the list\n          return minOffset;\n        } else if (scrollLeft < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getOffsetForRowAndAlignment: function getOffsetForRowAndAlignment(_ref8, rowIndex, align, scrollTop, instanceProps, scrollbarSize) {\n    var rowHeight = _ref8.rowHeight,\n        height = _ref8.height,\n        rowCount = _ref8.rowCount;\n    var lastRowOffset = Math.max(0, rowCount * rowHeight - height);\n    var maxOffset = Math.min(lastRowOffset, rowIndex * rowHeight);\n    var minOffset = Math.max(0, rowIndex * rowHeight - height + scrollbarSize + rowHeight);\n\n    if (align === 'smart') {\n      if (scrollTop >= minOffset - height && scrollTop <= maxOffset + height) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        // \"Centered\" offset is usually the average of the min and max.\n        // But near the edges of the list, this doesn't hold true.\n        var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n        if (middleOffset < Math.ceil(height / 2)) {\n          return 0; // near the beginning\n        } else if (middleOffset > lastRowOffset + Math.floor(height / 2)) {\n          return lastRowOffset; // near the end\n        } else {\n          return middleOffset;\n        }\n\n      case 'auto':\n      default:\n        if (scrollTop >= minOffset && scrollTop <= maxOffset) {\n          return scrollTop;\n        } else if (minOffset > maxOffset) {\n          // Because we only take into account the scrollbar size when calculating minOffset\n          // this value can be larger than maxOffset when at the end of the list\n          return minOffset;\n        } else if (scrollTop < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getColumnStartIndexForOffset: function getColumnStartIndexForOffset(_ref9, scrollLeft) {\n    var columnWidth = _ref9.columnWidth,\n        columnCount = _ref9.columnCount;\n    return Math.max(0, Math.min(columnCount - 1, Math.floor(scrollLeft / columnWidth)));\n  },\n  getColumnStopIndexForStartIndex: function getColumnStopIndexForStartIndex(_ref10, startIndex, scrollLeft) {\n    var columnWidth = _ref10.columnWidth,\n        columnCount = _ref10.columnCount,\n        width = _ref10.width;\n    var left = startIndex * columnWidth;\n    var numVisibleColumns = Math.ceil((width + scrollLeft - left) / columnWidth);\n    return Math.max(0, Math.min(columnCount - 1, startIndex + numVisibleColumns - 1 // -1 is because stop index is inclusive\n    ));\n  },\n  getRowStartIndexForOffset: function getRowStartIndexForOffset(_ref11, scrollTop) {\n    var rowHeight = _ref11.rowHeight,\n        rowCount = _ref11.rowCount;\n    return Math.max(0, Math.min(rowCount - 1, Math.floor(scrollTop / rowHeight)));\n  },\n  getRowStopIndexForStartIndex: function getRowStopIndexForStartIndex(_ref12, startIndex, scrollTop) {\n    var rowHeight = _ref12.rowHeight,\n        rowCount = _ref12.rowCount,\n        height = _ref12.height;\n    var top = startIndex * rowHeight;\n    var numVisibleRows = Math.ceil((height + scrollTop - top) / rowHeight);\n    return Math.max(0, Math.min(rowCount - 1, startIndex + numVisibleRows - 1 // -1 is because stop index is inclusive\n    ));\n  },\n  initInstanceProps: function initInstanceProps(props) {// Noop\n  },\n  shouldResetStyleCacheOnItemSizeChange: true,\n  validateProps: function validateProps(_ref13) {\n    var columnWidth = _ref13.columnWidth,\n        rowHeight = _ref13.rowHeight;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof columnWidth !== 'number') {\n        throw Error('An invalid \"columnWidth\" prop has been specified. ' + 'Value should be a number. ' + (\"\\\"\" + (columnWidth === null ? 'null' : typeof columnWidth) + \"\\\" was specified.\"));\n      }\n\n      if (typeof rowHeight !== 'number') {\n        throw Error('An invalid \"rowHeight\" prop has been specified. ' + 'Value should be a number. ' + (\"\\\"\" + (rowHeight === null ? 'null' : typeof rowHeight) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\nvar FixedSizeList =\n/*#__PURE__*/\ncreateListComponent({\n  getItemOffset: function getItemOffset(_ref, index) {\n    var itemSize = _ref.itemSize;\n    return index * itemSize;\n  },\n  getItemSize: function getItemSize(_ref2, index) {\n    var itemSize = _ref2.itemSize;\n    return itemSize;\n  },\n  getEstimatedTotalSize: function getEstimatedTotalSize(_ref3) {\n    var itemCount = _ref3.itemCount,\n        itemSize = _ref3.itemSize;\n    return itemSize * itemCount;\n  },\n  getOffsetForIndexAndAlignment: function getOffsetForIndexAndAlignment(_ref4, index, align, scrollOffset) {\n    var direction = _ref4.direction,\n        height = _ref4.height,\n        itemCount = _ref4.itemCount,\n        itemSize = _ref4.itemSize,\n        layout = _ref4.layout,\n        width = _ref4.width;\n    // TODO Deprecate direction \"horizontal\"\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var size = isHorizontal ? width : height;\n    var lastItemOffset = Math.max(0, itemCount * itemSize - size);\n    var maxOffset = Math.min(lastItemOffset, index * itemSize);\n    var minOffset = Math.max(0, index * itemSize - size + itemSize);\n\n    if (align === 'smart') {\n      if (scrollOffset >= minOffset - size && scrollOffset <= maxOffset + size) {\n        align = 'auto';\n      } else {\n        align = 'center';\n      }\n    }\n\n    switch (align) {\n      case 'start':\n        return maxOffset;\n\n      case 'end':\n        return minOffset;\n\n      case 'center':\n        {\n          // \"Centered\" offset is usually the average of the min and max.\n          // But near the edges of the list, this doesn't hold true.\n          var middleOffset = Math.round(minOffset + (maxOffset - minOffset) / 2);\n\n          if (middleOffset < Math.ceil(size / 2)) {\n            return 0; // near the beginning\n          } else if (middleOffset > lastItemOffset + Math.floor(size / 2)) {\n            return lastItemOffset; // near the end\n          } else {\n            return middleOffset;\n          }\n        }\n\n      case 'auto':\n      default:\n        if (scrollOffset >= minOffset && scrollOffset <= maxOffset) {\n          return scrollOffset;\n        } else if (scrollOffset < minOffset) {\n          return minOffset;\n        } else {\n          return maxOffset;\n        }\n\n    }\n  },\n  getStartIndexForOffset: function getStartIndexForOffset(_ref5, offset) {\n    var itemCount = _ref5.itemCount,\n        itemSize = _ref5.itemSize;\n    return Math.max(0, Math.min(itemCount - 1, Math.floor(offset / itemSize)));\n  },\n  getStopIndexForStartIndex: function getStopIndexForStartIndex(_ref6, startIndex, scrollOffset) {\n    var direction = _ref6.direction,\n        height = _ref6.height,\n        itemCount = _ref6.itemCount,\n        itemSize = _ref6.itemSize,\n        layout = _ref6.layout,\n        width = _ref6.width;\n    // TODO Deprecate direction \"horizontal\"\n    var isHorizontal = direction === 'horizontal' || layout === 'horizontal';\n    var offset = startIndex * itemSize;\n    var size = isHorizontal ? width : height;\n    var numVisibleItems = Math.ceil((size + scrollOffset - offset) / itemSize);\n    return Math.max(0, Math.min(itemCount - 1, startIndex + numVisibleItems - 1 // -1 is because stop index is inclusive\n    ));\n  },\n  initInstanceProps: function initInstanceProps(props) {// Noop\n  },\n  shouldResetStyleCacheOnItemSizeChange: true,\n  validateProps: function validateProps(_ref7) {\n    var itemSize = _ref7.itemSize;\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof itemSize !== 'number') {\n        throw Error('An invalid \"itemSize\" prop has been specified. ' + 'Value should be a number. ' + (\"\\\"\" + (itemSize === null ? 'null' : typeof itemSize) + \"\\\" was specified.\"));\n      }\n    }\n  }\n});\n\n// Pulled from react-compat\n// https://github.com/developit/preact-compat/blob/7c5de00e7c85e2ffd011bf3af02899b63f699d3a/src/index.js#L349\nfunction shallowDiffers(prev, next) {\n  for (var attribute in prev) {\n    if (!(attribute in next)) {\n      return true;\n    }\n  }\n\n  for (var _attribute in next) {\n    if (prev[_attribute] !== next[_attribute]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// It knows to compare individual style props and ignore the wrapper object.\n// See https://reactjs.org/docs/react-api.html#reactmemo\n\nfunction areEqual(prevProps, nextProps) {\n  var prevStyle = prevProps.style,\n      prevRest = _objectWithoutPropertiesLoose(prevProps, [\"style\"]);\n\n  var nextStyle = nextProps.style,\n      nextRest = _objectWithoutPropertiesLoose(nextProps, [\"style\"]);\n\n  return !shallowDiffers(prevStyle, nextStyle) && !shallowDiffers(prevRest, nextRest);\n}\n\n// It knows to compare individual style props and ignore the wrapper object.\n// See https://reactjs.org/docs/react-component.html#shouldcomponentupdate\n\nfunction shouldComponentUpdate(nextProps, nextState) {\n  return !areEqual(this.props, nextProps) || shallowDiffers(this.state, nextState);\n}\n\nexport { VariableSizeGrid, VariableSizeList, FixedSizeGrid, FixedSizeList, areEqual, shouldComponentUpdate };\n//# sourceMappingURL=index.esm.js.map\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import { PureComponent } from 'react';\n\nfunction isInteger(value) {\n  return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\n}\n\nfunction isRangeVisible(_ref) {\n  var lastRenderedStartIndex = _ref.lastRenderedStartIndex,\n      lastRenderedStopIndex = _ref.lastRenderedStopIndex,\n      startIndex = _ref.startIndex,\n      stopIndex = _ref.stopIndex;\n\n  return !(startIndex > lastRenderedStopIndex || stopIndex < lastRenderedStartIndex);\n}\n\nfunction scanForUnloadedRanges(_ref) {\n  var isItemLoaded = _ref.isItemLoaded,\n      itemCount = _ref.itemCount,\n      minimumBatchSize = _ref.minimumBatchSize,\n      startIndex = _ref.startIndex,\n      stopIndex = _ref.stopIndex;\n\n  var unloadedRanges = [];\n\n  var rangeStartIndex = null;\n  var rangeStopIndex = null;\n\n  for (var _index = startIndex; _index <= stopIndex; _index++) {\n    var loaded = isItemLoaded(_index);\n\n    if (!loaded) {\n      rangeStopIndex = _index;\n      if (rangeStartIndex === null) {\n        rangeStartIndex = _index;\n      }\n    } else if (rangeStopIndex !== null) {\n      unloadedRanges.push([rangeStartIndex, rangeStopIndex]);\n\n      rangeStartIndex = rangeStopIndex = null;\n    }\n  }\n\n  // If :rangeStopIndex is not null it means we haven't ran out of unloaded rows.\n  // Scan forward to try filling our :minimumBatchSize.\n  if (rangeStopIndex !== null) {\n    var potentialStopIndex = Math.min(Math.max(rangeStopIndex, rangeStartIndex + minimumBatchSize - 1), itemCount - 1);\n\n    for (var _index2 = rangeStopIndex + 1; _index2 <= potentialStopIndex; _index2++) {\n      if (!isItemLoaded(_index2)) {\n        rangeStopIndex = _index2;\n      } else {\n        break;\n      }\n    }\n\n    unloadedRanges.push([rangeStartIndex, rangeStopIndex]);\n  }\n\n  // Check to see if our first range ended prematurely.\n  // In this case we should scan backwards to try filling our :minimumBatchSize.\n  if (unloadedRanges.length) {\n    var firstRange = unloadedRanges[0];\n\n    while (firstRange[1] - firstRange[0] + 1 < minimumBatchSize && firstRange[0] > 0) {\n      var _index3 = firstRange[0] - 1;\n\n      if (!isItemLoaded(_index3)) {\n        firstRange[0] = _index3;\n      } else {\n        break;\n      }\n    }\n  }\n\n  return unloadedRanges;\n}\n\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nvar InfiniteLoader = function (_PureComponent) {\n  inherits(InfiniteLoader, _PureComponent);\n\n  function InfiniteLoader() {\n    var _ref;\n\n    var _temp, _this, _ret;\n\n    classCallCheck(this, InfiniteLoader);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = possibleConstructorReturn(this, (_ref = InfiniteLoader.__proto__ || Object.getPrototypeOf(InfiniteLoader)).call.apply(_ref, [this].concat(args))), _this), _this._lastRenderedStartIndex = -1, _this._lastRenderedStopIndex = -1, _this._memoizedUnloadedRanges = [], _this._onItemsRendered = function (_ref2) {\n      var visibleStartIndex = _ref2.visibleStartIndex,\n          visibleStopIndex = _ref2.visibleStopIndex;\n\n      if (process.env.NODE_ENV !== 'production') {\n        if (!isInteger(visibleStartIndex) || !isInteger(visibleStopIndex)) {\n          console.warn('Invalid onItemsRendered signature; please refer to InfiniteLoader documentation.');\n        }\n\n        if (typeof _this.props.loadMoreRows === 'function') {\n          console.warn('InfiniteLoader \"loadMoreRows\" prop has been renamed to \"loadMoreItems\".');\n        }\n      }\n\n      _this._lastRenderedStartIndex = visibleStartIndex;\n      _this._lastRenderedStopIndex = visibleStopIndex;\n\n      _this._ensureRowsLoaded(visibleStartIndex, visibleStopIndex);\n    }, _this._setRef = function (listRef) {\n      _this._listRef = listRef;\n    }, _temp), possibleConstructorReturn(_this, _ret);\n  }\n\n  createClass(InfiniteLoader, [{\n    key: 'resetloadMoreItemsCache',\n    value: function resetloadMoreItemsCache() {\n      var autoReload = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n      this._memoizedUnloadedRanges = [];\n\n      if (autoReload) {\n        this._ensureRowsLoaded(this._lastRenderedStartIndex, this._lastRenderedStopIndex);\n      }\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      if (process.env.NODE_ENV !== 'production') {\n        if (this._listRef == null) {\n          console.warn('Invalid list ref; please refer to InfiniteLoader documentation.');\n        }\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var children = this.props.children;\n\n\n      return children({\n        onItemsRendered: this._onItemsRendered,\n        ref: this._setRef\n      });\n    }\n  }, {\n    key: '_ensureRowsLoaded',\n    value: function _ensureRowsLoaded(startIndex, stopIndex) {\n      var _props = this.props,\n          isItemLoaded = _props.isItemLoaded,\n          itemCount = _props.itemCount,\n          _props$minimumBatchSi = _props.minimumBatchSize,\n          minimumBatchSize = _props$minimumBatchSi === undefined ? 10 : _props$minimumBatchSi,\n          _props$threshold = _props.threshold,\n          threshold = _props$threshold === undefined ? 15 : _props$threshold;\n\n\n      var unloadedRanges = scanForUnloadedRanges({\n        isItemLoaded: isItemLoaded,\n        itemCount: itemCount,\n        minimumBatchSize: minimumBatchSize,\n        startIndex: Math.max(0, startIndex - threshold),\n        stopIndex: Math.min(itemCount - 1, stopIndex + threshold)\n      });\n\n      // Avoid calling load-rows unless range has changed.\n      // This shouldn't be strictly necsesary, but is maybe nice to do.\n      if (this._memoizedUnloadedRanges.length !== unloadedRanges.length || this._memoizedUnloadedRanges.some(function (_ref3, index) {\n        var _ref4 = slicedToArray(_ref3, 2),\n            startIndex = _ref4[0],\n            stopIndex = _ref4[1];\n\n        return unloadedRanges[index][0] !== startIndex || unloadedRanges[index][1] !== stopIndex;\n      })) {\n        this._memoizedUnloadedRanges = unloadedRanges;\n        this._loadUnloadedRanges(unloadedRanges);\n      }\n    }\n  }, {\n    key: '_loadUnloadedRanges',\n    value: function _loadUnloadedRanges(unloadedRanges) {\n      var _this2 = this;\n\n      // loadMoreRows was renamed to loadMoreItems in v1.0.3; will be removed in v2.0\n      var loadMoreItems = this.props.loadMoreItems || this.props.loadMoreRows;\n\n      unloadedRanges.forEach(function (_ref5) {\n        var _ref6 = slicedToArray(_ref5, 2),\n            startIndex = _ref6[0],\n            stopIndex = _ref6[1];\n\n        var promise = loadMoreItems(startIndex, stopIndex);\n        if (promise != null) {\n          promise.then(function () {\n            // Refresh the visible rows if any of them have just been loaded.\n            // Otherwise they will remain in their unloaded visual state.\n            if (isRangeVisible({\n              lastRenderedStartIndex: _this2._lastRenderedStartIndex,\n              lastRenderedStopIndex: _this2._lastRenderedStopIndex,\n              startIndex: startIndex,\n              stopIndex: stopIndex\n            })) {\n              // Handle an unmount while promises are still in flight.\n              if (_this2._listRef == null) {\n                return;\n              }\n\n              // Resize cached row sizes for VariableSizeList,\n              // otherwise just re-render the list.\n              if (typeof _this2._listRef.resetAfterIndex === 'function') {\n                _this2._listRef.resetAfterIndex(startIndex, true);\n              } else {\n                // HACK reset temporarily cached item styles to force PureComponent to re-render.\n                // This is pretty gross, but I'm okay with it for now.\n                // Don't judge me.\n                if (typeof _this2._listRef._getItemStyleCache === 'function') {\n                  _this2._listRef._getItemStyleCache(-1);\n                }\n                _this2._listRef.forceUpdate();\n              }\n            }\n          });\n        }\n      });\n    }\n  }]);\n  return InfiniteLoader;\n}(PureComponent);\n\nexport default InfiniteLoader;\n","import SvgIcon from './SvgIcon';\n\nconst tick = (props) => ({\n  ...props,\n  shapes: [{ type: 'path', attrs: { d: 'M6,10 L13,3 L15,5 L8,12 L6,14 L1,9 L3,7 L6,10 Z' } }],\n});\n\nexport default (props) => SvgIcon(tick(props));\nexport { tick };\n","import React from 'react';\n\nimport { Grid, Typography } from '@material-ui/core';\n\nimport { makeStyles } from '@nebula.js/ui/theme';\n\nimport Lock from '@nebula.js/ui/icons/lock';\nimport Tick from '@nebula.js/ui/icons/tick';\n\nconst useStyles = makeStyles((theme) => ({\n  row: {\n    flexWrap: 'nowrap',\n    borderBottom: `1px solid ${theme.palette.divider}`,\n    '&:focus': {\n      boxShadow: `inset 0 0 0 2px ${theme.palette.custom.focusOutline}`,\n      outline: 'none',\n    },\n  },\n  cell: {\n    padding: '8px',\n    '& span': {\n      whiteSpace: 'nowrap',\n      fontSize: '12px',\n      lineHeight: '16px',\n    },\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n  },\n  icon: {\n    padding: theme.spacing(1),\n  },\n  S: {\n    background: theme.palette.selected.main,\n    color: theme.palette.selected.mainContrastText,\n    '&:focus': {\n      boxShadow: `inset 0 0 0 2px rgba(0, 0, 0, 0.3)`,\n      outline: 'none',\n    },\n  },\n  A: {\n    background: theme.palette.selected.alternative,\n    color: theme.palette.selected.alternativeContrastText,\n  },\n  X: {\n    background: theme.palette.selected.excluded,\n    color: theme.palette.selected.excludedContrastText,\n  },\n  highlighted: {\n    backgroundColor: '#FFC72A',\n  },\n}));\n\nexport default function Row({ index, style, data }) {\n  const classes = useStyles();\n  const classArr = [classes.row];\n\n  let label = '';\n  const { onClick, pages } = data;\n  let cell;\n  if (pages) {\n    const page = pages.filter((p) => p.qArea.qTop <= index && index < p.qArea.qTop + p.qArea.qHeight)[0];\n    if (page) {\n      const area = page.qArea;\n      if (index >= area.qTop && index < area.qTop + area.qHeight) {\n        [cell] = page.qMatrix[index - area.qTop];\n      }\n    }\n  }\n  let locked = false;\n  let selected = false;\n  if (cell) {\n    label = cell.qText;\n    locked = cell.qState === 'L' || cell.qState === 'XL';\n    selected = cell.qState === 'S' || cell.qState === 'XS';\n    if (cell.qState === 'S' || cell.qState === 'L') {\n      classArr.push(classes.S);\n    } else if (cell.qState === 'A') {\n      classArr.push(classes.A);\n    } else if (cell.qState === 'X' || cell.qState === 'XS' || cell.qState === 'XL') {\n      classArr.push(classes.X);\n    }\n  }\n\n  // Handle search highlights\n  const ranges =\n    (cell && cell.qHighlightRanges && cell.qHighlightRanges.qRanges.sort((a, b) => a.qCharPos - b.qCharPos)) || [];\n\n  const labels = ranges.reduce((acc, curr, ix) => {\n    // First non highlighted segment\n    if (curr.qCharPos > 0 && ix === 0) {\n      acc.push([label.slice(0, curr.qCharPos)]);\n    }\n\n    // Previous non highlighted segment\n    const prev = ranges[ix - 1];\n    if (prev) {\n      acc.push([label.slice(prev.qCharPos + prev.qCharPos + 1, curr.qCharPos)]);\n    }\n\n    // Highlighted segment\n    acc.push([label.slice(curr.qCharPos, curr.qCharPos + curr.qCharCount), classes.highlighted]);\n\n    // Last non highlighted segment\n    if (ix === ranges.length - 1 && curr.qCharPos + curr.qCharCount < label.length) {\n      acc.push([label.slice(curr.qCharPos + curr.qCharCount)]);\n    }\n    return acc;\n  }, []);\n\n  return (\n    <Grid\n      container\n      spacing={0}\n      className={classArr.join(' ').trim()}\n      style={style}\n      onClick={onClick}\n      role=\"row\"\n      tabIndex={0}\n      data-n={cell && cell.qElemNumber}\n    >\n      <Grid item style={{ minWidth: 0, flexGrow: 1 }} className={classes.cell}>\n        {ranges.length === 0 ? (\n          <Typography component=\"span\" noWrap color=\"inherit\">{`${label}`}</Typography>\n        ) : (\n          labels.map(([l, highlighted], ix) => (\n            // eslint-disable-next-line react/no-array-index-key\n            <Typography component=\"span\" key={ix} className={highlighted} noWrap>\n              {l}\n            </Typography>\n          ))\n        )}\n      </Grid>\n      <Grid item className={classes.icon}>\n        {locked && <Lock size=\"small\" />}\n        {selected && <Tick size=\"small\" />}\n      </Grid>\n    </Grid>\n  );\n}\n","/* eslint no-underscore-dangle:0 */\n\nimport React, {\n  useEffect,\n  useState,\n  useCallback,\n  useRef,\n  // useMemo,\n} from 'react';\n\nimport { FixedSizeList } from 'react-window';\nimport InfiniteLoader from 'react-window-infinite-loader';\n\nimport useLayout from '../../hooks/useLayout';\n\nimport Row from './ListBoxRow';\n\nexport default function ListBox({ model, selections, direction }) {\n  const [layout] = useLayout(model);\n  const [pages, setPages] = useState(null);\n  const loaderRef = useRef(null);\n  const local = useRef({\n    queue: [],\n    validPages: false,\n  });\n\n  const listData = useRef({\n    pages: [],\n  });\n\n  const onClick = useCallback(\n    (e) => {\n      if (layout && layout.qListObject.qDimensionInfo.qLocked) {\n        return;\n      }\n      const elemNumber = +e.currentTarget.getAttribute('data-n');\n      if (!Number.isNaN(elemNumber)) {\n        selections.select({\n          method: 'selectListObjectValues',\n          params: ['/qListObjectDef', [elemNumber], !layout.qListObject.qDimensionInfo.qIsOneAndOnlyOne],\n        });\n      }\n    },\n    [\n      model,\n      layout && !!layout.qListObject.qDimensionInfo.qLocked,\n      layout && !!layout.qListObject.qDimensionInfo.qIsOneAndOnlyOne,\n    ]\n  );\n\n  const isItemLoaded = useCallback(\n    (index) => {\n      if (!pages || !local.current.validPages) {\n        return false;\n      }\n      local.current.checkIdx = index;\n      const page = pages.filter((p) => p.qArea.qTop <= index && index < p.qArea.qTop + p.qArea.qHeight)[0];\n      return page && page.qArea.qTop <= index && index < page.qArea.qTop + page.qArea.qHeight;\n    },\n    [layout, pages]\n  );\n\n  const loadMoreItems = useCallback(\n    (startIndex, stopIndex) => {\n      local.current.queue.push({\n        start: startIndex,\n        stop: stopIndex,\n      });\n\n      const isScrolling = loaderRef.current ? loaderRef.current._listRef.state.isScrolling : false;\n\n      if (local.current.queue.length > 10) {\n        local.current.queue.shift();\n      }\n      clearTimeout(local.current.timeout);\n      return new Promise((resolve) => {\n        local.current.timeout = setTimeout(\n          () => {\n            const sorted = local.current.queue.slice(-2).sort((a, b) => a.start - b.start);\n            model\n              .getListObjectData(\n                '/qListObjectDef',\n                sorted.map((s) => ({\n                  qTop: s.start,\n                  qHeight: s.stop - s.start + 1,\n                  qLeft: 0,\n                  qWidth: 1,\n                }))\n              )\n              .then((p) => {\n                local.current.validPages = true;\n                listData.current.pages = p;\n                setPages(p);\n                resolve();\n              });\n          },\n          isScrolling ? 500 : 0\n        );\n      });\n    },\n    [layout]\n  );\n\n  useEffect(() => {\n    local.current.queue = [];\n    local.current.validPages = false;\n    if (loaderRef.current) {\n      loaderRef.current.resetloadMoreItemsCache(true);\n      // Skip scrollToItem if we are in selections\n      if (layout && layout.qSelectionInfo.qInSelections) {\n        return;\n      }\n      loaderRef.current._listRef.scrollToItem(0);\n    }\n  }, [layout]);\n\n  if (!layout) {\n    return null;\n  }\n\n  const count = layout.qListObject.qSize.qcy;\n  const ITEM_HEIGHT = 33;\n\n  return (\n    <InfiniteLoader\n      isItemLoaded={isItemLoaded}\n      itemCount={count}\n      loadMoreItems={loadMoreItems}\n      threshold={0}\n      minimumBatchSize={100}\n      ref={loaderRef}\n    >\n      {({ onItemsRendered, ref }) => {\n        local.current.listRef = ref;\n        return (\n          <FixedSizeList\n            direction={direction}\n            useIsScrolling\n            style={{}}\n            height={8 * ITEM_HEIGHT}\n            itemCount={count}\n            itemData={{ onClick, pages }}\n            itemSize={ITEM_HEIGHT}\n            onItemsRendered={onItemsRendered}\n            ref={ref}\n          >\n            {Row}\n          </FixedSizeList>\n        );\n      }}\n    </InfiniteLoader>\n  );\n}\n","import SvgIcon from './SvgIcon';\n\nconst selectAll = (props) => ({\n  ...props,\n  shapes: [\n    {\n      type: 'path',\n      attrs: {\n        d:\n          'M15.4,9 C15.8,9 16,9.3 16,9.6 L16,15.4 C16,15.7 15.8,16 15.4,16 L9.6,16 C9.3,16 9,15.8 9,15.4 L9,9.6 C9,9.3 9.3,9 9.6,9 L15.4,9 Z M15,10 L10,10 L10,15 L15,15 L15,10 Z M6.5,0 C6.8,0 7,0.3 7,0.6 L7,6.4 C7,6.8 6.8,7 6.5,7 L0.6,7 C0.3,7 0,6.8 0,6.5 L0,0.6 C0,0.3 0.3,0 0.6,0 L6.5,0 Z M6,2.8 C6.3,2.5 6.3,2.1 6.1,1.8 C5.9,1.5 5.4,1.6 5.1,1.9 L3.1,3.9 L2.4,3.2 C2.1,2.9 1.7,2.9 1.4,3.1 C1.2,3.3 1.2,3.8 1.5,4.1 L2.7,5.3 C3,5.6 3.4,5.6 3.7,5.3 L3.8,5.3 L6,2.8 Z M6.5,9 C6.8,9 7,9.3 7,9.6 L7,15.4 C7,15.8 6.8,16 6.5,16 L0.6,16 C0.3,16 0,15.8 0,15.4 L0,9.6 C0,9.3 0.3,9 0.6,9 L6.5,9 Z M6,11.8 C6.3,11.5 6.3,11.1 6.1,10.8 C5.9,10.6 5.4,10.6 5.1,10.8 L3.1,12.8 L2.3,12 C2,11.7 1.6,11.7 1.3,12 C1.1,12.3 1.1,12.7 1.4,13 L2.6,14.2 C2.9,14.5 3.3,14.5 3.6,14.3 L3.7,14.2 L6,11.8 Z M15.4,0 C15.8,0 16,0.3 16,0.6 L16,6.4 C16,6.8 15.8,7 15.4,7 L9.6,7 C9.3,7 9,6.8 9,6.5 L9,0.6 C9,0.3 9.3,0 9.6,0 L15.4,0 Z M15,2.8 C15.3,2.5 15.3,2.1 15.1,1.8 C14.9,1.5 14.4,1.6 14.1,1.9 L12.1,3.9 L11.3,3.1 C11,2.8 10.6,2.8 10.3,3 C10,3.2 10.1,3.7 10.3,4 L11.5,5.2 C11.8,5.5 12.2,5.5 12.5,5.2 L15,2.8 Z',\n      },\n    },\n  ],\n});\nexport default (props) => SvgIcon(selectAll(props));\nexport { selectAll };\n","import SvgIcon from './SvgIcon';\n\nconst selectAlternative = (props) => ({\n  ...props,\n  shapes: [\n    {\n      type: 'path',\n      attrs: {\n        d:\n          'M6,15.5 C6,15.2238576 6.22385763,15 6.5,15 L9.5,15 C9.77614237,15 10,15.2238576 10,15.5 C10,15.7761424 9.77614237,16 9.5,16 L6.5,16 C6.22385763,16 6,15.7761424 6,15.5 Z M1,13.5 L1,14.5 C1,14.7761424 1.22385763,15 1.5,15 L2.5,15 C2.77614237,15 3,15.2238576 3,15.5 C3,15.7761424 2.77614237,16 2.5,16 L1,16 C0.44771525,16 6.76353751e-17,15.5522847 0,15 L0,13.5 C-3.38176876e-17,13.2238576 0.223857625,13 0.5,13 C0.776142375,13 1,13.2238576 1,13.5 Z M15,13.5 C15,13.2238576 15.2238576,13 15.5,13 C15.7761424,13 16,13.2238576 16,13.5 L16,15 C16,15.5522847 15.5522847,16 15,16 L13.5,16 C13.2238576,16 13,15.7761424 13,15.5 C13,15.2238576 13.2238576,15 13.5,15 L14.5,15 C14.7761424,15 15,14.7761424 15,14.5 L15,13.5 Z M1,6.5 L1,9.5 C1,9.77614237 0.776142375,10 0.5,10 C0.223857625,10 3.38176876e-17,9.77614237 0,9.5 L0,6.5 C-3.38176876e-17,6.22385763 0.223857625,6 0.5,6 C0.776142375,6 1,6.22385763 1,6.5 Z M16,6.5 L16,9.5 C16,9.77614237 15.7761424,10 15.5,10 C15.2238576,10 15,9.77614237 15,9.5 L15,6.5 C15,6.22385763 15.2238576,6 15.5,6 C15.7761424,6 16,6.22385763 16,6.5 Z M0,2.5 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 L2.5,0 C2.77614237,-5.07265313e-17 3,0.223857625 3,0.5 C3,0.776142375 2.77614237,1 2.5,1 L1.5,1 C1.22385763,1 1,1.22385763 1,1.5 L1,2.5 C1,2.77614237 0.776142375,3 0.5,3 C0.223857625,3 3.38176876e-17,2.77614237 0,2.5 Z M6,0.5 C6,0.223857625 6.22385763,5.07265313e-17 6.5,0 L9.5,0 C9.77614237,-5.07265313e-17 10,0.223857625 10,0.5 C10,0.776142375 9.77614237,1 9.5,1 L6.5,1 C6.22385763,1 6,0.776142375 6,0.5 Z M15,2.5 L15,1.5 C15,1.22385763 14.7761424,1 14.5,1 L13.5,1 C13.2238576,1 13,0.776142375 13,0.5 C13,0.223857625 13.2238576,5.07265313e-17 13.5,0 L15,0 C15.5522847,-1.01453063e-16 16,0.44771525 16,1 L16,2.5 C16,2.77614237 15.7761424,3 15.5,3 C15.2238576,3 15,2.77614237 15,2.5 Z M4,4 L4,12 L12,4 L4,4 Z M4,3 L12,3 C12.5522847,3 13,3.44771525 13,4 L13,12 C13,12.5522847 12.5522847,13 12,13 L4,13 C3.44771525,13 3,12.5522847 3,12 L3,4 C3,3.44771525 3.44771525,3 4,3 Z',\n      },\n    },\n  ],\n});\nexport default (props) => SvgIcon(selectAlternative(props));\nexport { selectAlternative };\n","import SvgIcon from './SvgIcon';\n\nconst selectPossible = (props) => ({\n  ...props,\n  shapes: [\n    {\n      type: 'path',\n      attrs: {\n        d:\n          'M6,15.5 C6,15.2238576 6.22385763,15 6.5,15 L9.5,15 C9.77614237,15 10,15.2238576 10,15.5 C10,15.7761424 9.77614237,16 9.5,16 L6.5,16 C6.22385763,16 6,15.7761424 6,15.5 Z M1,13.5 L1,14.5 C1,14.7761424 1.22385763,15 1.5,15 L2.5,15 C2.77614237,15 3,15.2238576 3,15.5 C3,15.7761424 2.77614237,16 2.5,16 L1,16 C0.44771525,16 6.76353751e-17,15.5522847 0,15 L0,13.5 C-3.38176876e-17,13.2238576 0.223857625,13 0.5,13 C0.776142375,13 1,13.2238576 1,13.5 Z M15,13.5 C15,13.2238576 15.2238576,13 15.5,13 C15.7761424,13 16,13.2238576 16,13.5 L16,15 C16,15.5522847 15.5522847,16 15,16 L13.5,16 C13.2238576,16 13,15.7761424 13,15.5 C13,15.2238576 13.2238576,15 13.5,15 L14.5,15 C14.7761424,15 15,14.7761424 15,14.5 L15,13.5 Z M1,6.5 L1,9.5 C1,9.77614237 0.776142375,10 0.5,10 C0.223857625,10 3.38176876e-17,9.77614237 0,9.5 L0,6.5 C-3.38176876e-17,6.22385763 0.223857625,6 0.5,6 C0.776142375,6 1,6.22385763 1,6.5 Z M16,6.5 L16,9.5 C16,9.77614237 15.7761424,10 15.5,10 C15.2238576,10 15,9.77614237 15,9.5 L15,6.5 C15,6.22385763 15.2238576,6 15.5,6 C15.7761424,6 16,6.22385763 16,6.5 Z M0,2.5 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 L2.5,0 C2.77614237,-5.07265313e-17 3,0.223857625 3,0.5 C3,0.776142375 2.77614237,1 2.5,1 L1.5,1 C1.22385763,1 1,1.22385763 1,1.5 L1,2.5 C1,2.77614237 0.776142375,3 0.5,3 C0.223857625,3 3.38176876e-17,2.77614237 0,2.5 Z M6,0.5 C6,0.223857625 6.22385763,5.07265313e-17 6.5,0 L9.5,0 C9.77614237,-5.07265313e-17 10,0.223857625 10,0.5 C10,0.776142375 9.77614237,1 9.5,1 L6.5,1 C6.22385763,1 6,0.776142375 6,0.5 Z M15,2.5 L15,1.5 C15,1.22385763 14.7761424,1 14.5,1 L13.5,1 C13.2238576,1 13,0.776142375 13,0.5 C13,0.223857625 13.2238576,5.07265313e-17 13.5,0 L15,0 C15.5522847,-1.01453063e-16 16,0.44771525 16,1 L16,2.5 C16,2.77614237 15.7761424,3 15.5,3 C15.2238576,3 15,2.77614237 15,2.5 Z M4,4 L4,12 L12,12 L12,4 L4,4 Z M4,3 L12,3 C12.5522847,3 13,3.44771525 13,4 L13,12 C13,12.5522847 12.5522847,13 12,13 L4,13 C3.44771525,13 3,12.5522847 3,12 L3,4 C3,3.44771525 3.44771525,3 4,3 Z',\n      },\n    },\n  ],\n});\nexport default (props) => SvgIcon(selectPossible(props));\nexport { selectPossible };\n","import SvgIcon from './SvgIcon';\n\nconst selectExcluded = (props) => ({\n  ...props,\n  shapes: [\n    {\n      type: 'path',\n      attrs: {\n        d:\n          'M6,15.5 C6,15.2238576 6.22385763,15 6.5,15 L9.5,15 C9.77614237,15 10,15.2238576 10,15.5 C10,15.7761424 9.77614237,16 9.5,16 L6.5,16 C6.22385763,16 6,15.7761424 6,15.5 Z M1,13.5 L1,14.5 C1,14.7761424 1.22385763,15 1.5,15 L2.5,15 C2.77614237,15 3,15.2238576 3,15.5 C3,15.7761424 2.77614237,16 2.5,16 L1,16 C0.44771525,16 6.76353751e-17,15.5522847 0,15 L0,13.5 C-3.38176876e-17,13.2238576 0.223857625,13 0.5,13 C0.776142375,13 1,13.2238576 1,13.5 Z M15,13.5 C15,13.2238576 15.2238576,13 15.5,13 C15.7761424,13 16,13.2238576 16,13.5 L16,15 C16,15.5522847 15.5522847,16 15,16 L13.5,16 C13.2238576,16 13,15.7761424 13,15.5 C13,15.2238576 13.2238576,15 13.5,15 L14.5,15 C14.7761424,15 15,14.7761424 15,14.5 L15,13.5 Z M1,6.5 L1,9.5 C1,9.77614237 0.776142375,10 0.5,10 C0.223857625,10 3.38176876e-17,9.77614237 0,9.5 L0,6.5 C-3.38176876e-17,6.22385763 0.223857625,6 0.5,6 C0.776142375,6 1,6.22385763 1,6.5 Z M16,6.5 L16,9.5 C16,9.77614237 15.7761424,10 15.5,10 C15.2238576,10 15,9.77614237 15,9.5 L15,6.5 C15,6.22385763 15.2238576,6 15.5,6 C15.7761424,6 16,6.22385763 16,6.5 Z M0,2.5 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 L2.5,0 C2.77614237,-5.07265313e-17 3,0.223857625 3,0.5 C3,0.776142375 2.77614237,1 2.5,1 L1.5,1 C1.22385763,1 1,1.22385763 1,1.5 L1,2.5 C1,2.77614237 0.776142375,3 0.5,3 C0.223857625,3 3.38176876e-17,2.77614237 0,2.5 Z M6,0.5 C6,0.223857625 6.22385763,5.07265313e-17 6.5,0 L9.5,0 C9.77614237,-5.07265313e-17 10,0.223857625 10,0.5 C10,0.776142375 9.77614237,1 9.5,1 L6.5,1 C6.22385763,1 6,0.776142375 6,0.5 Z M15,2.5 L15,1.5 C15,1.22385763 14.7761424,1 14.5,1 L13.5,1 C13.2238576,1 13,0.776142375 13,0.5 C13,0.223857625 13.2238576,5.07265313e-17 13.5,0 L15,0 C15.5522847,-1.01453063e-16 16,0.44771525 16,1 L16,2.5 C16,2.77614237 15.7761424,3 15.5,3 C15.2238576,3 15,2.77614237 15,2.5 Z M4,3 L12,3 C12.5522847,3 13,3.44771525 13,4 L13,12 C13,12.5522847 12.5522847,13 12,13 L4,13 C3.44771525,13 3,12.5522847 3,12 L3,4 C3,3.44771525 3.44771525,3 4,3 Z',\n      },\n    },\n  ],\n});\nexport default (props) => SvgIcon(selectExcluded(props));\nexport { selectExcluded };\n","import SvgIcon from './SvgIcon';\n\nconst more = (props) => ({\n  ...props,\n  shapes: [\n    {\n      type: 'path',\n      attrs: {\n        d:\n          'M2,6.5 L3,6.5 C3.55228475,6.5 4,6.94771525 4,7.5 L4,8.5 C4,9.05228475 3.55228475,9.5 3,9.5 L2,9.5 C1.44771525,9.5 1,9.05228475 1,8.5 L1,7.5 C1,6.94771525 1.44771525,6.5 2,6.5 Z M7.5,6.5 L8.5,6.5 C9.05228475,6.5 9.5,6.94771525 9.5,7.5 L9.5,8.5 C9.5,9.05228475 9.05228475,9.5 8.5,9.5 L7.5,9.5 C6.94771525,9.5 6.5,9.05228475 6.5,8.5 L6.5,7.5 C6.5,6.94771525 6.94771525,6.5 7.5,6.5 Z M13,6.5 L14,6.5 C14.5522847,6.5 15,6.94771525 15,7.5 L15,8.5 C15,9.05228475 14.5522847,9.5 14,9.5 L13,9.5 C12.4477153,9.5 12,9.05228475 12,8.5 L12,7.5 C12,6.94771525 12.4477153,6.5 13,6.5 Z',\n      },\n    },\n  ],\n});\n\nexport default (props) => SvgIcon(more(props));\nexport { more };\n","import { useTheme } from '@nebula.js/ui/theme';\n\nexport default function useActionState(item) {\n  const theme = useTheme();\n  const disabled = typeof item.enabled === 'function' ? !item.enabled() : !!item.disabled;\n  const hasSvgIconShape = typeof item.getSvgIconShape === 'function';\n\n  return {\n    hidden: item.hidden === true,\n    disabled,\n    style: {\n      backgroundColor: item.active ? theme.palette.btn.active : undefined,\n    },\n    hasSvgIconShape,\n  };\n}\n","import React from 'react';\n\nimport { IconButton } from '@material-ui/core';\n\nimport SvgIcon from '@nebula.js/ui/icons/SvgIcon';\nimport { useTheme } from '@nebula.js/ui/theme';\n\nimport useActionState from '../hooks/useActionState';\n\nconst Item = React.forwardRef(({ item, addAnchor = false }, ref) => {\n  const theme = useTheme();\n  const { hidden, disabled, style, hasSvgIconShape } = useActionState(item);\n  if (hidden) return null;\n\n  return (\n    <IconButton\n      ref={!addAnchor ? ref : null}\n      title={item.label}\n      onClick={item.action}\n      disabled={disabled}\n      style={style}\n    >\n      {hasSvgIconShape && SvgIcon(item.getSvgIconShape())}\n      {addAnchor && (\n        <div\n          ref={ref}\n          style={{ bottom: -theme.spacing(0.5), right: 0, position: 'absolute', width: '100%', height: 0 }}\n        />\n      )}\n    </IconButton>\n  );\n});\n\nexport default Item;\n","import SvgIcon from './SvgIcon';\n\nconst close = (props) => ({\n  ...props,\n  shapes: [\n    {\n      type: 'path',\n      attrs: {\n        d:\n          'M9.34535242,8 L13.3273238,11.9819714 C13.6988326,12.3534802 13.6988326,12.955815 13.3273238,13.3273238 C12.955815,13.6988326 12.3534802,13.6988326 11.9819714,13.3273238 L8,9.34535242 L4.01802863,13.3273238 C3.64651982,13.6988326 3.04418502,13.6988326 2.67267621,13.3273238 C2.3011674,12.955815 2.3011674,12.3534802 2.67267621,11.9819714 L6.65464758,8 L2.67267621,4.01802863 C2.3011674,3.64651982 2.3011674,3.04418502 2.67267621,2.67267621 C3.04418502,2.3011674 3.64651982,2.3011674 4.01802863,2.67267621 L8,6.65464758 L11.9819714,2.67267621 C12.3534802,2.3011674 12.955815,2.3011674 13.3273238,2.67267621 C13.6988326,3.04418502 13.6988326,3.64651982 13.3273238,4.01802863 L9.34535242,8 Z',\n      },\n    },\n  ],\n});\n\nexport default (props) => SvgIcon(close(props));\nexport { close };\n","import SvgIcon from './SvgIcon';\n\nconst clearSelections = (props) => ({\n  ...props,\n  shapes: [\n    {\n      type: 'path',\n      attrs: {\n        d:\n          'M6,15.5 L6,15.5 C6,15.2238576 6.22385763,15 6.5,15 L9.5,15 C9.77614237,15 10,15.2238576 10,15.5 L10,15.5 C10,15.7761424 9.77614237,16 9.5,16 L6.5,16 C6.22385763,16 6,15.7761424 6,15.5 Z M1,13.5 L1,14.5 C1,14.7761424 1.22385763,15 1.5,15 L2.5,15 C2.77614237,15 3,15.2238576 3,15.5 L3,15.5 C3,15.7761424 2.77614237,16 2.5,16 L1,16 C0.44771525,16 6.76353751e-17,15.5522847 0,15 L0,13.5 C-3.38176876e-17,13.2238576 0.223857625,13 0.5,13 L0.5,13 C0.776142375,13 1,13.2238576 1,13.5 Z M1,6.5 L1,9.5 C1,9.77614237 0.776142375,10 0.5,10 L0.5,10 C0.223857625,10 3.38176876e-17,9.77614237 0,9.5 L0,6.5 C-3.38176876e-17,6.22385763 0.223857625,6 0.5,6 L0.5,6 C0.776142375,6 1,6.22385763 1,6.5 Z M0,2.5 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 L2.5,0 C2.77614237,-5.07265313e-17 3,0.223857625 3,0.5 L3,0.5 C3,0.776142375 2.77614237,1 2.5,1 L1.5,1 C1.22385763,1 1,1.22385763 1,1.5 L1,2.5 C1,2.77614237 0.776142375,3 0.5,3 L0.5,3 C0.223857625,3 3.38176876e-17,2.77614237 0,2.5 Z M6,0.5 L6,0.5 C6,0.223857625 6.22385763,5.07265313e-17 6.5,0 L9.5,0 C9.77614237,-5.07265313e-17 10,0.223857625 10,0.5 L10,0.5 C10,0.776142375 9.77614237,1 9.5,1 L6.5,1 C6.22385763,1 6,0.776142375 6,0.5 Z M15,2.5 L15,1.5 C15,1.22385763 14.7761424,1 14.5,1 L13.5,1 C13.2238576,1 13,0.776142375 13,0.5 L13,0.5 C13,0.223857625 13.2238576,5.07265313e-17 13.5,0 L15,0 C15.5522847,-1.01453063e-16 16,0.44771525 16,1 L16,2.5 C16,2.77614237 15.7761424,3 15.5,3 L15.5,3 C15.2238576,3 15,2.77614237 15,2.5 Z M9.1661442,6.1661442 C10.7210031,4.61128527 13.2789969,4.61128527 14.8338558,6.1661442 C16.3887147,7.72100313 16.3887147,10.2789969 14.8338558,11.8338558 C13.2789969,13.3887147 10.7210031,13.3887147 9.1661442,11.8338558 C7.61128527,10.2789969 7.61128527,7.77115987 9.1661442,6.1661442 Z M14.1316614,7.72100313 C14.3322884,7.52037618 14.3824451,7.169279 14.1316614,6.9184953 C13.8808777,6.6677116 13.5297806,6.71786834 13.3291536,6.9184953 L12.0250784,8.22257053 L10.7210031,6.9184953 C10.5203762,6.6677116 10.1191223,6.6677116 9.9184953,6.9184953 C9.6677116,7.11912226 9.6677116,7.52037618 9.9184953,7.72100313 L11.2225705,9.02507837 L9.9184953,10.3291536 C9.6677116,10.5297806 9.6677116,10.8808777 9.9184953,11.1316614 C10.169279,11.3824451 10.5203762,11.3824451 10.7210031,11.1316614 L12.0250784,9.82758621 L13.3291536,11.1316614 C13.5297806,11.3824451 13.8808777,11.3824451 14.1316614,11.1316614 C14.3322884,10.9310345 14.3824451,10.5297806 14.1316614,10.3291536 L12.8275862,9.02507837 L14.1316614,7.72100313 Z',\n      },\n    },\n  ],\n});\n\nexport default (props) => SvgIcon(clearSelections(props));\nexport { clearSelections };\n","import React from 'react';\n\nimport { makeStyles, Popover, MenuList, MenuItem, ListItemIcon, Typography } from '@material-ui/core';\n\nimport SvgIcon from '@nebula.js/ui/icons/SvgIcon';\n\nimport useActionState from '../hooks/useActionState';\n\nconst useStyles = makeStyles((theme) => ({\n  icon: {\n    color: theme.palette.text.primary,\n  },\n}));\n\nconst MoreItem = ({ item, onActionClick = () => {} }) => {\n  const { hidden, disabled, hasSvgIconShape } = useActionState(item);\n  const { icon } = useStyles();\n  const handleClick = () => {\n    item.action();\n    onActionClick();\n  };\n  return !hidden ? (\n    <MenuItem title={item.label} onClick={handleClick} disabled={disabled}>\n      {hasSvgIconShape && <ListItemIcon className={icon}>{SvgIcon(item.getSvgIconShape())}</ListItemIcon>}\n      <Typography noWrap>{item.label}</Typography>\n    </MenuItem>\n  ) : null;\n};\n\nconst More = React.forwardRef(\n  (\n    { actions = [], show = true, alignTo, popoverProps = {}, popoverPaperStyle = {}, onCloseOrActionClick = () => {} },\n    ref\n  ) => {\n    const showActions = actions.length > 0;\n\n    return (\n      showActions && (\n        <Popover\n          // eslint-disable-next-line react/jsx-props-no-spreading\n          {...popoverProps}\n          onClose={onCloseOrActionClick}\n          ref={ref}\n          open={show}\n          anchorEl={alignTo.current}\n          getContentAnchorEl={null}\n          container={alignTo.current}\n          disablePortal\n          hideBackdrop\n          style={{ pointerEvents: 'none' }}\n          transitionDuration={0}\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'right',\n          }}\n          transformOrigin={{\n            vertical: 'top',\n            horizontal: 'right',\n          }}\n          PaperProps={{\n            style: {\n              pointerEvents: 'auto',\n              maxWidth: '250px',\n              ...popoverPaperStyle,\n            },\n          }}\n        >\n          <MenuList>\n            {actions.map((item, ix) => (\n              // eslint-disable-next-line react/no-array-index-key\n              <MoreItem key={ix} item={item} onActionClick={onCloseOrActionClick} />\n            ))}\n          </MenuList>\n        </Popover>\n      )\n    );\n  }\n);\n\nexport default More;\n","import React, { useState, useContext, useRef, useEffect, useMemo } from 'react';\n\nimport { Grid, Divider, makeStyles, Popover } from '@material-ui/core';\n\nimport { more as moreIcon } from '@nebula.js/ui/icons/more';\nimport { useTheme } from '@nebula.js/ui/theme';\n\nimport Item from './ActionsToolbarItem';\nimport useDefaultSelectionActions from '../hooks/useDefaultSelectionActions';\nimport InstanceContext from '../contexts/InstanceContext';\nimport More from './ActionsToolbarMore';\n\nconst useStyles = makeStyles((theme) => ({\n  itemSpacing: {\n    padding: theme.spacing(0, 0.5),\n  },\n  firstItemSpacing: {\n    padding: theme.spacing(0, 0.5, 0, 0),\n  },\n  lastItemSpacing: {\n    padding: theme.spacing(0, 0, 0, 0.5),\n  },\n}));\n\nconst ActionsGroup = React.forwardRef(({ actions = [], first = false, last = false, addAnchor = false }, ref) => {\n  const { itemSpacing, firstItemSpacing, lastItemSpacing } = useStyles();\n  return actions.length > 0 ? (\n    <Grid item container spacing={0} wrap=\"nowrap\">\n      {actions.map((e, ix) => {\n        let cls = [];\n        const isFirstItem = first && ix === 0;\n        const isLastItem = last && actions.length - 1 === ix;\n        if (isFirstItem && !isLastItem) {\n          cls = [firstItemSpacing];\n        }\n        if (isLastItem && !isFirstItem) {\n          cls = [...cls, lastItemSpacing];\n        }\n        if (!isFirstItem && !isLastItem && cls.length === 0) {\n          cls = [itemSpacing];\n        }\n        return (\n          <Grid item key={e.key} className={cls.join(' ').trim()}>\n            <Item key={e.key} item={e} ref={ix === 0 ? ref : null} addAnchor={addAnchor} />\n          </Grid>\n        );\n      })}\n    </Grid>\n  ) : null;\n});\n\nconst popoverStyle = { pointerEvents: 'none' };\nconst popoverAnchorOrigin = {\n  vertical: 'top',\n  horizontal: 'right',\n};\nconst popoverTransformOrigin = {\n  vertical: 'bottom',\n  horizontal: 'right',\n};\n\nconst ActionsToolbar = ({\n  show = true,\n  actions = [],\n  maxItems = 3,\n  selections = {\n    show: false,\n    api: null,\n    onConfirm: () => {},\n    onCancel: () => {},\n  },\n  more = {\n    enabled: false,\n    actions: [],\n    alignTo: null,\n    popoverProps: {},\n    popoverPaperStyle: {},\n  },\n  popover = {\n    show: false,\n    anchorEl: null,\n  },\n}) => {\n  const defaultSelectionActions = useDefaultSelectionActions(selections);\n  const { itemSpacing } = useStyles();\n  const { translator } = useContext(InstanceContext);\n  const [showMoreItems, setShowMoreItems] = useState(false);\n  const [moreEnabled, setMoreEnabled] = useState(more.enabled);\n  const [moreActions, setMoreActions] = useState(more.actions);\n  const [moreAlignTo, setMoreAlignTo] = useState(more.alignTo);\n  const moreRef = useRef();\n  const theme = useTheme();\n  const dividerStyle = useMemo(() => ({ margin: theme.spacing(0.5, 0) }));\n\n  useEffect(() => {\n    return () => setShowMoreItems(false);\n  }, [popover.show]);\n\n  useEffect(() => {\n    setMoreEnabled(more.enabled);\n  }, [more.enabled]);\n\n  const newActions = useMemo(() => actions.filter((a) => !a.hidden), [actions]);\n\n  if (!selections.show && newActions.length === 0) return null;\n\n  const handleCloseShowMoreItems = () => {\n    setShowMoreItems(false);\n  };\n\n  const moreItem = {\n    key: 'more',\n    label: translator.get('Menu.More'), // TODO: Add translation\n    getSvgIconShape: moreIcon,\n    hidden: false,\n    enabled: () => moreEnabled,\n    action: () => setShowMoreItems(!showMoreItems),\n  };\n\n  if (newActions.length > maxItems) {\n    const newMoreActions = newActions.splice(-(newActions.length - maxItems) - 1);\n    setMoreEnabled(true);\n    setMoreActions([...newMoreActions, ...more.actions]);\n    setMoreAlignTo(moreRef);\n  }\n\n  const showActions = newActions.length > 0;\n  const showMore = moreActions.length > 0;\n  const showDivider = (showActions && selections.show) || (showMore && selections.show);\n\n  const Actions = (\n    <Grid container spacing={0} wrap=\"nowrap\">\n      {showActions && <ActionsGroup actions={newActions} first last={!showMore && !selections.show} />}\n      {showMore && (\n        <ActionsGroup ref={moreRef} actions={[moreItem]} first={!showActions} last={!selections.show} addAnchor />\n      )}\n      {showDivider && (\n        <Grid item className={itemSpacing} style={dividerStyle}>\n          <Divider orientation=\"vertical\" />\n        </Grid>\n      )}\n      {selections.show && <ActionsGroup actions={defaultSelectionActions} first={!showActions && !showMore} last />}\n      {showMoreItems && (\n        <More\n          show={showMoreItems}\n          actions={moreActions}\n          alignTo={moreAlignTo}\n          popoverProps={more.popoverProps}\n          popoverPaperStyle={more.popoverPaperStyle}\n          onCloseOrActionClick={handleCloseShowMoreItems}\n        />\n      )}\n    </Grid>\n  );\n\n  return popover.show ? (\n    <Popover\n      disableEnforceFocus\n      open={popover.show}\n      anchorEl={popover.anchorEl}\n      anchorOrigin={popoverAnchorOrigin}\n      transformOrigin={popoverTransformOrigin}\n      hideBackdrop\n      style={popoverStyle}\n      PaperProps={{\n        style: {\n          pointerEvents: 'auto',\n          padding: theme.spacing(1, 1),\n        },\n      }}\n    >\n      {Actions}\n    </Popover>\n  ) : (\n    show && Actions\n  );\n};\n\nexport default ActionsToolbar;\n","import { useContext } from 'react';\n\nimport { close } from '@nebula.js/ui/icons/close';\nimport { tick } from '@nebula.js/ui/icons/tick';\nimport { clearSelections } from '@nebula.js/ui/icons/clear-selections';\nimport InstanceContext from '../contexts/InstanceContext';\n\nexport default function useDefaultSelectionActions({ api, onConfirm = () => {}, onCancel = () => {} }) {\n  const { translator } = useContext(InstanceContext);\n  return [\n    {\n      key: 'clear',\n      type: 'icon-button',\n      label: translator.get('Selection.Clear'),\n      enabled: () => api.canClear(),\n      action: () => api.clear(),\n      getSvgIconShape: clearSelections,\n    },\n    {\n      key: 'cancel',\n      type: 'icon-button',\n      label: translator.get('Selection.Cancel'),\n      enabled: () => api.canCancel(),\n      action: () => {\n        api.cancel();\n        onCancel();\n      },\n      getSvgIconShape: close,\n    },\n    {\n      key: 'confirm',\n      type: 'icon-button',\n      label: translator.get('Selection.Confirm'),\n      enabled: () => api.canConfirm(),\n      action: () => {\n        api.confirm();\n        onConfirm();\n      },\n      getSvgIconShape: tick,\n    },\n  ];\n}\n","import SvgIcon from './SvgIcon';\n\nconst search = (props) => ({\n  ...props,\n  shapes: [\n    {\n      type: 'path',\n      attrs: {\n        d:\n          'M15.7873809,13.80959 C16.1870614,14.209868 15.9872212,15.1104934 15.4876205,15.5107714 C15.08794,15.9110493 14.1886588,16.2112578 13.7889782,15.8109798 L11.0911347,13.1091035 L10.9912145,12.5086866 L10.2917736,11.8082001 C9.19265216,12.5086866 7.89369045,13.0090341 6.49480859,13.0090341 C2.89768383,13.0090341 0,10.1070188 0,6.50451703 C0,2.90201529 2.89768383,0 6.49480859,0 C10.0919334,0 12.9896172,2.90201529 12.9896172,6.50451703 C12.9896172,7.90548992 12.4900165,9.20639333 11.7905756,10.3071577 L12.4900165,11.0076442 L13.0895373,11.1077137 L15.7873809,13.80959 Z M11.2909749,6.50451703 C11.2909749,5.20361362 10.7913743,4.00277971 9.89209309,3.00208478 C8.9928119,2.10145935 7.79377031,1.60111188 6.49480859,1.60111188 C5.19584688,1.60111188 3.99680529,2.10145935 2.99760397,3.00208478 C2.09832278,4.00277971 1.59872212,5.20361362 1.59872212,6.50451703 C1.59872212,7.80542043 2.09832278,9.00625434 2.99760397,9.90687978 C3.89688516,10.8075052 5.09592674,11.3078527 6.49480859,11.3078527 C7.79377031,11.4079222 8.9928119,10.9075747 9.89209309,9.90687978 C10.7913743,9.00625434 11.2909749,7.80542043 11.2909749,6.50451703 Z',\n      },\n    },\n  ],\n});\nexport default (props) => SvgIcon(search(props));\nexport { search as remove };\n","import React, { useContext, useState } from 'react';\nimport { InputAdornment, OutlinedInput } from '@material-ui/core';\nimport Search from '@nebula.js/ui/icons/search';\n\nimport { makeStyles } from '@nebula.js/ui/theme';\n\nimport InstanceContext from '../../contexts/InstanceContext';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    '& fieldset': {\n      borderRadius: 0,\n      borderColor: `${theme.palette.divider} transparent`,\n    },\n  },\n}));\nconst TREE_PATH = '/qListObjectDef';\n\nexport default function ListBoxSearch({ model }) {\n  const { translator } = useContext(InstanceContext);\n  const [value, setValue] = useState('');\n  const onChange = (e) => {\n    setValue(e.target.value);\n    model.searchListObjectFor(TREE_PATH, e.target.value);\n  };\n  const onKeyDown = (e) => {\n    switch (e.key) {\n      case 'Enter':\n        model.acceptListObjectSearch(TREE_PATH, true);\n        setValue('');\n        break;\n      case 'Escape':\n        model.abortListObjectSearch(TREE_PATH);\n        break;\n      default:\n        break;\n    }\n  };\n\n  const classes = useStyles();\n\n  return (\n    <OutlinedInput\n      startAdornment={\n        <InputAdornment position=\"start\">\n          <Search />\n        </InputAdornment>\n      }\n      className={[classes.root].join(' ')}\n      autoFocus\n      margin=\"dense\"\n      fullWidth\n      placeholder={translator.get('Listbox.Search')}\n      value={value}\n      onChange={onChange}\n      onKeyDown={onKeyDown}\n    />\n  );\n}\n","/* eslint no-underscore-dangle: 0 */\nimport { useEffect } from 'react';\nimport { useObjectSelectionsStore, useAppModalStore } from '../stores/selections-store';\nimport useAppSelections from './useAppSelections';\nimport eventmixin from '../selections/event-mixin';\nimport useLayout from './useLayout';\n\nconst event = () => {\n  let prevented = false;\n  return {\n    isPrevented: () => prevented,\n    preventDefault: () => {\n      prevented = true;\n    },\n  };\n};\n\nfunction createObjectSelections({ appSelections, appModal, model }) {\n  let layout;\n  let isActive = false;\n  let hasSelected = false;\n\n  /**\n   * @class\n   * @alias ObjectSelections\n   * @hideconstructor\n   */\n  const api = /** @lends ObjectSelections# */ {\n    // model,\n    id: model.id,\n    setLayout(lyt) {\n      layout = lyt;\n    },\n    /**\n     * @param {string[]} paths\n     * @returns {Promise<undefined>}\n     */\n    begin(paths) {\n      const e = event();\n      // TODO - event as parameter?\n      this.emit('activate', e);\n      if (e.isPrevented()) {\n        return Promise.resolve();\n      }\n      isActive = true;\n      this.emit('activated');\n      return appModal.begin(model, paths, true);\n    },\n    /**\n     * @returns {Promise<undefined>}\n     */\n    clear() {\n      hasSelected = false;\n      this.emit('cleared');\n      if (layout.qListObject) {\n        return model.clearSelections('/qListObjectDef');\n      }\n      return model.resetMadeSelections();\n    },\n    /**\n     * @returns {Promise<undefined>}\n     */\n    confirm() {\n      hasSelected = false;\n      isActive = false;\n      this.emit('confirmed');\n      this.emit('deactivated');\n      return appModal.end(true);\n    },\n    /**\n     * @returns {Promise<undefined>}\n     */\n    cancel() {\n      hasSelected = false;\n      isActive = false;\n      this.emit('canceled'); // FIXME - spelling?\n      this.emit('deactivated');\n      return appModal.end(false);\n    },\n    /**\n     * @param {object} s\n     * @param {string} s.method\n     * @param {any[]} s.params\n     * @returns {Promise<boolean>}\n     */\n    async select(s) {\n      const b = this.begin([s.params[0]]);\n      if (!appSelections.isModal()) {\n        return false;\n      }\n      await b;\n      const qSuccess = await model[s.method](...s.params);\n      hasSelected = s.method !== 'resetMadeSelections';\n      if (!qSuccess) {\n        model.resetMadeSelections();\n        return false;\n      }\n      return true;\n    },\n    /**\n     * @returns {boolean}\n     */\n    canClear() {\n      if (layout && layout.qListObject && layout.qListObject.qDimensionInfo) {\n        return !layout.qListObject.qDimensionInfo.qLocked;\n      }\n      return hasSelected;\n    },\n    /**\n     * @returns {boolean}\n     */\n    canConfirm() {\n      if (layout && layout.qListObject && layout.qListObject.qDimensionInfo) {\n        return !layout.qListObject.qDimensionInfo.qLocked;\n      }\n      return hasSelected;\n    },\n    /**\n     * @returns {boolean}\n     */\n    canCancel() {\n      if (layout && layout.qListObject && layout.qListObject.qDimensionInfo) {\n        return !layout.qListObject.qDimensionInfo.qLocked;\n      }\n      return true;\n    },\n    /**\n     * @returns {boolean}\n     */\n    isActive: () => isActive,\n    /**\n     * @returns {boolean}\n     */\n    isModal: () => appSelections.isModal(model),\n    /**\n     * @param {string[]} paths\n     * @returns {Promise<undefined>}\n     */\n    goModal: (paths) => appModal.begin(model, paths, false),\n    /**\n     * @param {boolean} [accept=false]\n     * @returns {Promise<undefined>}\n     */\n    noModal: (accept = false) => appModal.end(accept),\n  };\n\n  eventmixin(api);\n\n  return api;\n}\n\nexport default function useObjectSelections(app, model) {\n  const [appSelections] = useAppSelections(app);\n  const [layout] = useLayout(model);\n  const key = model ? model.id : null;\n  const [appModalStore] = useAppModalStore();\n  const [objectSelectionsStore] = useObjectSelectionsStore();\n  const appModal = appModalStore.get(app.id);\n  let objectSelections = objectSelectionsStore.get(key);\n\n  useEffect(() => {\n    if (!appSelections || !model || objectSelections) return;\n\n    objectSelections = createObjectSelections({ appSelections, appModal, model });\n    objectSelectionsStore.set(key, objectSelections);\n    objectSelectionsStore.dispatch(true);\n  }, [appSelections, model]);\n\n  useEffect(() => {\n    if (!objectSelections) return;\n\n    objectSelections.setLayout(layout);\n  }, [objectSelections, layout]);\n\n  return [objectSelections];\n}\n","import EventEmitter from 'node-event-emitter';\n\nexport default function (obj) {\n  /* eslint no-param-reassign: 0 */\n  Object.keys(EventEmitter.prototype).forEach((key) => {\n    obj[key] = EventEmitter.prototype[key];\n  });\n  EventEmitter.init(obj);\n  return obj;\n}\n","import React, { useContext, useCallback, useRef, useEffect } from 'react';\n\nimport Lock from '@nebula.js/ui/icons/lock';\nimport Unlock from '@nebula.js/ui/icons/unlock';\n\nimport { IconButton, Popover, Grid } from '@material-ui/core';\n\nimport { useTheme } from '@nebula.js/ui/theme';\nimport useSessionModel from '../../hooks/useSessionModel';\nimport useLayout from '../../hooks/useLayout';\n\nimport ListBox from './ListBox';\nimport createListboxSelectionToolbar from './listbox-selection-toolbar';\n\nimport ActionsToolbar from '../ActionsToolbar';\n\nimport InstanceContext from '../../contexts/InstanceContext';\n\nimport ListBoxSearch from './ListBoxSearch';\nimport useObjectSelections from '../../hooks/useObjectSelections';\n\nexport default function ListBoxPopover({ alignTo, show, close, app, fieldName, stateName = '$' }) {\n  const open = show && Boolean(alignTo.current);\n  const theme = useTheme();\n  const [model] = useSessionModel(\n    {\n      qInfo: {\n        qType: 'njsListbox',\n      },\n      qListObjectDef: {\n        qStateName: stateName,\n        qShowAlternatives: true,\n        qInitialDataFetch: [\n          {\n            qTop: 0,\n            qLeft: 0,\n            qWidth: 0,\n            qHeight: 0,\n          },\n        ],\n        qDef: {\n          qSortCriterias: [\n            {\n              qSortByState: 1,\n              qSortByAscii: 1,\n              qSortByNumeric: 1,\n              qSortByLoadOrder: 1,\n            },\n          ],\n          qFieldDefs: [fieldName],\n        },\n      },\n    },\n    app,\n    fieldName,\n    stateName\n  );\n\n  const lock = useCallback(() => {\n    model.lock('/qListObjectDef');\n  }, [model]);\n\n  const unlock = useCallback(() => {\n    model.unlock('/qListObjectDef');\n  }, [model]);\n\n  const { translator } = useContext(InstanceContext);\n  const moreAlignTo = useRef();\n  const [selections] = useObjectSelections(app, model);\n  const [layout] = useLayout(model);\n\n  useEffect(() => {\n    if (selections && open) {\n      if (!selections.isModal(model)) {\n        selections.goModal('/qListObjectDef');\n      }\n    }\n  }, [selections, open]);\n\n  if (!model || !layout || !translator) {\n    return null;\n  }\n\n  const isLocked = layout.qListObject.qDimensionInfo.qLocked === true;\n\n  const popoverClose = (e, reason) => {\n    const accept = reason !== 'escapeKeyDown';\n    selections.noModal(accept);\n    close();\n  };\n\n  const listboxSelectionToolbarItems = createListboxSelectionToolbar({\n    layout,\n    model,\n    translator,\n  });\n\n  const counts = layout.qListObject.qDimensionInfo.qStateCounts;\n\n  const hasSelections = counts.qSelected + counts.qSelectedExcluded + counts.qLocked + counts.qLockedExcluded > 0;\n\n  return (\n    <Popover\n      open={open}\n      onClose={popoverClose}\n      anchorEl={alignTo.current}\n      anchorOrigin={{\n        vertical: 'bottom',\n        horizontal: 'center',\n      }}\n      transformOrigin={{\n        vertical: 'top',\n        horizontal: 'center',\n      }}\n      PaperProps={{\n        style: { minWidth: '250px' },\n      }}\n    >\n      <Grid container direction=\"column\" spacing={0}>\n        <Grid item container style={{ padding: theme.spacing(1) }}>\n          <Grid item>\n            {isLocked ? (\n              <IconButton onClick={unlock} disabled={!isLocked}>\n                <Lock />\n              </IconButton>\n            ) : (\n              <IconButton onClick={lock} disabled={!hasSelections}>\n                <Unlock />\n              </IconButton>\n            )}\n          </Grid>\n          <Grid item xs />\n          <Grid item>\n            <ActionsToolbar\n              more={{\n                enabled: !isLocked,\n                actions: listboxSelectionToolbarItems,\n                alignTo: moreAlignTo,\n                popoverProps: {\n                  elevation: 0,\n                },\n                popoverPaperStyle: {\n                  boxShadow: '0 12px 8px -8px rgba(0, 0, 0, 0.2)',\n                  minWidth: '250px',\n                },\n              }}\n              selections={{\n                show: true,\n                api: selections,\n                onConfirm: popoverClose,\n                onCancel: () => popoverClose(null, 'escapeKeyDown'),\n              }}\n            />\n          </Grid>\n        </Grid>\n        <Grid item xs>\n          <div ref={moreAlignTo} />\n          <ListBoxSearch model={model} />\n          <ListBox model={model} selections={selections} direction=\"ltr\" />\n        </Grid>\n      </Grid>\n    </Popover>\n  );\n}\n","import { selectAll } from '@nebula.js/ui/icons/select-all';\nimport { selectAlternative } from '@nebula.js/ui/icons/select-alternative';\nimport { selectPossible } from '@nebula.js/ui/icons/select-possible';\nimport { selectExcluded } from '@nebula.js/ui/icons/select-excluded';\n\nexport default ({ layout, model, translator }) => {\n  const canSelectAll = () => {\n    return ['qOption', 'qAlternative', 'qExcluded', 'qDeselected'].some((sc) => {\n      return layout.qListObject.qDimensionInfo.qStateCounts[sc] > 0;\n    });\n  };\n  const canSelectPossible = () => {\n    return ['qOption'].some((sc) => {\n      return layout.qListObject.qDimensionInfo.qStateCounts[sc] > 0;\n    });\n  };\n  const canSelectAlternative = () => {\n    return ['qAlternative'].some((sc) => {\n      return layout.qListObject.qDimensionInfo.qStateCounts[sc] > 0;\n    });\n  };\n  const canSelectExcluded = () => {\n    return ['qAlternative', 'qExcluded'].some((sc) => {\n      return layout.qListObject.qDimensionInfo.qStateCounts[sc] > 0;\n    });\n  };\n\n  return [\n    {\n      key: 'selectAll',\n      type: 'menu-icon-button',\n      label: translator.get('Selection.SelectAll'),\n      getSvgIconShape: selectAll,\n      enabled: canSelectAll,\n      action: () => {\n        model.selectListObjectAll('/qListObjectDef');\n      },\n    },\n    {\n      key: 'selectPossible',\n      type: 'menu-icon-button',\n      label: translator.get('Selection.SelectPossible'),\n      getSvgIconShape: selectPossible,\n      enabled: canSelectPossible,\n      action: () => {\n        model.selectListObjectPossible('/qListObjectDef');\n      },\n    },\n    {\n      key: 'selectAlternative',\n      type: 'menu-icon-button',\n      label: translator.get('Selection.SelectAlternative'),\n      getSvgIconShape: selectAlternative,\n      enabled: canSelectAlternative,\n      action: () => {\n        model.selectListObjectAlternative('/qListObjectDef');\n      },\n    },\n    {\n      key: 'selectExcluded',\n      type: 'menu-icon-button',\n      label: translator.get('Selection.SelectExcluded'),\n      getSvgIconShape: selectExcluded,\n      enabled: canSelectExcluded,\n      action: () => {\n        model.selectListObjectExcluded('/qListObjectDef');\n      },\n    },\n  ];\n};\n","import React, { useRef, useState, useContext } from 'react';\n\nimport Remove from '@nebula.js/ui/icons/remove';\nimport Lock from '@nebula.js/ui/icons/lock';\n\nimport { IconButton, Grid, Typography } from '@material-ui/core';\n\nimport { makeStyles, useTheme } from '@nebula.js/ui/theme';\n\nimport ListBoxPopover from '../listbox/ListBoxPopover';\n\nimport InstanceContext from '../../contexts/InstanceContext';\n\nconst useStyles = makeStyles((theme) => ({\n  item: {\n    backgroundColor: theme.palette.background.paper,\n    position: 'relative',\n    cursor: 'pointer',\n    padding: '4px',\n    '&:hover': {\n      backgroundColor: theme.palette.action.hover,\n    },\n  },\n}));\n\nexport default function OneField({\n  field,\n  api,\n  stateIx = 0,\n  skipHandleShowListBoxPopover = false,\n  moreAlignTo = null,\n  onClose = () => {},\n}) {\n  const { translator } = useContext(InstanceContext);\n  const alignTo = moreAlignTo || useRef();\n  const theme = useTheme();\n  const [showListBoxPopover, setShowListBoxPopover] = useState(false);\n\n  const classes = useStyles();\n\n  const handleShowListBoxPopover = (e) => {\n    if (e.currentTarget.contains(e.target)) {\n      // because click in popover will propagate to parent\n      setShowListBoxPopover(!showListBoxPopover);\n    }\n  };\n\n  const handleCloseShowListBoxPopover = () => {\n    setShowListBoxPopover(false);\n    onClose();\n  };\n\n  const selection = field.selections[stateIx];\n  if (typeof selection.qTotal === 'undefined') {\n    selection.qTotal = 0;\n  }\n  const counts = selection.qStateCounts || {\n    qSelected: 0,\n    qLocked: 0,\n    qExcluded: 0,\n    qLockedExcluded: 0,\n    qSelectedExcluded: 0,\n    qAlternative: 0,\n  };\n  const green = (counts.qSelected + counts.qLocked) / selection.qTotal;\n  const white = counts.qAlternative / selection.qTotal;\n  const grey = (counts.qExcluded + counts.qLockedExcluded + counts.qSelectedExcluded) / selection.qTotal;\n\n  const numSelected = counts.qSelected + counts.qSelectedExcluded + counts.qLocked + counts.qLockedExcluded;\n  // Maintain modal state in app selections\n  const noSegments = numSelected === 0 && selection.qTotal === 0;\n  let label = '';\n  if (selection.qTotal === numSelected && selection.qTotal > 1) {\n    label = translator.get('CurrentSelections.All');\n  } else if (numSelected > 1 && selection.qTotal) {\n    label = translator.get('CurrentSelections.Of', [numSelected, selection.qTotal]);\n  } else if (selection.qSelectedFieldSelectionInfo) {\n    label = selection.qSelectedFieldSelectionInfo.map((v) => v.qName).join(', ');\n  }\n  if (field.states[stateIx] !== '$') {\n    label = `${field.states[stateIx]}: ${label}`;\n  }\n\n  const segments = [\n    { color: theme.palette.selected.main, ratio: green },\n    { color: theme.palette.selected.alternative, ratio: white },\n    { color: theme.palette.selected.excluded, ratio: grey },\n  ];\n  segments.forEach((s, i) => {\n    s.offset = i ? segments[i - 1].offset + segments[i - 1].ratio : 0; // eslint-disable-line\n  });\n\n  let Header = null;\n  let Icon = null;\n  let SegmentsIndicator = null;\n  let Component = null;\n  if (!moreAlignTo) {\n    Header = (\n      <Grid item xs style={{ minWidth: 0, flexGrow: 1, opacity: selection.qLocked ? '0.3' : '' }}>\n        <Typography noWrap style={{ fontSize: '12px', lineHeight: '16px', fontWeight: 600 }}>\n          {selection.qField}\n        </Typography>\n        <Typography noWrap style={{ fontSize: '12px', opacity: 0.55, lineHeight: '16px' }}>\n          {label}\n        </Typography>\n      </Grid>\n    );\n\n    Icon = selection.qLocked ? (\n      <Grid item>\n        <IconButton>\n          <Lock />\n        </IconButton>\n      </Grid>\n    ) : (\n      <Grid item>\n        <IconButton\n          title={translator.get('Selection.Clear')}\n          onClick={(e) => {\n            e.stopPropagation();\n            api.clearField(selection.qField, field.states[stateIx]);\n          }}\n          style={{ zIndex: 1 }}\n        >\n          <Remove />\n        </IconButton>\n      </Grid>\n    );\n    SegmentsIndicator = (\n      <div\n        style={{\n          height: '4px',\n          position: 'absolute',\n          bottom: '0',\n          left: '0',\n          width: '100%',\n        }}\n      >\n        {noSegments === false &&\n          segments.map((s) => (\n            <div\n              key={s.color}\n              style={{\n                position: 'absolute',\n                background: s.color,\n                height: '100%',\n                top: 0,\n                width: `${s.ratio * 100}%`,\n                left: `${s.offset * 100}%`,\n              }}\n            />\n          ))}\n      </div>\n    );\n    Component = (\n      <Grid\n        container\n        spacing={0}\n        ref={alignTo}\n        className={classes.item}\n        onClick={(skipHandleShowListBoxPopover === false && handleShowListBoxPopover) || null}\n      >\n        {Header}\n        {Icon}\n        {SegmentsIndicator}\n        {showListBoxPopover && (\n          <ListBoxPopover\n            alignTo={alignTo}\n            show={showListBoxPopover}\n            close={handleCloseShowListBoxPopover}\n            app={api.model}\n            fieldName={selection.qField}\n            stateName={field.states[stateIx]}\n          />\n        )}\n      </Grid>\n    );\n  }\n  return moreAlignTo ? (\n    <ListBoxPopover\n      alignTo={alignTo}\n      show\n      close={handleCloseShowListBoxPopover}\n      app={api.model}\n      fieldName={selection.qField}\n      stateName={field.states[stateIx]}\n    />\n  ) : (\n    Component\n  );\n}\n","import SvgIcon from './SvgIcon';\n\nconst downArrow = (props) => ({\n  ...props,\n  shapes: [{ type: 'path', attrs: { d: 'M8,9 L12.5,4.5 L14,6 L9.5,10.5 L8,12 L2,6 L3.5,4.5 L8,9 Z' } }],\n});\nexport default (props) => SvgIcon(downArrow(props));\nexport { downArrow };\n","import React, { useState, useContext, useRef } from 'react';\nimport { Badge, IconButton, Grid, Typography, Popover, Button, List, ListItem, Box } from '@material-ui/core';\nimport { makeStyles } from '@nebula.js/ui/theme';\nimport DownArrow from '@nebula.js/ui/icons/down-arrow';\n\nimport OneField from './OneField';\nimport InstanceContext from '../../contexts/InstanceContext';\n\nimport ListBoxPopover from '../listbox/ListBoxPopover';\n\nconst useStyles = makeStyles((theme) => ({\n  item: {\n    backgroundColor: theme.palette.background.paper,\n    position: 'relative',\n    cursor: 'pointer',\n    padding: '4px',\n    '&:hover': {\n      backgroundColor: theme.palette.action.hover,\n    },\n    height: '100%',\n    alignItems: 'center',\n  },\n  badge: {\n    padding: theme.spacing(0, 1),\n  },\n}));\n\nexport default function MultiState({ field, api, moreAlignTo = null, onClose = () => {} }) {\n  const classes = useStyles();\n  // If originated from the `more` item show fields directly\n  const [showFields, setShowFields] = useState(!!moreAlignTo);\n  const [showStateIx, setShowStateIx] = useState(-1);\n  // If originated from the `more` item align it\n  const [anchorEl, setAnchorEl] = useState(moreAlignTo ? moreAlignTo.current : null);\n  const alignTo = moreAlignTo || useRef();\n  const { translator } = useContext(InstanceContext);\n  const clearAllStates = translator.get('Selection.ClearAllStates');\n\n  const handleShowFields = (e) => {\n    if (e.currentTarget.contains(e.target)) {\n      // because click in popover will propagate to parent\n      setAnchorEl(e.currentTarget);\n      alignTo.current = e.currentTarget;\n      setShowFields(!showFields);\n    }\n  };\n\n  const handleCloseShowFields = () => {\n    setShowFields(false);\n    onClose();\n  };\n\n  const handleShowState = (e, ix) => {\n    e.stopPropagation();\n    setShowFields(false);\n    setShowStateIx(ix);\n  };\n\n  const handleCloseShowState = () => {\n    setShowStateIx(-1);\n    onClose();\n  };\n\n  const handleClearAllStates = () => {\n    field.states.forEach((s) => api.clearField(field.name, s));\n  };\n\n  let Header = null;\n  if (!moreAlignTo) {\n    Header = (\n      <>\n        <Grid item xs zeroMinWidth>\n          <Badge className={classes.badge} color=\"secondary\" badgeContent={field.states.length}>\n            <Typography component=\"span\" noWrap style={{ fontSize: '12px', lineHeight: '16px', fontWeight: 600 }}>\n              {field.name}\n            </Typography>\n          </Badge>\n        </Grid>\n        <Grid item>\n          <div style={{ width: '12px' }} />\n        </Grid>\n        <Grid item>\n          <IconButton>\n            <DownArrow />\n          </IconButton>\n        </Grid>\n      </>\n    );\n  }\n  const Fields = (\n    <List dense>\n      <ListItem title={clearAllStates} onClick={handleClearAllStates}>\n        <Button variant=\"contained\" fullWidth>\n          {clearAllStates}\n        </Button>\n      </ListItem>\n      {field.states.map((s, ix) => (\n        // eslint-disable-next-line react/no-array-index-key\n        <ListItem key={ix} title={field.name} onClick={(e) => handleShowState(e, ix)}>\n          <Box border={1} width=\"100%\" borderRadius=\"borderRadius\" borderColor=\"divider\">\n            <OneField field={field} api={api} stateIx={ix} skipHandleShowListBoxPopover />\n          </Box>\n        </ListItem>\n      ))}\n    </List>\n  );\n  const PopoverFields = (\n    <Popover\n      open={showFields}\n      onClose={handleCloseShowFields}\n      anchorEl={anchorEl}\n      anchorOrigin={{\n        vertical: 'bottom',\n        horizontal: 'center',\n      }}\n      transformOrigin={{\n        vertical: 'top',\n        horizontal: 'center',\n      }}\n      PaperProps={{\n        style: {\n          minWidth: '200px',\n          width: '200px',\n          pointerEvents: 'auto',\n        },\n      }}\n    >\n      {Fields}\n    </Popover>\n  );\n\n  const Component = moreAlignTo ? (\n    PopoverFields\n  ) : (\n    <Grid container spacing={0} className={classes.item} onClick={handleShowFields}>\n      {Header}\n      {showFields && PopoverFields}\n      {showStateIx > -1 && (\n        <ListBoxPopover\n          alignTo={alignTo}\n          show={showStateIx > -1}\n          close={handleCloseShowState}\n          app={api.model}\n          fieldName={field.selections[showStateIx].qField}\n          stateName={field.states[showStateIx]}\n        />\n      )}\n    </Grid>\n  );\n\n  return moreAlignTo && showStateIx > -1 ? (\n    <ListBoxPopover\n      alignTo={alignTo}\n      show={showStateIx > -1}\n      close={handleCloseShowState}\n      app={api.model}\n      fieldName={field.selections[showStateIx].qField}\n      stateName={field.states[showStateIx]}\n    />\n  ) : (\n    Component\n  );\n}\n","import React, { useState, useRef } from 'react';\nimport { IconButton, Grid, Popover, List, ListItem, Box, Typography } from '@material-ui/core';\nimport { makeStyles, useTheme } from '@nebula.js/ui/theme';\nimport DownArrow from '@nebula.js/ui/icons/down-arrow';\n\nimport OneField from './OneField';\nimport MultiState from './MultiState';\n\nconst useStyles = makeStyles((theme) => ({\n  item: {\n    backgroundColor: theme.palette.background.paper,\n    position: 'relative',\n    cursor: 'pointer',\n    padding: '4px',\n    '&:hover': {\n      backgroundColor: theme.palette.action.hover,\n    },\n    height: '100%',\n    alignItems: 'center',\n  },\n  badge: {\n    padding: theme.spacing(0, 1),\n  },\n}));\n\nexport default function More({ items = [], api }) {\n  const classes = useStyles();\n  const theme = useTheme();\n  const [showMoreItems, setShowMoreItems] = useState(false);\n  const [showItemIx, setShowItemIx] = useState(-1);\n  const [anchorEl, setAnchorEl] = useState(null);\n  const alignTo = useRef();\n\n  const handleShowMoreItems = (e) => {\n    if (e.currentTarget.contains(e.target)) {\n      // because click in popover will propagate to parent\n      setAnchorEl(e.currentTarget);\n      alignTo.current = e.currentTarget;\n      setShowMoreItems(!showMoreItems);\n    }\n  };\n\n  const handleCloseShowMoreItem = () => {\n    setShowMoreItems(false);\n  };\n\n  const handleShowItem = (e, ix) => {\n    e.stopPropagation();\n    setShowMoreItems(false);\n    setShowItemIx(ix);\n  };\n\n  const handleCloseShowItem = () => {\n    setShowItemIx(-1);\n  };\n\n  let CurrentItem = null;\n  if (showItemIx > -1) {\n    CurrentItem =\n      items[showItemIx].states.length > 1 ? (\n        <MultiState field={items[showItemIx]} api={api} moreAlignTo={alignTo} onClose={handleCloseShowItem} />\n      ) : (\n        <OneField\n          field={items[showItemIx]}\n          api={api}\n          skipHandleShowListBoxPopover\n          moreAlignTo={alignTo}\n          onClose={handleCloseShowItem}\n        />\n      );\n  }\n\n  return (\n    <Grid container spacing={0} className={classes.item} onClick={handleShowMoreItems}>\n      <Grid item>\n        <Box\n          borderRadius={theme.shape.borderRadius}\n          style={{\n            padding: '4px 8px 4px 8px',\n            backgroundColor: theme.palette.selected.main,\n            color: theme.palette.selected.mainContrastText,\n          }}\n        >\n          <Typography noWrap style={{ fontSize: '12px', lineHeight: '16px', fontWeight: 600 }} color=\"inherit\">\n            +{items.length}\n          </Typography>\n        </Box>\n      </Grid>\n      <Grid item>\n        <IconButton>\n          <DownArrow />\n        </IconButton>\n      </Grid>\n      {showMoreItems && (\n        <Popover\n          open={showMoreItems}\n          onClose={handleCloseShowMoreItem}\n          anchorEl={anchorEl}\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'center',\n          }}\n          transformOrigin={{\n            vertical: 'top',\n            horizontal: 'center',\n          }}\n          PaperProps={{\n            style: {\n              minWidth: '200px',\n              width: '200px',\n              pointerEvents: 'auto',\n            },\n          }}\n        >\n          <List dense>\n            {items.map((s, ix) => (\n              // eslint-disable-next-line react/no-array-index-key\n              <ListItem key={ix} title={s.name} onClick={(e) => handleShowItem(e, ix)}>\n                <Box border={1} width=\"100%\" borderRadius=\"borderRadius\" borderColor=\"divider\">\n                  {s.states.length > 1 ? <MultiState field={s} api={api} /> : <OneField field={s} api={api} />}\n                </Box>\n              </ListItem>\n            ))}\n          </List>\n        </Popover>\n      )}\n      {CurrentItem}\n    </Grid>\n  );\n}\n","import React, { useEffect, useState } from 'react';\n\nimport { Grid } from '@material-ui/core';\n\nimport { useTheme } from '@nebula.js/ui/theme';\nimport useCurrentSelectionsModel from '../../hooks/useCurrentSelectionsModel';\nimport useLayout from '../../hooks/useLayout';\nimport useRect from '../../hooks/useRect';\nimport { useModalObjectStore } from '../../stores/selections-store';\n\nimport OneField from './OneField';\nimport MultiState from './MultiState';\nimport More from './More';\n\nconst MIN_WIDTH = 120;\nconst MIN_WIDTH_MORE = 72;\n\nfunction collect(qSelectionObject, fields, state = '$') {\n  qSelectionObject.qSelections.forEach((selection) => {\n    const name = selection.qField;\n    const field = (fields[name] = fields[name] || { name, states: [], selections: [] }); // eslint-disable-line\n    if (field.states.indexOf(state) === -1) {\n      field.states.push(state);\n      field.selections.push(selection);\n    }\n  });\n}\n\nfunction getItems(layout) {\n  if (!layout) {\n    return [];\n  }\n  const fields = {};\n  if (layout.qSelectionObject) {\n    collect(layout.qSelectionObject, fields);\n  }\n  if (layout.alternateStates) {\n    layout.alternateStates.forEach((s) => collect(s.qSelectionObject, fields, s.stateName));\n  }\n  return Object.keys(fields).map((key) => fields[key]);\n}\n\nexport default function SelectedFields({ api, app }) {\n  const theme = useTheme();\n  const [currentSelectionsModel] = useCurrentSelectionsModel(app);\n  const [layout] = useLayout(currentSelectionsModel);\n  const [state, setState] = useState({ items: [], more: [] });\n  const [modalObjectStore] = useModalObjectStore();\n  const [containerRef, containerRect] = useRect();\n  const [maxItems, setMaxItems] = useState(0);\n\n  const isInListboxPopover = () => {\n    const object = modalObjectStore.get(app.id);\n    return object && object.genericType === 'njsListbox';\n  };\n\n  useEffect(() => {\n    if (!containerRect) return;\n    const { width } = containerRect;\n    const maxWidth = Math.floor(width) - MIN_WIDTH_MORE;\n    const items = Math.floor(maxWidth / MIN_WIDTH);\n    setMaxItems(items);\n  }, [containerRect]);\n\n  useEffect(() => {\n    if (!app || !currentSelectionsModel || !layout || !maxItems) {\n      return;\n    }\n    const items = getItems(layout);\n    setState((currState) => {\n      const newItems = items;\n      // Maintain modal state in app selections\n      if (isInListboxPopover() && newItems.length + 1 === currState.items.length) {\n        const lastDeselectedField = currState.items.filter(\n          (f1) => newItems.some((f2) => f1.name === f2.name) === false\n        )[0];\n        const { qField } = lastDeselectedField.selections[0];\n        lastDeselectedField.selections = [{ qField }];\n        const wasIx = currState.items.indexOf(lastDeselectedField);\n        newItems.splice(wasIx, 0, lastDeselectedField);\n      }\n      let newMoreItems = [];\n      if (maxItems < newItems.length) {\n        newMoreItems = newItems.splice(maxItems - newItems.length);\n      }\n      return {\n        items: newItems,\n        more: newMoreItems,\n      };\n    });\n  }, [app, currentSelectionsModel, layout, api.isInModal(), maxItems]);\n\n  return (\n    <Grid ref={containerRef} container spacing={0} wrap=\"nowrap\" style={{ height: '100%' }}>\n      {state.items.map((s) => (\n        <Grid\n          item\n          key={`${s.states.join('::')}::${s.name}`}\n          style={{\n            position: 'relative',\n            maxWidth: '240px',\n            minWidth: `${MIN_WIDTH}px`,\n            background: theme.palette.background.paper,\n            borderRight: `1px solid ${theme.palette.divider}`,\n          }}\n        >\n          {s.states.length > 1 ? <MultiState field={s} api={api} /> : <OneField field={s} api={api} />}\n        </Grid>\n      ))}\n      {state.more.length > 0 && (\n        <Grid\n          item\n          style={{\n            position: 'relative',\n            maxWidth: '98px',\n            minWidth: `${MIN_WIDTH_MORE}px`,\n            background: theme.palette.background.paper,\n            borderRight: `1px solid ${theme.palette.divider}`,\n          }}\n        >\n          <More items={state.more} api={api} />\n        </Grid>\n      )}\n    </Grid>\n  );\n}\n","import SvgIcon from './SvgIcon';\n\nconst selectionsBack = (props) => ({\n  ...props,\n  shapes: [\n    {\n      type: 'path',\n      attrs: {\n        d:\n          'M10,15.5 C10,15.7761424 9.77614237,16 9.5,16 L6.5,16 C6.22385763,16 6,15.7761424 6,15.5 C6,15.2238576 6.22385763,15 6.5,15 L9.5,15 C9.77614237,15 10,15.2238576 10,15.5 Z M15,13.5 C15,13.2238576 15.2238576,13 15.5,13 C15.7761424,13 16,13.2238576 16,13.5 L16,15 C16,15.5522847 15.5522847,16 15,16 L13.5,16 C13.2238576,16 13,15.7761424 13,15.5 C13,15.2238576 13.2238576,15 13.5,15 L14.5,15 C14.7761424,15 15,14.7761424 15,14.5 L15,13.5 Z M15,6.5 C15,6.22385763 15.2238576,6 15.5,6 C15.7761424,6 16,6.22385763 16,6.5 L16,9.5 C16,9.77614237 15.7761424,10 15.5,10 C15.2238576,10 15,9.77614237 15,9.5 L15,6.5 Z M16,2.5 C16,2.77614237 15.7761424,3 15.5,3 C15.2238576,3 15,2.77614237 15,2.5 L15,1.5 C15,1.22385763 14.7761424,1 14.5,1 L13.5,1 C13.2238576,1 13,0.776142375 13,0.5 C13,0.223857625 13.2238576,-5.07265313e-17 13.5,0 L15,0 C15.5522847,1.01453063e-16 16,0.44771525 16,1 L16,2.5 Z M10,0.5 C10,0.776142375 9.77614237,1 9.5,1 L6.5,1 C6.22385763,1 6,0.776142375 6,0.5 C6,0.223857625 6.22385763,-5.07265313e-17 6.5,0 L9.5,0 C9.77614237,5.07265313e-17 10,0.223857625 10,0.5 Z M1,2.5 C1,2.77614237 0.776142375,3 0.5,3 C0.223857625,3 5.18696197e-13,2.77614237 5.18696197e-13,2.5 L5.18696197e-13,1 C5.18696197e-13,0.44771525 0.44771525,-1.01453063e-16 1,0 L2.5,0 C2.77614237,5.07265313e-17 3,0.223857625 3,0.5 C3,0.776142375 2.77614237,1 2.5,1 L1.5,1 C1.22385763,1 1,1.22385763 1,1.5 L1,2.5 Z M1,13.5 L1,14.5 C1,14.7761424 1.22385763,15 1.5,15 L2.5,15 C2.77614237,15 3,15.2238576 3,15.5 C3,15.7761424 2.77614237,16 2.5,16 L1,16 C0.44771525,16 5.18696197e-13,15.5522847 5.18696197e-13,15 L5.18696197e-13,13.5 C5.18696197e-13,13.2238576 0.223857625,13 0.5,13 C0.776142375,13 1,13.2238576 1,13.5 Z M4,7 C7.49095643,7 10,10.1337595 10,12.1872632 C10,12.1872632 8.16051135,9.86624054 4,10 L4,12 C4,12 2.66666667,10.8333333 -1.0658141e-14,8.5 C-2.59348099e-13,8.5 1.33333333,7.33333333 4,5 C4,5 4,5.66666667 4,7 Z',\n      },\n    },\n  ],\n});\nexport default (props) => SvgIcon(selectionsBack(props));\nexport { selectionsBack };\n","import SvgIcon from './SvgIcon';\n\nconst selectionsForward = (props) => ({\n  ...props,\n  shapes: [\n    {\n      type: 'path',\n      attrs: {\n        d:\n          'M6,15.5 L6,15.5 C6,15.2238576 6.22385763,15 6.5,15 L9.5,15 C9.77614237,15 10,15.2238576 10,15.5 L10,15.5 C10,15.7761424 9.77614237,16 9.5,16 L6.5,16 C6.22385763,16 6,15.7761424 6,15.5 Z M1,13.5 L1,14.5 C1,14.7761424 1.22385763,15 1.5,15 L2.5,15 C2.77614237,15 3,15.2238576 3,15.5 L3,15.5 C3,15.7761424 2.77614237,16 2.5,16 L1,16 C0.44771525,16 6.76353751e-17,15.5522847 0,15 L0,13.5 C-3.38176876e-17,13.2238576 0.223857625,13 0.5,13 L0.5,13 C0.776142375,13 1,13.2238576 1,13.5 Z M1,6.5 L1,9.5 C1,9.77614237 0.776142375,10 0.5,10 L0.5,10 C0.223857625,10 3.38176876e-17,9.77614237 0,9.5 L0,6.5 C-3.38176876e-17,6.22385763 0.223857625,6 0.5,6 L0.5,6 C0.776142375,6 1,6.22385763 1,6.5 Z M0,2.5 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 L2.5,0 C2.77614237,-5.07265313e-17 3,0.223857625 3,0.5 L3,0.5 C3,0.776142375 2.77614237,1 2.5,1 L1.5,1 C1.22385763,1 1,1.22385763 1,1.5 L1,2.5 C1,2.77614237 0.776142375,3 0.5,3 L0.5,3 C0.223857625,3 3.38176876e-17,2.77614237 0,2.5 Z M6,0.5 L6,0.5 C6,0.223857625 6.22385763,5.07265313e-17 6.5,0 L9.5,0 C9.77614237,-5.07265313e-17 10,0.223857625 10,0.5 L10,0.5 C10,0.776142375 9.77614237,1 9.5,1 L6.5,1 C6.22385763,1 6,0.776142375 6,0.5 Z M15,2.5 L15,1.5 C15,1.22385763 14.7761424,1 14.5,1 L13.5,1 C13.2238576,1 13,0.776142375 13,0.5 L13,0.5 C13,0.223857625 13.2238576,5.07265313e-17 13.5,0 L15,0 C15.5522847,-1.01453063e-16 16,0.44771525 16,1 L16,2.5 C16,2.77614237 15.7761424,3 15.5,3 L15.5,3 C15.2238576,3 15,2.77614237 15,2.5 Z M15,13.5 C15,13.2238576 15.2238576,13 15.5,13 C15.7761424,13 16,13.2238576 16,13.5 L16,15 C16,15.5522847 15.5522847,16 15,16 L13.5,16 C13.2238576,16 13,15.7761424 13,15.5 C13,15.2238576 13.2238576,15 13.5,15 L14.5,15 C14.7761424,15 15,14.7761424 15,14.5 L15,13.5 Z M12,7 C12,5.66666667 12,5 12,5 C14.6666667,7.33333333 16,8.5 16,8.5 C13.3333333,10.8333333 12,12 12,12 L12,10 C7.83948865,9.86624054 6,12.1872632 6,12.1872632 C6,10.1337595 8.50904357,7 12,7 Z',\n      },\n    },\n  ],\n});\nexport default (props) => SvgIcon(selectionsForward(props));\nexport { selectionsForward };\n","import React, { useContext } from 'react';\n\nimport { IconButton, Grid } from '@material-ui/core';\n\nimport SelectionsBack from '@nebula.js/ui/icons/selections-back';\nimport SelectionsForward from '@nebula.js/ui/icons/selections-forward';\nimport ClearSelections from '@nebula.js/ui/icons/clear-selections';\n\nimport InstanceContext from '../../contexts/InstanceContext';\nimport useAppSelectionsNavigation from '../../hooks/useAppSelectionsNavigation';\n\nexport default function Nav({ api, app }) {\n  const { translator } = useContext(InstanceContext);\n  const [navState] = useAppSelectionsNavigation(app);\n\n  return (\n    <Grid\n      container\n      wrap=\"nowrap\"\n      style={{\n        height: '100%',\n        alignItems: 'center',\n        padding: '0 8px',\n      }}\n    >\n      <Grid item>\n        <IconButton\n          style={{ marginRight: '8px' }}\n          disabled={!navState || !navState.canGoBack}\n          title={translator.get('Navigate.Back')}\n          onClick={() => api.back()}\n        >\n          <SelectionsBack />\n        </IconButton>\n      </Grid>\n      <Grid item>\n        <IconButton\n          style={{ marginRight: '8px' }}\n          disabled={!navState || !navState.canGoForward}\n          title={translator.get('Navigate.Forward')}\n          onClick={() => api.forward()}\n        >\n          <SelectionsForward />\n        </IconButton>\n      </Grid>\n      <Grid item>\n        <IconButton\n          disabled={!navState || !navState.canClear}\n          title={translator.get('Selection.ClearAll')}\n          onClick={() => api.clear()}\n        >\n          <ClearSelections />\n        </IconButton>\n      </Grid>\n    </Grid>\n  );\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { Grid } from '@material-ui/core';\n\nimport { useTheme } from '@nebula.js/ui/theme';\n\nimport SelectedFields from './SelectedFields';\nimport Nav from './Nav';\nimport useAppSelections from '../../hooks/useAppSelections';\n\nconst AppSelections = ({ app }) => {\n  const theme = useTheme();\n  const [appSelections] = useAppSelections(app);\n  if (!appSelections) return null;\n  return (\n    <Grid\n      container\n      spacing={0}\n      wrap=\"nowrap\"\n      style={{\n        backgroundColor: theme.palette.background.paper,\n        minHeight: '40px',\n      }}\n    >\n      <Grid\n        item\n        style={{\n          borderRight: `1px solid ${theme.palette.divider}`,\n        }}\n      >\n        <Nav api={appSelections} app={app} />\n      </Grid>\n      <Grid item xs style={{ backgroundColor: theme.palette.background.darker, overflow: 'hidden' }}>\n        <SelectedFields api={appSelections} app={app} />\n      </Grid>\n    </Grid>\n  );\n};\n\nexport { AppSelections };\n\nexport default function mount({ element, app }) {\n  return ReactDOM.createPortal(<AppSelections app={app} />, element);\n}\n","const idGen = [\n  [10, 31],\n  [0, 31],\n  [0, 31],\n  [0, 31],\n  [0, 31],\n  [0, 31],\n];\nfunction toChar([min, max]) {\n  return (min + ((Math.random() * (max - min)) | 0)).toString(32);\n}\n\nexport default function uid() {\n  return idGen.map(toChar).join('');\n}\n","/* eslint no-param-reassign:0 */\n\nimport uid from './uid';\n\nfunction addIndex(array, index) {\n  for (let i = 0; i < array.length; ++i) {\n    if (array[i] >= 0 && array[i] >= index) {\n      ++array[i];\n    }\n  }\n  array.push(index);\n}\nfunction removeIndex(array, index) {\n  let removeIdx = 0;\n  for (let i = 0; i < array.length; ++i) {\n    if (array[i] > index) {\n      --array[i];\n    } else if (array[i] === index) {\n      removeIdx = i;\n    }\n  }\n  array.splice(removeIdx, 1);\n  return removeIdx;\n}\n\nconst nxDimension = (f) => ({\n  qDef: {\n    qFieldDefs: [f],\n  },\n});\n\nconst nxMeasure = (f) => ({\n  qDef: {\n    qDef: f,\n  },\n});\n\nexport default function hcHandler({ dc: hc, def, properties }) {\n  hc.qDimensions = hc.qDimensions || [];\n  hc.qMeasures = hc.qMeasures || [];\n  hc.qInterColumnSortOrder = hc.qInterColumnSortOrder || [];\n  hc.qInitialDataFetch = hc.qInitialDataFetch || [];\n  hc.qColumnOrder = hc.qColumnOrder || [];\n  hc.qExpansionState = hc.qExpansionState || [];\n\n  const objectProperties = properties;\n\n  const handler = {\n    dimensions() {\n      return hc.qDimensions;\n    },\n    measures() {\n      return hc.qMeasures;\n    },\n    addDimension(d) {\n      const dimension =\n        typeof d === 'string'\n          ? nxDimension(d)\n          : {\n              ...d,\n              qDef: d.qDef || {},\n            };\n      dimension.qDef.cId = dimension.qDef.cId || uid();\n\n      // ====== add default objects and arrays for NxDimension =====\n\n      // TODO - apply autosort properties based on tags\n      dimension.qDef.qSortCriterias = dimension.qDef.qSortCriterias || [\n        {\n          qSortByLoadOrder: 1,\n          qSortByNumeric: 1,\n          qSortByAscii: 1,\n        },\n      ];\n\n      dimension.qOtherTotalSpec = dimension.qOtherTotalSpec || {};\n      dimension.qAttributeExpressions = dimension.qAttributeExpressions || [];\n      dimension.qAttributeDimensions = dimension.qAttributeDimensions || [];\n      // ========= end defaults =============\n\n      if (hc.qDimensions.length < handler.maxDimensions()) {\n        hc.qDimensions.push(dimension);\n        addIndex(hc.qInterColumnSortOrder, hc.qDimensions.length - 1);\n        def.dimensions.added(dimension, objectProperties);\n      } else {\n        hc.qLayoutExclude = hc.qLayoutExclude || {};\n        hc.qLayoutExclude.qHyperCubeDef = hc.qLayoutExclude.qHyperCubeDef || {};\n        hc.qLayoutExclude.qHyperCubeDef.qDimensions = hc.qLayoutExclude.qHyperCubeDef.qDimensions || [];\n        hc.qLayoutExclude.qHyperCubeDef.qMeasures = hc.qLayoutExclude.qHyperCubeDef.qMeasures || [];\n\n        hc.qLayoutExclude.qHyperCubeDef.qDimensions.push(dimension);\n      }\n    },\n    removeDimension(idx) {\n      const dimension = hc.qDimensions.splice(idx, 1)[0];\n      removeIndex(hc.qInterColumnSortOrder, idx);\n      def.dimensions.removed(dimension, objectProperties, idx);\n    },\n    addMeasure(m) {\n      const measure =\n        typeof m === 'string'\n          ? nxMeasure(m)\n          : {\n              ...m,\n              qDef: m.qDef || {},\n            };\n      measure.qDef.cId = measure.qDef.cId || uid();\n\n      // ====== add default objects and arrays for NxMeasure =====\n      measure.qSortBy = measure.qSortBy || {\n        qSortByLoadOrder: 1,\n        qSortByNumeric: -1,\n      };\n\n      measure.qAttributeDimensions = measure.qAttributeDimensions || [];\n      measure.qAttributeExpressions = measure.qAttributeExpressions || [];\n\n      if (hc.qMeasures.length < handler.maxMeasures()) {\n        hc.qMeasures.push(measure);\n        addIndex(hc.qInterColumnSortOrder, hc.qDimensions.length + hc.qMeasures.length - 1);\n        def.measures.added(measure, objectProperties);\n      } else {\n        hc.qLayoutExclude = hc.qLayoutExclude || {};\n        hc.qLayoutExclude.qHyperCubeDef = hc.qLayoutExclude.qHyperCubeDef || {};\n        hc.qLayoutExclude.qHyperCubeDef.qDimensions = hc.qLayoutExclude.qHyperCubeDef.qDimensions || [];\n        hc.qLayoutExclude.qHyperCubeDef.qMeasures = hc.qLayoutExclude.qHyperCubeDef.qMeasures || [];\n\n        hc.qLayoutExclude.qHyperCubeDef.qMeasures.push(measure);\n      }\n    },\n    removeMeasure(idx) {\n      const measure = hc.qMeasures.splice(idx, 1)[0];\n      removeIndex(hc.qInterColumnSortOrder, hc.qDimensions.length + idx);\n      def.measures.removed(measure, objectProperties, idx);\n    },\n\n    maxDimensions() {\n      return def.dimensions.max(hc.qMeasures.length);\n    },\n    maxMeasures() {\n      return def.measures.max(hc.qDimensions.length);\n    },\n    canAddDimension() {\n      return hc.qDimensions.length < handler.maxDimensions();\n    },\n    canAddMeasure() {\n      return hc.qMeasures.length < handler.maxMeasures();\n    },\n  };\n\n  return handler;\n}\n","import hcHandler from './hc-handler';\n\n/**\n * @typedef {string | qae.NxDimension | qae.NxMeasure | LibraryField} Field\n */\n\n/**\n * @interface LibraryField\n * @property {string} qLibraryId\n * @property {'dimension'|'measure'} type\n */\n\nexport function fieldType(f) {\n  if (\n    // a string starting with '=' is just a convention we use\n    (typeof f === 'string' && f[0] === '=') ||\n    // based on NxMeasure and NxInlineMeasureDef\n    (typeof f === 'object' && f.qDef && f.qDef.qDef) ||\n    // use 'type' instead of 'qType' since this is not a real property\n    (typeof f === 'object' && f.qLibraryId && f.type === 'measure')\n  ) {\n    return 'measure';\n  }\n  return 'dimension';\n}\n\nexport default function populateData({ sn, properties, fields }) {\n  if (!fields.length) {\n    return;\n  }\n  const target = sn.qae.data.targets[0];\n  if (!target) {\n    if (__NEBULA_DEV__) {\n      console.warn('Attempting to add fields to an object without a specified data target'); // eslint-disable-line no-console\n    }\n    return;\n  }\n  const { propertyPath } = target;\n\n  const parts = propertyPath.split('/');\n  let p = properties;\n  for (let i = 0; i < parts.length; i++) {\n    const s = parts[i];\n    p = s ? p[s] : p;\n  }\n\n  const hc = hcHandler({\n    dc: p,\n    def: target,\n    properties,\n  });\n\n  fields.forEach((f) => {\n    const type = fieldType(f);\n\n    if (type === 'measure') {\n      hc.addMeasure(f);\n    } else {\n      hc.addDimension(f);\n    }\n  });\n}\n","/**\n * Gets a value from a data object structure.\n *\n * @ignore\n * @param data The data object.\n * @param reference Reference to the value.\n * @param defaultValue Default value to return if no value was found.\n * @returns {*} The default value if specified, otherwise undefined.\n */\nconst getValue = (data, reference, defaultValue) => {\n  if (data === undefined || data === null || reference === undefined || reference === null) {\n    return defaultValue;\n  }\n  const steps = reference.split('.');\n  let dataContainer = data;\n  for (let i = 0; i < steps.length; ++i) {\n    const step = steps[i];\n    if (step === '') {\n      continue; // eslint-disable-line no-continue\n    }\n    if (dataContainer[step] === undefined || dataContainer[step] === null) {\n      return defaultValue;\n    }\n    dataContainer = dataContainer[step];\n  }\n  return dataContainer;\n};\n\n/**\n * Sets a value in a data object using a dot notated reference to point out the path.\n *\n * Example:\n * If data is an empty object, reference is \"my.value\" and value the is \"x\", then\n * the resulting data object will be: { my:\t{ value: \"x\" } }\n *\n * @ignore\n * @param data The data object. Must be an object.\n * @param reference Reference to the value.\n * @param value Arbitrary value to set. If the value is set to undefined, the value property will be removed.\n */\nconst setValue = (data, reference, value) => {\n  if (data === undefined || data === null || reference === undefined || reference === null) {\n    return;\n  }\n  const steps = reference.split('.');\n  const propertyName = steps[steps.length - 1];\n  let dataContainer = data;\n\n  for (let i = 0; i < steps.length - 1; ++i) {\n    const step = steps[i];\n    if (dataContainer[step] === undefined || dataContainer[step] === null) {\n      dataContainer[step] = Number.isNaN(+steps[i + 1]) ? {} : [];\n    }\n    dataContainer = dataContainer[step];\n  }\n\n  if (typeof value !== 'undefined') {\n    dataContainer[propertyName] = value;\n  } else {\n    delete dataContainer[propertyName];\n  }\n};\n\nconst isEmpty = (object) => {\n  return Object.keys(object).length === 0 && object.constructor === Object;\n};\n\nexport default {\n  getValue,\n  setValue,\n  isEmpty,\n};\n","/* eslint-disable no-param-reassign */\n/**\n * Returns true if the second array is a ordered subset of the first.\n *\n * @ignore\n * @param array1\n * @param array2\n * @returns {boolean}\n */\nfunction isOrderedSubset(outer, subset) {\n  if (!outer || !subset || !outer.length || !subset.length) {\n    return false;\n  }\n  let start = outer.indexOf(subset[0]);\n\n  if (start !== -1) {\n    for (let i = 0; i < subset.length; i++) {\n      const next = outer.indexOf(subset[i]);\n      if (start > next) {\n        return false;\n      }\n      start = next;\n    }\n    return true;\n  }\n  return false;\n}\n\n/**\n * Used for adding an index to an index array. An index array contains indices from 0-N in any order and\n * is used for keeping track of how items in another arrayed could be presented in a specific order.\n *\n * @ignore\n * @param array\n * @param index\n */\nfunction indexAdded(array, index) {\n  let i;\n  for (i = 0; i < array.length; ++i) {\n    if (array[i] >= 0 && array[i] >= index) {\n      ++array[i];\n    }\n  }\n  array.push(index);\n}\n\n/**\n * Used for removing an index from an index array. An index array contains indices from 0-N in any order and\n * is used for keeping track of how items in another arrayed could be presented in a specific order.\n *\n * @ignore\n * @param array\n * @param index\n */\nfunction indexRemoved(array, index) {\n  let removeIndex = 0;\n  let i;\n  for (i = 0; i < array.length; ++i) {\n    if (array[i] > index) {\n      --array[i];\n    } else if (array[i] === index) {\n      removeIndex = i;\n    }\n  }\n  array.splice(removeIndex, 1);\n  return removeIndex;\n}\n\nexport default {\n  isOrderedSubset,\n  indexAdded,\n  indexRemoved,\n};\n","function findLibraryItem(id, libraryItemList) {\n  let i;\n  let item;\n  if (libraryItemList) {\n    for (i = 0; i < libraryItemList.length; i++) {\n      item = libraryItemList[i];\n      if (item.qInfo.qId === id) {\n        return item;\n      }\n    }\n  }\n  return null;\n}\n\nexport default {\n  findLibraryItem,\n};\n","/* eslint-disable no-prototype-builtins */\n/* eslint-disable no-param-reassign */\nimport extend from 'extend';\nimport utils from '../utils';\nimport arrayUtils from '../array-util';\nimport libraryUtils from '../library-utils';\n\nconst MAX_SAFE_INTEGER = 2 ** 53 - 1;\n\n/**\n * Restore properties that were temporarily changed during conversion.\n *\n * @ignore\n * @param properties PropertyTree\n */\nfunction restoreChangedProperties(properties) {\n  Object.keys(properties.qLayoutExclude.changed).forEach((property) => {\n    if (properties.qLayoutExclude.changed[property].to === utils.getValue(properties, property)) {\n      // only revert back to old value if the current value is the same as it was changed to during conversion\n      utils.setValue(properties, property, properties.qLayoutExclude.changed[property].from);\n    }\n  });\n}\n\n/**\n * Used to check if a property key is part of the master item information\n *\n * @ignore\n * @param propertyName Name of the key in the properties object\n * @returns {boolean}\n */\nfunction isMasterItemPropperty(propertyName) {\n  return ['qMetaDef', 'descriptionExpression', 'labelExpression'].indexOf(propertyName) !== -1;\n}\n\nfunction importCommonProperties(newProperties, exportFormat, initialProperties) {\n  // always copy type and visualization\n  const qType =\n    utils.getValue(exportFormat, 'properties.qInfo.qType') === 'masterobject'\n      ? 'masterobject'\n      : utils.getValue(initialProperties, 'qInfo.qType');\n  utils.setValue(newProperties, 'qInfo.qType', qType);\n  newProperties.visualization = initialProperties.visualization;\n}\n\nfunction copyPropertyIfExist(propertyName, source, target) {\n  if (source.hasOwnProperty(propertyName)) {\n    target[propertyName] = source[propertyName];\n  }\n}\n\nfunction copyPropertyOrSetDefault(propertyName, source, target, defaultValue) {\n  if (source.hasOwnProperty(propertyName)) {\n    target[propertyName] = source[propertyName];\n  } else {\n    target[propertyName] = defaultValue;\n  }\n}\n\nfunction getOthersLabel() {\n  return 'Others'; // TODO: translator.get('properties.dimensionLimits.others')\n}\n\nfunction createDefaultDimension(dimensionDef, dimensionProperties) {\n  const def = extend(true, {}, dimensionProperties, dimensionDef);\n  if (!utils.getValue(def, 'qOtherTotalSpec.qOtherCounted')) {\n    utils.setValue(def, 'qOtherTotalSpec.qOtherCounted', { qv: '10' });\n  }\n  if (!utils.getValue(def, 'qOtherTotalSpec.qOtherLimit')) {\n    utils.setValue(def, 'qOtherTotalSpec.qOtherLimit', { qv: '0' });\n  }\n  if (!def.hasOwnProperty('othersLabel')) {\n    def.othersLabel = getOthersLabel();\n  }\n  return def;\n}\n\nfunction createDefaultMeasure(measureDef, measureProperties) {\n  return extend(true, {}, measureProperties, measureDef);\n}\n\nfunction resolveValue(data, input, defaultValue) {\n  if (typeof data === 'function') {\n    return data(input);\n  }\n  return !Number.isNaN(+data) ? data : defaultValue;\n}\n\nfunction getHypercubePath(qae) {\n  const path = utils.getValue(qae, 'data.targets.0.propertyPath', '');\n  const steps = path.split('/');\n  if (steps.length && steps[steps.length - 1] === 'qHyperCubeDef') {\n    steps.length -= 1;\n  }\n  return steps.join('.');\n}\n\nfunction getDefaultDimension() {\n  return {\n    qDef: {\n      autoSort: true,\n      cId: '',\n      othersLabel: getOthersLabel(),\n    },\n    qLibraryId: '',\n    qNullSuppression: false,\n    qOtherLabel: 'Others',\n    qOtherTotalSpec: {\n      qOtherLimitMode: 'OTHER_GE_LIMIT',\n      qOtherMode: 'OTHER_OFF',\n      qOtherSortMode: 'OTHER_SORT_DESCENDING',\n      qSuppressOther: false,\n    },\n  };\n}\n\nfunction getDefaultMeasure() {\n  return {\n    qDef: {\n      autoSort: true,\n      cId: '',\n      numFormatFromTemplate: true,\n    },\n    qLibraryId: '',\n    qTrendLines: [],\n  };\n}\n\nfunction setInterColumnSortOrder({ exportFormat, newHyperCubeDef }) {\n  const dataGroup = exportFormat.data[0];\n  const nCols = newHyperCubeDef.qDimensions.length + newHyperCubeDef.qMeasures.length;\n  newHyperCubeDef.qInterColumnSortOrder = dataGroup.interColumnSortOrder.concat();\n\n  let i = newHyperCubeDef.qInterColumnSortOrder.length;\n  if (i !== nCols) {\n    if (newHyperCubeDef.qLayoutExclude) {\n      // Store them if needed\n      newHyperCubeDef.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder = dataGroup.interColumnSortOrder.concat();\n    }\n    while (i !== nCols) {\n      if (i < nCols) {\n        arrayUtils.indexAdded(newHyperCubeDef.qInterColumnSortOrder, i);\n        ++i;\n      } else {\n        --i;\n        arrayUtils.indexRemoved(newHyperCubeDef.qInterColumnSortOrder, i);\n      }\n    }\n  }\n}\n\nfunction createNewProperties({ exportFormat, initialProperties, hypercubePath }) {\n  let newProperties = { qLayoutExclude: { disabled: {}, quarantine: {} } };\n\n  Object.keys(exportFormat.properties).forEach((key) => {\n    if (key === 'qLayoutExclude') {\n      if (exportFormat.properties[key].quarantine) {\n        newProperties.qLayoutExclude.quarantine = extend(true, {}, exportFormat.properties[key].quarantine);\n      }\n    } else if (key === 'qHyperCubeDef' && hypercubePath) {\n      utils.setValue(newProperties, `${hypercubePath}.qHyperCubeDef`, exportFormat.properties.qHyperCubeDef);\n    } else if (initialProperties.hasOwnProperty(key) || isMasterItemPropperty(key)) {\n      // TODO: qExtendsId ??\n      newProperties[key] = exportFormat.properties[key];\n    } else {\n      newProperties.qLayoutExclude.disabled[key] = exportFormat.properties[key];\n    }\n  });\n\n  newProperties = extend(true, {}, initialProperties, newProperties);\n  if (newProperties.components === null) {\n    newProperties.components = [];\n  }\n  return newProperties;\n}\n\nfunction getMaxMinDimensionMeasure({ exportFormat, dataDefinition = {} }) {\n  const dataGroup = exportFormat.data[0];\n  const dimensionDef = dataDefinition.dimensions || { max: 0 };\n  const measureDef = dataDefinition.measures || { max: 0 };\n  const maxMeasures = resolveValue(measureDef.max, dataGroup.dimensions.length, MAX_SAFE_INTEGER);\n  const minMeasures = resolveValue(measureDef.min, dataGroup.dimensions.length, 0);\n  const maxDimensions = resolveValue(dimensionDef.max, maxMeasures, MAX_SAFE_INTEGER);\n  const minDimensions = resolveValue(dimensionDef.min, minMeasures, 0);\n  return { maxDimensions, minDimensions, maxMeasures, minMeasures };\n}\n\nfunction shouldInitLayoutExclude({ exportFormat, maxDimensions, minDimensions, maxMeasures, minMeasures }) {\n  const dataGroup = exportFormat.data[0];\n  return (\n    (dataGroup.dimensions.length > maxDimensions && maxDimensions > 0) ||\n    (dataGroup.measures.length > maxMeasures && maxMeasures > 0) ||\n    (dataGroup.excludedDimensions.length > 0 &&\n      dataGroup.dimensions.length + dataGroup.excludedDimensions.length > minDimensions) ||\n    (dataGroup.excludedMeasures.length > 0 &&\n      dataGroup.measures.length + dataGroup.excludedMeasures.length > minMeasures) ||\n    (!maxMeasures && dataGroup.measures.length > 0) ||\n    (!maxDimensions && dataGroup.dimensions.length > 0)\n  );\n}\n\nfunction initLayoutExclude({ exportFormat, maxDimensions, minDimensions, maxMeasures, minMeasures, newHyperCubeDef }) {\n  const dataGroup = exportFormat.data[0];\n  if (!newHyperCubeDef.qLayoutExclude) {\n    newHyperCubeDef.qLayoutExclude = {};\n  }\n\n  if (!newHyperCubeDef.qLayoutExclude.qHyperCubeDef) {\n    newHyperCubeDef.qLayoutExclude.qHyperCubeDef = {};\n  }\n\n  if (\n    (dataGroup.dimensions.length > maxDimensions && maxDimensions > 0) ||\n    (dataGroup.excludedDimensions &&\n      dataGroup.excludedDimensions.length &&\n      dataGroup.dimensions.length + dataGroup.excludedDimensions.length > minDimensions)\n  ) {\n    if (!newHyperCubeDef.qLayoutExclude.qHyperCubeDef.qDimensions) {\n      newHyperCubeDef.qLayoutExclude.qHyperCubeDef.qDimensions = [];\n    }\n  }\n\n  if (\n    (dataGroup.measures.length > maxMeasures && maxMeasures > 0) ||\n    (dataGroup.excludedMeasures &&\n      dataGroup.excludedMeasures.length &&\n      dataGroup.measures.length + dataGroup.excludedMeasures.length > minMeasures)\n  ) {\n    if (!newHyperCubeDef.qLayoutExclude.qHyperCubeDef.qMeasures) {\n      newHyperCubeDef.qLayoutExclude.qHyperCubeDef.qMeasures = [];\n    }\n  }\n\n  if (!maxMeasures && dataGroup.measures.length) {\n    // if the object don't support measures put them in alternative measures instead\n    if (!newHyperCubeDef.qLayoutExclude.qHyperCubeDef.qMeasures) {\n      newHyperCubeDef.qLayoutExclude.qHyperCubeDef.qMeasures = [];\n    }\n  }\n\n  if (!maxDimensions && dataGroup.dimensions.length) {\n    // if the object don't support dimensions put them in alternative dimensions instead\n    if (!newHyperCubeDef.qLayoutExclude.qHyperCubeDef.qDimensions) {\n      newHyperCubeDef.qLayoutExclude.qHyperCubeDef.qDimensions = [];\n    }\n  }\n}\n\nfunction addDefaultDimensions({ exportFormat, maxDimensions, minDimensions, newHyperCubeDef, defaultDimension }) {\n  const dataGroup = exportFormat.data[0];\n  let i;\n  if (maxDimensions > 0) {\n    for (i = 0; i < dataGroup.dimensions.length; ++i) {\n      if (newHyperCubeDef.qDimensions.length < maxDimensions) {\n        newHyperCubeDef.qDimensions.push(createDefaultDimension(dataGroup.dimensions[i], defaultDimension));\n      } else {\n        newHyperCubeDef.qLayoutExclude.qHyperCubeDef.qDimensions.push(\n          createDefaultDimension(dataGroup.dimensions[i], defaultDimension)\n        );\n      }\n    }\n  } else if (dataGroup.dimensions.length) {\n    for (i = 0; i < dataGroup.dimensions.length; ++i) {\n      newHyperCubeDef.qLayoutExclude.qHyperCubeDef.qDimensions.push(\n        createDefaultDimension(dataGroup.dimensions[i], defaultDimension)\n      );\n    }\n  }\n\n  if (dataGroup.excludedDimensions.length) {\n    for (i = 0; i < dataGroup.excludedDimensions.length; ++i) {\n      if (newHyperCubeDef.qDimensions.length < minDimensions) {\n        newHyperCubeDef.qDimensions.push(createDefaultDimension(dataGroup.excludedDimensions[i], defaultDimension));\n      } else {\n        newHyperCubeDef.qLayoutExclude.qHyperCubeDef.qDimensions.push(\n          createDefaultDimension(dataGroup.excludedDimensions[i], defaultDimension)\n        );\n      }\n    }\n  }\n}\n\nfunction addDefaultMeasures({ exportFormat, maxMeasures, minMeasures, newHyperCubeDef, defaultMeasure }) {\n  const dataGroup = exportFormat.data[0];\n  let i;\n  if (maxMeasures > 0) {\n    for (i = 0; i < dataGroup.measures.length; ++i) {\n      if (newHyperCubeDef.qMeasures.length < maxMeasures) {\n        newHyperCubeDef.qMeasures.push(createDefaultMeasure(dataGroup.measures[i], defaultMeasure));\n      } else {\n        newHyperCubeDef.qLayoutExclude.qHyperCubeDef.qMeasures.push(\n          createDefaultMeasure(dataGroup.measures[i], defaultMeasure)\n        );\n      }\n    }\n  } else if (dataGroup.measures.length) {\n    for (i = 0; i < dataGroup.measures.length; ++i) {\n      newHyperCubeDef.qLayoutExclude.qHyperCubeDef.qMeasures.push(\n        createDefaultMeasure(dataGroup.measures[i], defaultMeasure)\n      );\n    }\n  }\n\n  if (dataGroup.excludedMeasures.length) {\n    for (i = 0; i < dataGroup.excludedMeasures.length; ++i) {\n      if (newHyperCubeDef.qMeasures.length < minMeasures) {\n        newHyperCubeDef.qMeasures.push(createDefaultMeasure(dataGroup.excludedMeasures[i], defaultMeasure));\n      } else {\n        newHyperCubeDef.qLayoutExclude.qHyperCubeDef.qMeasures.push(\n          createDefaultMeasure(dataGroup.excludedMeasures[i], defaultMeasure)\n        );\n      }\n    }\n  }\n}\n\nfunction updateTitle(item, libraryItemList) {\n  if (item.qLibraryId) {\n    const libItem = libraryUtils.findLibraryItem(item.qLibraryId, libraryItemList);\n    if (libItem) {\n      item.title = libItem.qData.title;\n    }\n  }\n}\n\nfunction checkLibraryObjects({ exportFormat, dimensionList, measureList }) {\n  for (let i = 0; i < exportFormat.data.length; ++i) {\n    const { dimensions, measures, excludedDimensions, excludedMeasures } = exportFormat.data[i];\n    [...dimensions, ...excludedDimensions].forEach((item) => updateTitle(item, dimensionList));\n    [...measures, ...excludedMeasures].forEach((item) => updateTitle(item, measureList));\n  }\n}\n\nexport default {\n  restoreChangedProperties,\n  isMasterItemPropperty,\n  importCommonProperties,\n  copyPropertyIfExist,\n  copyPropertyOrSetDefault,\n  createDefaultDimension,\n  createDefaultMeasure,\n  resolveValue,\n  getHypercubePath,\n  getDefaultDimension,\n  getDefaultMeasure,\n  setInterColumnSortOrder,\n  createNewProperties,\n  getMaxMinDimensionMeasure,\n  shouldInitLayoutExclude,\n  initLayoutExclude,\n  addDefaultDimensions,\n  addDefaultMeasures,\n  checkLibraryObjects,\n};\n","import exportProperties from './export-properties';\nimport importProperties from './import-properties';\n\nexport default {\n  exportProperties,\n  importProperties,\n};\n","/* eslint-disable no-prototype-builtins */\nimport createExportFormat from '../export-format';\nimport utils from '../utils';\nimport arrayUtils from '../array-util';\nimport helpers from '../helpers';\n\n/**\n * Exports properties for a chart with a hypercube.\n *\n * @ignore\n * @param propertyTree The properties tree. Must be an object.\n * @param hypercubePath Reference to the qHyperCubeDef.\n * @returns {ExportFormat}\n */\nexport default function exportProperties({ propertyTree, hypercubePath }) {\n  const exportFormat = createExportFormat();\n  const properties = propertyTree.qProperty;\n  const hcdParent = utils.getValue(properties, hypercubePath || '');\n  const hcd = hcdParent.qHyperCubeDef;\n  const dataGroup = exportFormat.data[0];\n\n  if (!hcd.qInterColumnSortOrder) {\n    hcd.qInterColumnSortOrder = [];\n  }\n\n  // export dimensions\n  dataGroup.dimensions.push(...hcd.qDimensions);\n\n  // excluded dimensions\n  if (hcd.qLayoutExclude && hcd.qLayoutExclude.qHyperCubeDef && hcd.qLayoutExclude.qHyperCubeDef.qDimensions) {\n    dataGroup.excludedDimensions.push(...hcd.qLayoutExclude.qHyperCubeDef.qDimensions);\n  }\n\n  // export measures\n  dataGroup.measures.push(...hcd.qMeasures);\n\n  // excluded measures\n  if (hcd.qLayoutExclude && hcd.qLayoutExclude.qHyperCubeDef && hcd.qLayoutExclude.qHyperCubeDef.qMeasures) {\n    dataGroup.excludedMeasures.push(...hcd.qLayoutExclude.qHyperCubeDef.qMeasures);\n  }\n\n  // export sort order\n  dataGroup.interColumnSortOrder = hcd.qInterColumnSortOrder.concat();\n\n  // if we have a excluded sort order, try apply that instead\n  if (\n    hcd.qLayoutExclude &&\n    hcd.qLayoutExclude.qHyperCubeDef &&\n    hcd.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder\n  ) {\n    const order = hcd.qLayoutExclude.qHyperCubeDef.qInterColumnSortOrder.concat();\n    // If the exporting sort order hasn't changed compared to the excluded we can apply the full excluded instead\n    if (arrayUtils.isOrderedSubset(order, dataGroup.interColumnSortOrder)) {\n      dataGroup.interColumnSortOrder = order;\n    }\n  }\n\n  delete hcd.qLayoutExclude;\n\n  Object.keys(properties).forEach((prop) => {\n    exportFormat.properties[prop] = properties[prop];\n  });\n\n  if (hypercubePath) {\n    exportFormat.properties.qHyperCubeDef = hcdParent.qHyperCubeDef;\n    delete hcdParent.qHyperCubeDef;\n  }\n\n  if (!properties.qLayoutExclude) {\n    properties.qLayoutExclude = {};\n  }\n\n  if (properties.qLayoutExclude.disabled) {\n    Object.keys(properties.qLayoutExclude.disabled).forEach((prop) => {\n      if (!exportFormat.properties.hasOwnProperty(prop)) {\n        exportFormat.properties[prop] = properties.qLayoutExclude.disabled[prop];\n      }\n    });\n\n    delete properties.qLayoutExclude.disabled;\n  }\n\n  if (properties.qLayoutExclude.changed) {\n    helpers.restoreChangedProperties(properties);\n    delete properties.qLayoutExclude.changed;\n  }\n\n  if (!properties.qLayoutExclude.quarantine || utils.isEmpty(properties.qLayoutExclude.quarantine)) {\n    delete properties.qLayoutExclude;\n  }\n\n  return exportFormat;\n}\n","/**\n * Used for exporting and importing properties between backend models. An object that exports to\n * ExportFormat should put dimensions and measures inside one data group. If an object has two hypercubes\n * each of the cubes should export dimensions and measures in two separate data groups.\n * An object that imports from this structure is responsible for putting the existing properties where they should be\n * in the new model.\n * @interface ExportFormat\n * @ignore\n * @property {(ExportDataDef[])=} data\n * @property {object=} properties\n */\n\n/**\n * @ignore\n * @interface ExportDataDef\n * @property {qae.NxDimension[]} dimensions\n * @property {qae.NxMeasure[]} measures\n * @property {qae.NxDimension[]} excludedDimensions\n * @property {qae.NxMeasure[]} excludedMeasures\n * @property {number[]} interColumnSortOrder\n */\n\n/**\n * @ignore\n * @param {number} nDataGroups\n * @return {ExportFormat}\n */\nfunction createExportFormat(nDataGroups = 1) {\n  const exportFormat = {\n    data: [],\n    properties: {},\n  };\n\n  for (let i = 0; i < nDataGroups; ++i) {\n    exportFormat.data.push({\n      dimensions: [],\n      measures: [],\n      excludedDimensions: [],\n      excludedMeasures: [],\n      interColumnSortOrder: [],\n    });\n  }\n  return exportFormat;\n}\n\nexport default createExportFormat;\n","/* eslint-disable no-param-reassign */\n/* eslint-disable no-prototype-builtins */\n\nimport utils from '../utils';\nimport helpers from '../helpers';\n\n/**\n * Imports properties for a chart with a hypercube.\n *\n * @ignore\n * @param {ExportFormat} exportFormat The export object which is the output of exportProperties.\n * @param initialProperties Initial properties of the target chart.\n * @param dataDefinition Data definition of the target chart.\n * @param defaultPropertyValues Default values for a number of properties of the target chart.\n * @param hypercubePath Reference to the qHyperCubeDef.\n * @returns {Object} A properties tree\n */\nexport default function importProperties({\n  exportFormat,\n  initialProperties = {},\n  dataDefinition = {},\n  defaultPropertyValues = {},\n  hypercubePath,\n}) {\n  const newPropertyTree = { qChildren: [] };\n  const newProperties = helpers.createNewProperties({ exportFormat, initialProperties, hypercubePath });\n  const initHyperCubeDef = utils.getValue(initialProperties, hypercubePath || '').qHyperCubeDef;\n  const newHyperCubeDef = utils.getValue(newProperties, hypercubePath || '').qHyperCubeDef;\n  const { maxDimensions, minDimensions, maxMeasures, minMeasures } = helpers.getMaxMinDimensionMeasure({\n    exportFormat,\n    dataDefinition,\n  });\n  const {\n    defaultDimension = helpers.getDefaultDimension(),\n    defaultMeasure = helpers.getDefaultMeasure(),\n  } = defaultPropertyValues;\n\n  // empty dimensions and measures of new hypercube\n  newHyperCubeDef.qDimensions.length = 0;\n  newHyperCubeDef.qMeasures.length = 0;\n\n  // create layout exclude structures if needed\n  if (helpers.shouldInitLayoutExclude({ exportFormat, maxDimensions, minDimensions, maxMeasures, minMeasures })) {\n    helpers.initLayoutExclude({\n      exportFormat,\n      maxDimensions,\n      minDimensions,\n      maxMeasures,\n      minMeasures,\n      newHyperCubeDef,\n    });\n  }\n\n  // and now fill them in.\n  helpers.addDefaultDimensions({ exportFormat, maxDimensions, minDimensions, newHyperCubeDef, defaultDimension });\n  helpers.addDefaultMeasures({ exportFormat, maxMeasures, minMeasures, newHyperCubeDef, defaultMeasure });\n\n  helpers.setInterColumnSortOrder({ exportFormat, newHyperCubeDef });\n\n  helpers.copyPropertyIfExist('qMaxStackedCells', initHyperCubeDef, newHyperCubeDef);\n  helpers.copyPropertyIfExist('qNoOfLeftDims', initHyperCubeDef, newHyperCubeDef);\n\n  helpers.copyPropertyOrSetDefault('qInitialDataFetch', initHyperCubeDef, newHyperCubeDef, [\n    { qTop: 0, qLeft: 0, qWidth: 0, qHeight: 0 },\n  ]);\n  helpers.copyPropertyOrSetDefault('qMode', initHyperCubeDef, newHyperCubeDef, 'S');\n  helpers.copyPropertyOrSetDefault('qReductionMode', initHyperCubeDef, newHyperCubeDef, 'N');\n  helpers.copyPropertyOrSetDefault('qSortbyYValue', initHyperCubeDef, newHyperCubeDef);\n  helpers.copyPropertyOrSetDefault('qIndentMode', initHyperCubeDef, newHyperCubeDef);\n  helpers.copyPropertyOrSetDefault('qShowTotalsAbove', initHyperCubeDef, newHyperCubeDef);\n\n  // always copy type and visualization\n  helpers.importCommonProperties(newProperties, exportFormat, initialProperties);\n\n  newPropertyTree.qProperty = newProperties;\n\n  return newPropertyTree;\n}\n","import hypercube from './hypercube';\nimport utils from './utils';\nimport helpers from './helpers';\n\nconst getType = async ({ halo, name, version }) => {\n  const { types } = halo;\n  const SN = await types\n    .get({\n      name,\n      version,\n    })\n    .supernova();\n  return SN;\n};\n\nconst getPath = (qae) => {\n  return utils.getValue(qae, 'data.targets.0.propertyPath');\n};\n\nconst getDefaultExportPropertiesFn = (path) => {\n  const steps = path.split('/');\n  if (steps.indexOf('qHyperCubeDef') > -1) {\n    return hypercube.exportProperties;\n  }\n  return undefined; // TODO: add listbox and other\n};\n\nconst getExportPropertiesFnc = (qae) => {\n  if (qae.exportProperties) {\n    return qae.exportProperties;\n  }\n  const path = getPath(qae);\n  return getDefaultExportPropertiesFn(path);\n};\n\nconst getDefaultImportPropertiesFnc = (path) => {\n  const steps = path.split('/');\n  if (steps.indexOf('qHyperCubeDef') > -1) {\n    return hypercube.importProperties;\n  }\n  return undefined; // TODO: add listbox and other\n};\n\nconst getImportPropertiesFnc = (qae) => {\n  if (qae.importProperties) {\n    return qae.importProperties;\n  }\n  const path = getPath(qae);\n  return getDefaultImportPropertiesFnc(path);\n};\n\nexport const convertTo = async ({ halo, model, cellRef, newType }) => {\n  const [propertyTree, targetSnType] = await Promise.all([\n    model.getFullPropertyTree(),\n    getType({ halo, name: newType }),\n  ]);\n  const sourceQae = cellRef.current.getQae();\n  const exportProperties = getExportPropertiesFnc(sourceQae);\n  const targetQae = targetSnType.qae;\n  const importProperties = getImportPropertiesFnc(targetQae);\n  const exportFormat = exportProperties({\n    propertyTree,\n    hypercubePath: helpers.getHypercubePath(sourceQae),\n  });\n  const dimensionList = await cellRef.current.getLibraryList(halo.app, 'dimension');\n  const measureList = await cellRef.current.getLibraryList(halo.app, 'measure');\n  helpers.checkLibraryObjects({ exportFormat, dimensionList, measureList });\n  const initial = utils.getValue(targetQae, 'properties.initial', {});\n  const initialProperties = {\n    qInfo: {\n      qType: newType,\n    },\n    visualization: newType,\n    ...initial,\n  };\n  const newPropertyTree = importProperties({\n    exportFormat,\n    initialProperties,\n    dataDefinition: utils.getValue(targetQae, 'data.targets.0.', {}),\n    hypercubePath: helpers.getHypercubePath(targetQae),\n  });\n  return newPropertyTree;\n};\n\nexport default { hypercube };\n","import SvgIcon from './SvgIcon';\n\nconst warning = (props) => ({\n  ...props,\n  shapes: [\n    {\n      type: 'path',\n      attrs: {\n        d:\n          'M8.86225926,1.6 L15.7815749,13.5 C16.2829746,14.3 15.8818548,15 14.9793354,15 L1.04042422,15 C0.0853772072,15 -0.232971797,14.3650794 0.172002787,13.6135407 L7.05722041,1.6 C7.55862009,0.8 8.36085958,0.8 8.86225926,1.6 Z M7.962,2.007 C7.95987183,2.02476599 7.95607967,2.03712023 7.94920396,2.05249845 L1.1033193,14 L14.915544,14 L7.99777452,2.10265906 L7.97779697,2.06138411 L7.96394459,2.01964415 L7.962,2.007 Z M7.5,11 L8.5,11 C8.76666667,11 8.95432099,11.1580247 8.99272977,11.4038409 L9,11.5 L9,12.5 C9,12.7666667 8.84197531,12.954321 8.59615912,12.9927298 L8.5,13 L7.5,13 C7.23333333,13 7.04567901,12.8419753 7.00727023,12.5961591 L7,12.5 L7,11.5 C7,11.2333333 7.15802469,11.045679 7.40384088,11.0072702 L7.5,11 L8.5,11 L7.5,11 Z M7.5,5 L8.5,5 C8.76666667,5 8.95432099,5.15802469 8.99272977,5.40384088 L9,5.5 L9,9.5 C9,9.76666667 8.84197531,9.95432099 8.59615912,9.99272977 L8.5,10 L7.5,10 C7.23333333,10 7.04567901,9.84197531 7.00727023,9.59615912 L7,9.5 L7,5.5 C7,5.23333333 7.15802469,5.04567901 7.40384088,5.00727023 L7.5,5 L8.5,5 L7.5,5 Z',\n      },\n    },\n  ],\n});\nexport default (props) => SvgIcon(warning(props));\n","/* eslint-disable react/no-array-index-key */\nimport React from 'react';\nimport { Grid, Typography, Icon } from '@material-ui/core';\nimport WarningTriangle from '@nebula.js/ui/icons/warning-triangle-2';\nimport Tick from '@nebula.js/ui/icons/tick';\nimport { useTheme } from '@nebula.js/ui/theme';\n\nconst DescriptionRow = ({ d }) => {\n  const theme = useTheme();\n  let color = 'inherit';\n  let styleColor = theme.palette.success.main;\n  if (d.missing) {\n    styleColor = theme.palette.warning.main;\n  } else if (d.error) {\n    color = 'error';\n    styleColor = theme.palette.error.main;\n  }\n  const style = { color: styleColor };\n  const WrappedIcon = (\n    <Typography style={{ lineHeight: '30px', paddingRight: theme.spacing(1) }}>\n      <Icon>{d.missing || d.error ? <WarningTriangle style={style} /> : <Tick style={style} />}</Icon>\n    </Typography>\n  );\n  return (\n    <Grid item container alignItems=\"center\" wrap=\"nowrap\">\n      <Grid item>{WrappedIcon}</Grid>\n      <Grid container item zeroMinWidth wrap=\"nowrap\">\n        <Typography noWrap component=\"p\">\n          <Typography component=\"span\" variant=\"subtitle2\" color={color}>\n            {d.description}\n          </Typography>\n          <Typography component=\"span\"> </Typography>\n          <Typography\n            component=\"span\"\n            variant=\"subtitle2\"\n            color={d.error ? 'error' : 'inherit'}\n            style={{ fontWeight: 400 }}\n          >\n            {d.label}\n          </Typography>\n        </Typography>\n      </Grid>\n    </Grid>\n  );\n};\n\nconst Descriptions = ({ data }) => {\n  const theme = useTheme();\n  return (\n    <Grid container item style={{ maxWidth: '300px', overflow: 'hidden' }}>\n      {data.map((e, ix) => {\n        const Rows = e.descriptions.map((d, dix) => <DescriptionRow d={d} key={dix} />);\n        return (\n          Rows.length > 0 && (\n            <Grid\n              container\n              item\n              key={ix}\n              direction=\"column\"\n              style={{\n                paddingBottom: theme.spacing(2),\n              }}\n            >\n              <Typography noWrap key={ix} variant=\"subtitle1\" align=\"left\" color=\"textSecondary\">\n                {e.title}\n              </Typography>\n              {Rows}\n            </Grid>\n          )\n        );\n      })}\n    </Grid>\n  );\n};\n\nexport default function Error({ title = 'Error', message = '', data = [] }) {\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      justify=\"center\"\n      style={{ position: 'relative', height: '100%', width: '100%' }}\n    >\n      <Grid item>\n        <WarningTriangle style={{ fontSize: '38px' }} />\n      </Grid>\n      <Grid item>\n        <Typography variant=\"h6\" align=\"center\" data-tid=\"error-title\">\n          {title}\n        </Typography>\n      </Grid>\n      <Grid item>\n        <Typography variant=\"subtitle1\" align=\"center\" data-tid=\"error-message\">\n          {message}\n        </Typography>\n      </Grid>\n      <Descriptions data={data} />\n    </Grid>\n  );\n}\n\nexport { Descriptions, DescriptionRow };\n","/* eslint react/jsx-props-no-spreading: 0 */\n\nimport React from 'react';\n\nimport { CircularProgress } from '@material-ui/core';\n\nimport { makeStyles } from '@nebula.js/ui/theme';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    position: 'relative',\n    display: 'inline-block',\n  },\n  front: {\n    color: theme.palette.secondary.main,\n    animationDuration: '1500ms',\n    position: 'absolute',\n    left: 0,\n  },\n  back: {\n    color: theme.palette.divider,\n  },\n}));\n\nconst SIZES = {\n  small: 16,\n  medium: 32,\n  large: 64,\n  xlarge: 128,\n};\n\nexport default function Progress({ size = 'medium', ...props }) {\n  const classes = useStyles();\n  const s = SIZES[size];\n\n  return (\n    <div className={classes.root}>\n      <CircularProgress variant=\"determinate\" value={100} className={classes.back} size={s} thickness={3} {...props} />\n      <CircularProgress\n        variant=\"indeterminate\"\n        disableShrink\n        className={classes.front}\n        size={s}\n        thickness={3}\n        {...props}\n      />\n    </div>\n  );\n}\n","/* eslint-disable react/jsx-props-no-spreading */\nimport React, { useContext } from 'react';\nimport { makeStyles, Grid, Typography, Button } from '@material-ui/core';\nimport WarningTriangle from '@nebula.js/ui/icons/warning-triangle-2';\nimport InstanceContext from '../contexts/InstanceContext';\n\nimport Progress from './Progress';\n\nconst useStyles = makeStyles(() => ({\n  stripes: {\n    '&::before': {\n      position: 'absolute',\n      height: '100%',\n      width: '100%',\n      top: 0,\n      left: 0,\n      content: '\"\"',\n      backgroundSize: '14.14px 14.14px',\n      backgroundImage:\n        'linear-gradient(135deg, currentColor 10%, rgba(0,0,0,0) 10%, rgba(0,0,0,0) 50%, currentColor 50%, currentColor 59%, rgba(0,0,0,0) 60%, rgba(0,0,0,0) 103%)',\n      opacity: 0.1,\n    },\n  },\n}));\n\nexport const Cancel = ({ cancel, translator, ...props }) => (\n  <>\n    <Grid container item direction=\"column\" alignItems=\"center\" spacing={2}>\n      <Grid item>\n        <Progress />\n      </Grid>\n      <Grid item>\n        <Typography variant=\"h6\" align=\"center\">\n          {translator.get('Object.Update.Active')}\n        </Typography>\n      </Grid>\n    </Grid>\n    <Grid item {...props}>\n      <Button variant=\"contained\" onClick={cancel}>\n        {translator.get('Cancel')}\n      </Button>\n    </Grid>\n  </>\n);\n\nexport const Retry = ({ retry, translator, ...props }) => (\n  <>\n    <Grid item>\n      <WarningTriangle style={{ fontSize: '38px' }} />\n    </Grid>\n    <Grid item>\n      <Typography variant=\"h6\" align=\"center\">\n        {translator.get('Object.Update.Cancelled')}\n      </Typography>\n    </Grid>\n    <Grid item>\n      <Button variant=\"contained\" onClick={retry} {...props}>\n        {translator.get('Retry')}\n      </Button>\n    </Grid>\n  </>\n);\n\nexport default function LongRunningQuery({ canCancel, canRetry, api }) {\n  const { stripes, cancel, retry } = useStyles();\n  const { translator } = useContext(InstanceContext);\n\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      justify=\"center\"\n      className={stripes}\n      style={{\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n        left: 0,\n        top: 0,\n      }}\n      spacing={2}\n    >\n      {canCancel && <Cancel cancel={api.cancel} translator={translator} className={cancel} />}\n      {canRetry && <Retry retry={api.retry} translator={translator} className={retry} />}\n    </Grid>\n  );\n}\n","/* eslint-disable react/jsx-props-no-spreading */\nimport React from 'react';\nimport { Grid } from '@material-ui/core';\n\nimport Progress from './Progress';\n\nexport default function Loading() {\n  return (\n    <Grid\n      container\n      direction=\"column\"\n      alignItems=\"center\"\n      justify=\"center\"\n      style={{\n        position: 'absolute',\n        width: '100%',\n        height: '100%',\n        left: 0,\n        top: 0,\n      }}\n      spacing={2}\n    >\n      <Progress size=\"large\" />\n    </Grid>\n  );\n}\n","import React, { useEffect, useState } from 'react';\n\nimport { makeStyles, Grid, Typography } from '@material-ui/core';\nimport ActionsToolbar from './ActionsToolbar';\nimport useRect from '../hooks/useRect';\n\nconst ITEM_WIDTH = 32;\nconst ITEM_SPACING = 4;\nconst DIVIDER = 1;\nconst NUMBER_OF_ITEMS = 6;\nconst MIN_WIDTH = (ITEM_WIDTH + ITEM_SPACING) * NUMBER_OF_ITEMS + DIVIDER + ITEM_SPACING;\n\nconst useStyles = makeStyles((theme) => ({\n  containerStyle: {\n    flexGrow: 0,\n  },\n  containerTitleStyle: {\n    paddingBottom: theme.spacing(1),\n  },\n}));\n\nconst Header = ({ layout, sn, anchorEl, hovering }) => {\n  const showTitle = layout.showTitles && !!layout.title;\n  const showSubtitle = layout.showTitles && !!layout.subtitle;\n  const showInSelectionActions = layout.qSelectionInfo && layout.qSelectionInfo.qInSelections;\n  const [actions, setActions] = useState([]);\n  const { containerStyle, containerTitleStyle } = useStyles();\n  const [containerRef, containerRect] = useRect();\n  const [shouldShowPopoverToolbar, setShouldShowPopoverToolbar] = useState(false);\n\n  useEffect(() => {\n    if (!sn || !sn.component || !sn.component.isHooked) {\n      return;\n    }\n    sn.component.observeActions((a) => {\n      setActions([...a, ...((sn && sn.selectionToolbar && sn.selectionToolbar.items) || [])]);\n    });\n  }, [sn]);\n\n  useEffect(() => {\n    if (!containerRect) return;\n    const { width } = containerRect;\n    setShouldShowPopoverToolbar(width < MIN_WIDTH);\n  }, [containerRect]);\n\n  const showTitles = showTitle || showSubtitle;\n  const classes = [containerStyle, ...(showTitles ? [containerTitleStyle] : [])];\n  const showPopoverToolbar = (hovering || showInSelectionActions) && (shouldShowPopoverToolbar || !showTitles);\n  const showToolbar = showTitles && !showPopoverToolbar && !shouldShowPopoverToolbar;\n\n  const Toolbar = (\n    <ActionsToolbar\n      show={showToolbar}\n      selections={{ show: showInSelectionActions, api: sn.component.selections }}\n      actions={actions}\n      popover={{ show: showPopoverToolbar, anchorEl }}\n    />\n  );\n\n  return (\n    <Grid ref={containerRef} item container wrap=\"nowrap\" className={classes.join(' ')}>\n      <Grid item zeroMinWidth xs>\n        <Grid container wrap=\"nowrap\" direction=\"column\">\n          {showTitle && (\n            <Typography variant=\"h6\" noWrap>\n              {layout.title}\n            </Typography>\n          )}\n          {showSubtitle && (\n            <Typography variant=\"body2\" noWrap>\n              {layout.subtitle}\n            </Typography>\n          )}\n        </Grid>\n      </Grid>\n      <Grid item>{Toolbar}</Grid>\n    </Grid>\n  );\n};\n\nexport default Header;\n","import React from 'react';\n\nimport { makeStyles, Typography, Grid } from '@material-ui/core';\n\nconst useStyles = makeStyles((theme) => ({\n  itemStyle: {\n    minWidth: 0,\n    paddingTop: theme.spacing(1),\n  },\n}));\n\nconst Footer = ({ layout }) => {\n  const { itemStyle } = useStyles();\n  return layout && layout.showTitles && layout.footnote ? (\n    <Grid container>\n      <Grid item className={itemStyle}>\n        <Typography noWrap variant=\"body2\">\n          {layout.footnote}\n        </Typography>\n      </Grid>\n    </Grid>\n  ) : null;\n};\n\nexport default Footer;\n","import React, { useState, useEffect, useCallback, useContext, useRef } from 'react';\nimport InstanceContext from '../contexts/InstanceContext';\nimport useRect from '../hooks/useRect';\n\n/**\n * @interface\n * @extends HTMLElement\n * @property {string} attributes.data-render-count\n */\nconst VizElement = {\n  /** @type {'njs-viz'} */\n  className: 'njs-viz',\n};\n\nconst Supernova = ({ sn, snOptions: options, layout, appLayout, halo }) => {\n  const { component } = sn;\n\n  const { theme: themeName, language, constraints } = useContext(InstanceContext);\n  const renderDebouncer = useRef(null);\n  const [isMounted, setIsMounted] = useState(false);\n  const [renderCnt, setRenderCnt] = useState(0);\n  const [containerRef, containerRect, containerNode] = useRect();\n  const [snNode, setSnNode] = useState(null);\n  const snRef = useCallback((ref) => {\n    if (!ref) {\n      return;\n    }\n    setSnNode(ref);\n  }, []);\n\n  // Mount / Unmount\n  useEffect(() => {\n    if (!snNode) return undefined;\n    component.created({ options });\n    component.mounted(snNode);\n    setIsMounted(true);\n    return () => {\n      clearTimeout(renderDebouncer.current);\n      renderDebouncer.current = null;\n      component.willUnmount();\n    };\n  }, [snNode, component]);\n\n  // Render\n  useEffect(() => {\n    if (!isMounted || !snNode || !containerRect) {\n      return;\n    }\n    // TODO remove in-selections guard for old component API\n    if (!component.isHooked && layout && layout.qSelectionInfo && layout.qSelectionInfo.qInSelections) {\n      return;\n    }\n\n    if (renderDebouncer.current) {\n      // rendering already scheduled\n      return;\n    }\n\n    renderDebouncer.current = setTimeout(() => {\n      // temporarily map constraints to permissions\n      const permissions = [];\n      if (!constraints.passive) {\n        permissions.push('passive');\n      }\n      if (!constraints.active) {\n        permissions.push('interact');\n      }\n      if (!constraints.select) {\n        permissions.push('select');\n      }\n      if (halo.app && halo.app.session) {\n        permissions.push('fetch');\n      }\n      Promise.resolve(\n        component.render({\n          layout,\n          options,\n          context: {\n            constraints,\n            // halo.public.theme is a singleton so themeName is used as dep to make sure this effect is triggered\n            theme: halo.public.theme,\n            appLayout,\n\n            // TODO - remove when old component api is removed\n            ...(component.isHooked\n              ? {}\n              : {\n                  logicalSize: sn.logicalSize({ layout }),\n                  localeInfo: (appLayout || {}).qLocaleInfo,\n                  permissions,\n                }),\n          },\n        })\n      ).then(() => {\n        renderDebouncer.current = null;\n        if (renderCnt === 0 && typeof options.onInitialRender === 'function') {\n          options.onInitialRender.call(null);\n        }\n        setRenderCnt(renderCnt + 1);\n      });\n    }, 10);\n  }, [containerRect, options, snNode, containerNode, layout, appLayout, themeName, language, constraints, isMounted]);\n\n  return (\n    <div\n      ref={containerRef}\n      data-render-count={renderCnt}\n      style={{ position: 'relative', height: '100%' }}\n      className={VizElement.className}\n    >\n      <div ref={snRef} style={{ position: 'absolute', width: '100%', height: '100%' }} />\n    </div>\n  );\n};\n\nexport default Supernova;\n","import { modelStore, rpcRequestSessionModelStore } from '../stores/model-store';\n\nexport default async function getSessionModel(definition, app) {\n  const key = app ? `${app.id}/${JSON.stringify(definition)}` : null;\n\n  let model;\n  let rpcShared;\n\n  if (key) {\n    rpcShared = rpcRequestSessionModelStore.get(key);\n  }\n\n  if (!app) {\n    return model;\n  }\n  // Create new session object\n  const create = async () => {\n    if (!rpcShared) {\n      const rpc = app.createSessionObject(definition);\n      rpcShared = rpc;\n      rpcRequestSessionModelStore.set(key, rpcShared);\n    }\n    model = await rpcShared;\n    modelStore.set(key, model);\n  };\n  await create();\n  return model;\n}\n","import { rpcResultStore, rpcRequestStore } from '../stores/model-store';\n\n// eslint-disable-next-line no-unused-vars\nconst sleep = (delay) => {\n  return new Promise((resolve) => {\n    setTimeout(resolve, delay);\n  });\n};\n\nconst getNewState = (state, action) => {\n  const { key, method } = action;\n  let newState;\n  switch (action.type) {\n    case 'INVALID': {\n      newState = {\n        ...state,\n        valid: false,\n        invalid: true,\n        validating: true,\n        canCancel: true,\n        canRetry: false,\n        rpcRetry: false,\n      };\n      break;\n    }\n    case 'VALID': {\n      newState = {\n        result: {\n          ...action.result,\n        },\n        invalid: false,\n        valid: true,\n        validating: false,\n        canCancel: false,\n        canRetry: false,\n        rpcRetry: false,\n      };\n      break;\n    }\n    case 'CANCELLED': {\n      newState = {\n        ...state,\n        invalid: true,\n        valid: false,\n        validating: false,\n        canCancel: false,\n        canRetry: true,\n        rpcRetry: false,\n      };\n      break;\n    }\n    default:\n      throw new Error('Undefined action');\n  }\n  let sharedState = rpcResultStore.get(key);\n  if (!sharedState) {\n    sharedState = {};\n  }\n  sharedState[method] = newState;\n  rpcResultStore.set(key, sharedState);\n  return newState;\n};\n\nexport default async function getRpc(model, method) {\n  const key = model ? `${model.id}` : null;\n  let state = key ? rpcResultStore.get(key) : null;\n\n  let rpcShared;\n\n  if (key) {\n    rpcShared = rpcRequestStore.get(key);\n    if (!rpcShared) {\n      rpcShared = {};\n      rpcRequestStore.set(key, rpcShared);\n    }\n  }\n\n  const call = async (skipRetry) => {\n    let cache = rpcShared[method];\n    if (!cache || (cache && cache.rpcRetry)) {\n      const rpc = model[method]();\n      cache = {\n        rpc,\n        rpcRetry: false,\n      };\n      rpcShared[method] = cache;\n\n      state = getNewState(state, { type: 'INVALID', method, key, model, canCancel: true });\n    }\n\n    try {\n      // await sleep(5000);\n      const result = await cache.rpc;\n      state = getNewState(state, { type: 'VALID', result, key, method, model });\n    } catch (err) {\n      if (err.code === 15 && !skipRetry) {\n        // Request aborted. This will be called multiple times by hooks only retry once\n        if (!cache.rpcRetry) {\n          cache.rpcRetry = true;\n        }\n        await call(true);\n      }\n    }\n  };\n  const longrunning = {\n    cancel: async () => {\n      const global = model.session.getObjectApi({ handle: -1 });\n      await global.cancelRequest(rpcShared[method].rpc.requestId);\n      state = getNewState(state, { type: 'CANCELLED', key, method, model });\n    },\n    retry: async () => {\n      rpcShared[method].rpcRetry = true;\n      await call();\n    },\n  };\n\n  if (model) {\n    await call();\n  }\n\n  return [\n    // Result\n    state && state.result,\n    { validating: state && state.validating, canCancel: state && state.canCancel, canRetry: state && state.canRetry },\n    // Long running api e.g cancel retry\n    longrunning,\n  ];\n}\n","import getRpc from './getRpc';\n\nexport default async function getLayout(model) {\n  const result = await getRpc(model, 'getLayout');\n  console.log('getLayout', result);\n  return result[0];\n}\n\nexport async function getAppLayout(model) {\n  const result = await getRpc(model, 'getAppLayout');\n  return result[0];\n}\n","import getSessionModel from './getSessionModel';\nimport getLayout from './getLayout';\n\nconst D = {\n  qInfo: {\n    qType: 'DimensionList',\n    qId: 'DimensionList',\n  },\n  qDimensionListDef: {\n    qType: 'dimension',\n    qData: {\n      labelExpression: '/qDimension/qLabelExpression',\n      title: '/qMetaDef/title',\n    },\n  },\n};\n\nconst M = {\n  qInfo: {\n    qType: 'MeasureList',\n    qId: 'MeasureList',\n  },\n  qMeasureListDef: {\n    qType: 'measure',\n    qData: {\n      labelExpression: '/qMeasure/qLabelExpression',\n      title: '/qMetaDef/title',\n    },\n  },\n};\n\nexport default async function list(app, type = 'dimension') {\n  const def = type === 'dimension' ? D : M;\n\n  const model = await getSessionModel(def, app);\n  console.log('model', model);\n  const layout = await getLayout(model);\n  console.log('layout', layout);\n  return [layout ? (layout.qDimensionList || layout.qMeasureList).qItems || [] : []];\n}\n","/* eslint-disable react/jsx-props-no-spreading */\nimport React, { forwardRef, useImperativeHandle, useEffect, useState, useContext, useReducer, useRef } from 'react';\n\nimport { Grid, Paper } from '@material-ui/core';\nimport { useTheme } from '@nebula.js/ui/theme';\n\nimport CError from './Error';\nimport LongRunningQuery from './LongRunningQuery';\nimport Loading from './Loading';\nimport Header from './Header';\nimport Footer from './Footer';\nimport Supernova from './Supernova';\n\nimport useRect from '../hooks/useRect';\nimport useLayout, { useAppLayout } from '../hooks/useLayout';\nimport InstanceContext from '../contexts/InstanceContext';\nimport useObjectSelections from '../hooks/useObjectSelections';\nimport getLibraryList from '../hooks/getLibraryList';\n\n/**\n * @interface\n * @extends HTMLElement\n */\nconst CellElement = {\n  /** @type {'njs-cell'} */\n  className: 'njs-cell',\n};\n\nconst initialState = (err) => ({\n  loading: false,\n  loaded: false,\n  longRunningQuery: false,\n  error: err ? { title: err.message } : null,\n  sn: null,\n  visualization: null,\n});\n\nconst contentReducer = (state, action) => {\n  // console.log('content reducer', action.type);\n  switch (action.type) {\n    case 'LOADING': {\n      return {\n        ...state,\n        loading: true,\n      };\n    }\n    case 'LOADED': {\n      return {\n        ...state,\n        loaded: true,\n        loading: false,\n        longRunningQuery: false,\n        error: null,\n        sn: action.sn,\n        visualization: action.visualization,\n      };\n    }\n    case 'RENDER': {\n      return {\n        ...state,\n        loaded: true,\n        loading: false,\n        longRunningQuery: false,\n        error: null,\n      };\n    }\n    case 'LONG_RUNNING_QUERY': {\n      return {\n        ...state,\n        longRunningQuery: true,\n      };\n    }\n    case 'ERROR': {\n      return {\n        ...state,\n        loading: false,\n        longRunningQuery: false,\n        error: action.error,\n      };\n    }\n    default: {\n      throw new Error(`Unhandled type: ${action.type}`);\n    }\n  }\n};\n\nconst LoadingSn = ({ delay = 750 }) => {\n  const [showLoading, setShowLoading] = useState(false);\n\n  useEffect(() => {\n    const handle = setTimeout(() => setShowLoading(true), delay);\n\n    return () => clearTimeout(handle);\n  }, []);\n\n  return showLoading && <Loading />;\n};\n\nconst handleModal = ({ sn, layout, model }) => {\n  const selections = sn && sn.component && sn.component.selections;\n  if (!selections || !selections.id || !model.id) {\n    return;\n  }\n  if (selections.id === model.id) {\n    if (layout && layout.qSelectionInfo && layout.qSelectionInfo.qInSelections && !selections.isModal()) {\n      const { targets } = sn.generator.qae.data;\n      const firstPropertyPath = targets[0].propertyPath;\n      selections.goModal(firstPropertyPath);\n    }\n    if (!layout.qSelectionInfo || !layout.qSelectionInfo.qInSelections) {\n      if (selections.isModal()) {\n        selections.noModal();\n      }\n    }\n  }\n};\n\nconst filterData = (d) => (d.qError ? d.qError.qErrorCode === 7005 : true);\n\nconst validateInfo = (min, info, getDescription, translatedError, translatedCalcCond) => {\n  return [...Array(min).keys()].map((i) => {\n    const exists = !!(info && info[i]);\n    const softError = exists && info[i].qError && info[i].qError.qErrorCode === 7005;\n    const error = exists && !softError && info[i].qError;\n    const delimiter = ':';\n    const calcCondMsg = softError && info[i].qCalcCondMsg;\n    const label = `${\n      // eslint-disable-next-line no-nested-ternary\n      error ? translatedError : softError ? calcCondMsg || translatedCalcCond : (exists && info[i].qFallbackTitle) || ''\n    }`;\n    const customDescription = getDescription(i);\n    const description = customDescription ? `${customDescription}${label.length ? delimiter : ''}` : null;\n    return {\n      description,\n      label,\n      missing: (info && !exists && !error && i >= info.length) || softError,\n      error,\n    };\n  });\n};\n\nconst getInfo = (info) => (info && (Array.isArray(info) ? info : [info])) || [];\n\nconst validateTarget = (translator, layout, properties, def) => {\n  const minD = def.dimensions.min();\n  const minM = def.measures.min();\n  const c = def.resolveLayout(layout);\n  const reqDimErrors = validateInfo(\n    minD,\n    getInfo(c.qDimensionInfo),\n    (i) => def.dimensions.description(properties, i),\n    translator.get('Visualization.Invalid.Dimension'),\n    translator.get('Visualization.UnfulfilledCalculationCondition')\n  );\n  const reqMeasErrors = validateInfo(\n    minM,\n    getInfo(c.qMeasureInfo),\n    (i) => def.measures.description(properties, i),\n    translator.get('Visualization.Invalid.Measure'),\n    translator.get('Visualization.UnfulfilledCalculationCondition')\n  );\n  return {\n    reqDimErrors,\n    reqMeasErrors,\n  };\n};\n\nconst validateCubes = (translator, targets, layout) => {\n  let hasUnfulfilledErrors = false;\n  let aggMinD = 0;\n  let aggMinM = 0;\n  let hasLayoutErrors = false;\n  let hasLayoutUnfulfilledCalculcationCondition = false;\n  const layoutErrors = [];\n  for (let i = 0; i < targets.length; ++i) {\n    const def = targets[i];\n    const minD = def.dimensions.min();\n    const minM = def.measures.min();\n    const c = def.resolveLayout(layout);\n    const d = getInfo(c.qDimensionInfo).filter(filterData); // Filter out optional calc conditions\n    const m = getInfo(c.qMeasureInfo).filter(filterData); // Filter out optional calc conditions\n    aggMinD += minD;\n    aggMinM += minM;\n    if (d.length < minD || m.length < minM) {\n      hasUnfulfilledErrors = true;\n    }\n    if (c.qError) {\n      hasLayoutErrors = true;\n      hasLayoutUnfulfilledCalculcationCondition = c.qError.qErrorCode === 7005;\n      const title =\n        // eslint-disable-next-line no-nested-ternary\n        hasLayoutUnfulfilledCalculcationCondition && c.qCalcCondMsg\n          ? c.qCalcCondMsg\n          : hasLayoutUnfulfilledCalculcationCondition\n          ? translator.get('Visualization.UnfulfilledCalculationCondition')\n          : translator.get('Visualization.LayoutError');\n\n      layoutErrors.push({ title, descriptions: [] });\n    }\n  }\n  return {\n    hasUnfulfilledErrors,\n    aggMinD,\n    aggMinM,\n    hasLayoutErrors,\n    layoutErrors,\n  };\n};\n\nconst validateTargets = async (translator, layout, { targets }, model) => {\n  // Use a flattened requirements structure to combine all targets\n  const { hasUnfulfilledErrors, aggMinD, aggMinM, hasLayoutErrors, layoutErrors } = validateCubes(\n    translator,\n    targets,\n    layout\n  );\n\n  const reqDimErrors = [];\n  const reqMeasErrors = [];\n  let loopCacheProperties = null;\n\n  for (let i = 0; i < targets.length; ++i) {\n    const def = targets[i];\n    if (!hasLayoutErrors && hasUnfulfilledErrors) {\n      // eslint-disable-next-line no-await-in-loop\n      const properties = loopCacheProperties || (await model.getProperties());\n      loopCacheProperties = properties;\n      const res = validateTarget(translator, layout, properties, def);\n      reqDimErrors.push(...res.reqDimErrors);\n      reqMeasErrors.push(...res.reqMeasErrors);\n    }\n  }\n  const fulfilledDims = reqDimErrors.filter((e) => !(e.missing || e.error)).length;\n  const reqDimErrorsTitle = translator.get('Visualization.Incomplete.Dimensions', [fulfilledDims, aggMinD]);\n  const fulfilledMeas = reqMeasErrors.filter((e) => !(e.missing || e.error)).length;\n  const reqMeasErrorsTitle = translator.get('Visualization.Incomplete.Measures', [fulfilledMeas, aggMinM]);\n  const reqErrors = [\n    { title: reqDimErrorsTitle, descriptions: [...reqDimErrors] },\n    { title: reqMeasErrorsTitle, descriptions: [...reqMeasErrors] },\n  ];\n\n  const showError = hasLayoutErrors || hasUnfulfilledErrors;\n  const data = hasLayoutErrors ? layoutErrors : reqErrors;\n  const title = hasLayoutErrors ? layoutErrors[0].title : translator.get('Visualization.Incomplete');\n\n  return [showError, { title, data }];\n};\n\nconst getType = async ({ types, name, version }) => {\n  const SN = await types\n    .get({\n      name,\n      version,\n    })\n    .supernova();\n  return SN;\n};\n\nconst loadType = async ({ dispatch, types, visualization, version, model, app, selections }) => {\n  try {\n    const snType = await getType({ types, name: visualization, version });\n    const sn = snType.create({\n      model,\n      app,\n      selections,\n    });\n    return sn;\n  } catch (err) {\n    dispatch({ type: 'ERROR', error: { title: err.message } });\n  }\n  return undefined;\n};\n\nconst Cell = forwardRef(({ halo, model, initialSnOptions, initialError, onMount }, ref) => {\n  const { app, types } = halo;\n\n  const { translator, language } = useContext(InstanceContext);\n  const theme = useTheme();\n  const [cellRef, cellRect, cellNode] = useRect();\n  const [state, dispatch] = useReducer(contentReducer, initialState(initialError));\n  const [layout, { validating, canCancel, canRetry }, longrunning] = useLayout(model);\n  const [appLayout] = useAppLayout(app);\n  const [contentRef, contentRect] = useRect();\n  const [snOptions, setSnOptions] = useState(initialSnOptions);\n  const [selections] = useObjectSelections(app, model);\n  const [hovering, setHover] = useState(false);\n  const hoveringDebouncer = useRef({ enter: null, leave: null });\n\n  const handleOnMouseEnter = () => {\n    if (hoveringDebouncer.current.leave) {\n      clearTimeout(hoveringDebouncer.current.leave);\n    }\n    if (hoveringDebouncer.enter) return;\n    hoveringDebouncer.current.enter = setTimeout(() => {\n      setHover(true);\n      hoveringDebouncer.current.enter = null;\n    }, 250);\n  };\n  const handleOnMouseLeave = () => {\n    if (hoveringDebouncer.current.enter) {\n      clearTimeout(hoveringDebouncer.current.enter);\n    }\n    if (hoveringDebouncer.current.leave) return;\n    hoveringDebouncer.current.leave = setTimeout(() => {\n      setHover(false);\n      hoveringDebouncer.current.leave = null;\n    }, 750);\n  };\n\n  useEffect(() => {\n    if (initialError || !appLayout || !layout) {\n      return undefined;\n    }\n    const validate = async (sn) => {\n      const [showError, error] = await validateTargets(translator, layout, sn.generator.qae.data, model);\n      if (showError) {\n        dispatch({ type: 'ERROR', error });\n      } else {\n        dispatch({ type: 'RENDER' });\n      }\n      handleModal({ sn: state.sn, layout, model });\n    };\n    const load = async (visualization, version) => {\n      dispatch({ type: 'LOADING' });\n      const sn = await loadType({\n        dispatch,\n        types,\n        visualization,\n        version,\n        model,\n        app,\n        selections,\n      });\n      if (sn) {\n        dispatch({ type: 'LOADED', sn, visualization });\n        onMount();\n      }\n      return undefined;\n    };\n\n    // Validate if it's still the same type\n    if (state.visualization === layout.visualization && state.sn) {\n      validate(state.sn);\n      return undefined;\n    }\n\n    // Load supernova\n    const withVersion = types.getSupportedVersion(layout.visualization, layout.version);\n    if (!withVersion) {\n      dispatch({\n        type: 'ERROR',\n        error: {\n          title: `Could not find a version of '${layout.visualization}' that supports current object version. Did you forget to register ${layout.visualization}?`,\n        },\n      });\n      return undefined;\n    }\n    load(layout.visualization, withVersion);\n\n    return () => {};\n  }, [types, state.sn, model, layout, appLayout, language]);\n\n  // Long running query\n  useEffect(() => {\n    if (!validating) {\n      return undefined;\n    }\n    const handle = setTimeout(() => dispatch({ type: 'LONG_RUNNING_QUERY' }), 2000);\n    return () => clearTimeout(handle);\n  }, [validating]);\n\n  // Expose cell ref api\n  useImperativeHandle(\n    ref,\n    () => ({\n      getLibraryList,\n      getQae() {\n        return state.sn.generator.qae;\n      },\n      setSnOptions,\n      async takeSnapshot() {\n        const { width, height } = cellRect;\n\n        // clone layout to avoid mutation\n        let clonedLayout = JSON.parse(JSON.stringify(layout));\n        if (typeof state.sn.component.setSnapshotData === 'function') {\n          clonedLayout = (await state.sn.component.setSnapshotData(clonedLayout)) || clonedLayout;\n        }\n        return {\n          // TODO - this snapshot format needs to be documented and governed\n          key: String(+Date.now()),\n          meta: {\n            language: translator.language(),\n            theme: theme.name,\n            appLayout,\n            // direction: 'ltr',\n            size: {\n              width: Math.round(width),\n              height: Math.round(height),\n            },\n          },\n          layout: clonedLayout,\n        };\n      },\n      async exportImage() {\n        if (typeof halo.config.snapshot.capture !== 'function') {\n          throw new Error('Stardust embed has not been configured with snapshot.capture callback');\n        }\n        const snapshot = await this.takeSnapshot(); // eslint-disable-line\n        return halo.config.snapshot.capture(snapshot);\n      },\n    }),\n    [state.sn, contentRect, cellRect, layout, theme.name, appLayout]\n  );\n\n  // console.log('content', state);\n  let Content = null;\n  if (state.loading && !state.longRunningQuery) {\n    Content = <LoadingSn />;\n  } else if (state.error) {\n    Content = <CError {...state.error} />;\n  } else if (state.loaded) {\n    Content = (\n      <Supernova\n        key={layout.visualization}\n        sn={state.sn}\n        halo={halo}\n        snOptions={snOptions}\n        layout={layout}\n        appLayout={appLayout}\n      />\n    );\n  }\n\n  return (\n    <Paper\n      style={{ position: 'relative', width: '100%', height: '100%', overflow: 'hidden' }}\n      elevation={0}\n      square\n      className={CellElement.className}\n      ref={cellRef}\n      onMouseEnter={handleOnMouseEnter}\n      onMouseLeave={handleOnMouseLeave}\n    >\n      <Grid\n        container\n        direction=\"column\"\n        spacing={0}\n        style={{\n          position: 'relative',\n          width: '100%',\n          height: '100%',\n          padding: theme.spacing(1),\n          ...(state.longRunningQuery ? { opacity: '0.3' } : {}),\n        }}\n      >\n        {cellNode && layout && state.sn && (\n          <Header layout={layout} sn={state.sn} anchorEl={cellNode} hovering={hovering}>\n            &nbsp;\n          </Header>\n        )}\n        <Grid\n          item\n          xs\n          style={{\n            height: '100%',\n          }}\n          ref={contentRef}\n        >\n          {Content}\n        </Grid>\n        <Footer layout={layout} />\n      </Grid>\n      {state.longRunningQuery && <LongRunningQuery canCancel={canCancel} canRetry={canRetry} api={longrunning} />}\n    </Paper>\n  );\n});\nexport default Cell;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport Cell from './Cell';\n\nexport default function glue({ halo, element, model, initialSnOptions, onMount, initialError }) {\n  const { root } = halo;\n  const cellRef = React.createRef();\n  const portal = ReactDOM.createPortal(\n    <Cell\n      ref={cellRef}\n      halo={halo}\n      model={model}\n      initialSnOptions={initialSnOptions}\n      initialError={initialError}\n      onMount={onMount}\n    />,\n    element,\n    model.id\n  );\n\n  const unmount = () => {\n    root.remove(portal);\n    model.removeListener('closed', unmount);\n  };\n\n  model.on('closed', unmount);\n\n  root.add(portal);\n\n  return [unmount, cellRef];\n}\n","function isObject(v) {\n  return v != null && !Array.isArray(v) && typeof v === 'object';\n}\n\nfunction isEqual(a, b) {\n  if (isObject(a) && isObject(b)) {\n    return JSON.stringify(a) === JSON.stringify(b);\n  }\n  if (Array.isArray(a) || Array.isArray(b)) {\n    return false;\n  }\n  return a === b;\n}\n\nexport default function getPatches(path = '/', obj, old) {\n  const patches = [];\n  Object.keys(obj).forEach((prop) => {\n    const v = obj[prop];\n    if (typeof old[prop] === 'object' && typeof v === 'object' && !Array.isArray(v)) {\n      patches.push(...getPatches(`${path}${prop}/`, obj[prop], old[prop]));\n    } else if (!isEqual(v, old[prop])) {\n      patches.push({\n        qPath: path + prop,\n        qOp: 'add',\n        qValue: JSON.stringify(obj[prop]),\n      });\n    }\n  });\n  return patches;\n}\n","import { convertTo as conversionConvertTo } from '@nebula.js/conversion';\nimport glueCell from './components/glue';\nimport getPatches from './utils/patcher';\n\nconst noopi = () => {};\n\nexport default function viz({ model, halo, initialError, onDestroy = async () => {} } = {}) {\n  let unmountCell = noopi;\n  let cellRef = null;\n  let mountedReference = null;\n  let onMount = null;\n  const mounted = new Promise((resolve) => {\n    onMount = resolve;\n  });\n\n  let initialSnOptions = {};\n\n  const setSnOptions = async (opts) => {\n    if (mountedReference) {\n      (async () => {\n        await mounted;\n        cellRef.current.setSnOptions({\n          ...initialSnOptions,\n          ...opts,\n        });\n      })();\n    } else {\n      // Handle setting options before mount\n      initialSnOptions = {\n        ...initialSnOptions,\n        ...opts,\n      };\n    }\n  };\n\n  /**\n   * @class\n   * @alias Viz\n   * @hideconstructor\n   * @classdesc A controller to further modify a visualization after it has been rendered.\n   * @example\n   * const viz = await embed(app).render({\n   *   element,\n   *   type: 'barchart'\n   * });\n   * viz.destroy();\n   */\n  const api = /** @lends Viz# */ {\n    /**\n     * The id of this visualization's generic object.\n     * @type {string}\n     */\n    id: model.id,\n    /**\n     * Destroys the visualization and removes if from the the DOM.\n     * @example\n     * const viz = await embed(app).render({\n     *   element,\n     *   id: 'abc'\n     * });\n     * viz.destroy();\n     */\n    async destroy() {\n      await onDestroy();\n      unmountCell();\n      unmountCell = noopi;\n    },\n    // ===== unexposed experimental API - use at own risk ======\n    __DO_NOT_USE__: {\n      mount(element) {\n        if (mountedReference) {\n          throw new Error('Already mounted');\n        }\n        mountedReference = element;\n        [unmountCell, cellRef] = glueCell({\n          halo,\n          element,\n          model,\n          initialSnOptions,\n          initialError,\n          onMount,\n        });\n        return mounted;\n      },\n      async applyProperties(props) {\n        const current = await model.getEffectiveProperties();\n        const patches = getPatches('/', props, current);\n        if (patches.length) {\n          return model.applyPatches(patches, true);\n        }\n        return undefined;\n      },\n      options(opts) {\n        setSnOptions(opts);\n      },\n      exportImage() {\n        return cellRef.current.exportImage();\n      },\n      takeSnapshot() {\n        return cellRef.current.takeSnapshot();\n      },\n      /**\n       * Converts the visualization to a different registred type\n       * @ignore\n       * @param {string} newType - Which registered type to convert to\n       * @param {boolean=} forceUpdate - Whether to run setProperties or not, defaults to true.\n       * @returns {Promise<object>} Promise object that resolves to the full property tree of the converted visualizatiom\n       * @example\n       * const viz = await embed(app).render({\n       *   element,\n       *   id: 'abc'\n       * });\n       * viz.convertTo('barChart');\n       */\n      async convertTo({ newType, forceUpdate = true }) {\n        const propertyTree = await conversionConvertTo({ halo, model, cellRef, newType });\n        if (forceUpdate) {\n          await model.setProperties(propertyTree.qProperty);\n        }\n        return propertyTree;\n      },\n    },\n\n    // old QVisualization API\n    // close() {},\n    // exportData() {},\n    // exportImg() {},\n    // exportPdf() {},\n    // setOptions() {}, // applied soft patch\n    // resize() {},\n    // show() {},\n    // toggleDataView() {},\n  };\n\n  return api;\n}\n","/* eslint no-underscore-dangle:0 */\nimport vizualizationAPI from '../viz';\n\nexport default async function init(model, optional, halo, initialError, onDestroy = async () => {}) {\n  const api = vizualizationAPI({\n    model,\n    halo,\n    initialError,\n    onDestroy,\n  });\n  if (optional.options) {\n    api.__DO_NOT_USE__.options(optional.options);\n  }\n  if (optional.element) {\n    await api.__DO_NOT_USE__.mount(optional.element);\n  }\n\n  return api;\n}\n","import populateData from './populator';\nimport init from './initiate';\nimport { subscribe, modelStore } from '../stores/model-store';\n/**\n * @interface CreateConfig\n * @extends BaseConfig\n * @property {string} type\n * @property {string} version\n * @property {(Field[])=} fields\n * @property {qae.GenericObjectProperties=} properties\n */\n\nexport default async function createSessionObject({ type, version, fields, properties, options, element }, halo) {\n  let mergedProps = {};\n  let error;\n  try {\n    const t = halo.types.get({ name: type, version });\n    mergedProps = await t.initialProperties(properties);\n    const sn = await t.supernova();\n    if (fields) {\n      populateData(\n        {\n          sn,\n          properties: mergedProps,\n          fields,\n        },\n        halo\n      );\n    }\n    if (properties && sn && sn.qae.properties.onChange) {\n      sn.qae.properties.onChange.call({}, mergedProps);\n    }\n  } catch (e) {\n    error = e;\n    // minimal dummy object properties to allow it to be created\n    // and rendered with the error\n    mergedProps = {\n      qInfo: {\n        qType: type,\n      },\n      visualization: type,\n    };\n    // console.error(e); // eslint-disable-line\n  }\n  const model = await halo.app.createSessionObject(mergedProps);\n  modelStore.set(model.id, model);\n  const unsubscribe = subscribe(model);\n  const onDestroy = async () => {\n    await halo.app.destroySessionObject(model.id);\n    unsubscribe();\n  };\n  return init(model, { options, element }, halo, error, onDestroy);\n}\n","import init from './initiate';\nimport { modelStore, rpcRequestModelStore } from '../stores/model-store';\n\n/**\n * @interface BaseConfig\n * @property {HTMLElement} element\n * @property {object=} options\n */\n\n/**\n * @interface GetConfig\n * @extends BaseConfig\n * @property {string} id\n */\n\nexport default async function getObject({ id, options, element }, halo) {\n  const key = `${id}`;\n  let rpc = rpcRequestModelStore.get(key);\n  if (!rpc) {\n    rpc = halo.app.getObject(id);\n    rpcRequestModelStore.set(key, rpc);\n  }\n  const model = await rpc;\n  modelStore.set(key, model);\n  return init(model, { options, element }, halo);\n}\n","export default function (flags = {}) {\n  /**\n   * @interface Flags\n   */\n\n  return /** @lends Flags */ {\n    /**\n     * Checks whether the specified flag is enabled.\n     * @param {string} flag - The value flag to check.\n     * @returns {boolean} True if the specified flag is enabled, false otherwise.\n     */\n    isEnabled: (f) => flags[f] === true,\n  };\n}\n","/* eslint no-param-reassign: 0, no-restricted-globals: 0 */\nimport originalExtend from 'extend';\n\nconst extend = originalExtend.bind(null, true);\nconst JSONPatch = {};\nconst { isArray } = Array;\nfunction isObject(v) {\n  return v != null && !Array.isArray(v) && typeof v === 'object';\n}\nfunction isUndef(v) {\n  return typeof v === 'undefined';\n}\nfunction isFunction(v) {\n  return typeof v === 'function';\n}\n\n/**\n * Generate an exact duplicate (with no references) of a specific value.\n *\n * @private\n * @param {Object} The value to duplicate\n * @returns {Object} a unique, duplicated value\n */\nfunction generateValue(val) {\n  if (val) {\n    return extend({}, { val }).val;\n  }\n  return val;\n}\n\n/**\n * An additional type checker used to determine if the property is of internal\n * use or not a type that can be translated into JSON (like functions).\n *\n * @private\n * @param {Object} obj The object which has the property to check\n * @param {String} The property name to check\n * @returns {Boolean} Whether the property is deemed special or not\n */\nfunction isSpecialProperty(obj, key) {\n  return isFunction(obj[key]) || key.substring(0, 2) === '$$' || key.substring(0, 1) === '_';\n}\n\n/**\n * Finds the parent object from a JSON-Pointer (\"/foo/bar/baz\" = \"bar\" is \"baz\" parent),\n * also creates the object structure needed.\n *\n * @private\n * @param {Object} data The root object to traverse through\n * @param {String} The JSON-Pointer string to use when traversing\n * @returns {Object} The parent object\n */\nfunction getParent(data, str) {\n  const seperator = '/';\n  const parts = str.substring(1).split(seperator).slice(0, -1);\n  let numPart;\n\n  parts.forEach((part, i) => {\n    if (i === parts.length) {\n      return;\n    }\n    numPart = +part;\n    const newPart = !isNaN(numPart) ? [] : {};\n    data[numPart || part] = isUndef(data[numPart || part]) ? newPart : data[part];\n    data = data[numPart || part];\n  });\n\n  return data;\n}\n\n/**\n * Cleans an object of all its properties, unless they're deemed special or\n * cannot be removed by configuration.\n *\n * @private\n * @param {Object} obj The object to clean\n */\nfunction emptyObject(obj) {\n  Object.keys(obj).forEach((key) => {\n    const config = Object.getOwnPropertyDescriptor(obj, key);\n\n    if (config.configurable && !isSpecialProperty(obj, key)) {\n      delete obj[key];\n    }\n  });\n}\n\n/**\n * Compare an object with another, could be object, array, number, string, bool.\n * @private\n *\n * @param {Object} a The first object to compare\n * @param {Object} a The second object to compare\n * @returns {Boolean} Whether the objects are identical\n */\nfunction compare(a, b) {\n  let isIdentical = true;\n\n  if (isObject(a) && isObject(b)) {\n    if (Object.keys(a).length !== Object.keys(b).length) {\n      return false;\n    }\n    Object.keys(a).forEach((key) => {\n      if (!compare(a[key], b[key])) {\n        isIdentical = false;\n      }\n    });\n    return isIdentical;\n  }\n  if (isArray(a) && isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n    for (let i = 0, l = a.length; i < l; i += 1) {\n      if (!compare(a[i], b[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return a === b;\n}\n\n/**\n * Generates patches by comparing two arrays.\n *\n * @private\n * @param {Array} oldA The old (original) array, which will be patched\n * @param {Array} newA The new array, which will be used to compare against\n * @returns {Array} An array of patches (if any)\n */\nfunction patchArray(original, newA, basePath) {\n  let patches = [];\n  const oldA = original.slice();\n  let tmpIdx = -1;\n\n  function findIndex(a, id, idx) {\n    if (a[idx] && isUndef(a[idx].qInfo)) {\n      return null;\n    }\n    if (a[idx] && a[idx].qInfo.qId === id) {\n      // shortcut if identical\n      return idx;\n    }\n    for (let ii = 0, ll = a.length; ii < ll; ii += 1) {\n      if (a[ii] && a[ii].qInfo.qId === id) {\n        return ii;\n      }\n    }\n    return -1;\n  }\n\n  if (compare(newA, oldA)) {\n    // array is unchanged\n    return patches;\n  }\n\n  if (!isUndef(newA[0]) && isUndef(newA[0].qInfo)) {\n    // we cannot create patches without unique identifiers, replace array...\n    patches.push({\n      op: 'replace',\n      path: basePath,\n      value: newA,\n    });\n    return patches;\n  }\n\n  for (let i = oldA.length - 1; i >= 0; i -= 1) {\n    tmpIdx = findIndex(newA, oldA[i].qInfo && oldA[i].qInfo.qId, i);\n    if (tmpIdx === -1) {\n      patches.push({\n        op: 'remove',\n        path: `${basePath}/${i}`,\n      });\n      oldA.splice(i, 1);\n    } else {\n      patches = patches.concat(JSONPatch.generate(oldA[i], newA[tmpIdx], `${basePath}/${i}`));\n    }\n  }\n\n  for (let i = 0, l = newA.length; i < l; i += 1) {\n    tmpIdx = findIndex(oldA, newA[i].qInfo && newA[i].qInfo.qId);\n    if (tmpIdx === -1) {\n      patches.push({\n        op: 'add',\n        path: `${basePath}/${i}`,\n        value: newA[i],\n      });\n      oldA.splice(i, 0, newA[i]);\n    } else if (tmpIdx !== i) {\n      patches.push({\n        op: 'move',\n        path: `${basePath}/${i}`,\n        from: `${basePath}/${tmpIdx}`,\n      });\n      oldA.splice(i, 0, oldA.splice(tmpIdx, 1)[0]);\n    }\n  }\n  return patches;\n}\n\n/**\n * Generate an array of JSON-Patch:es following the JSON-Patch Specification Draft.\n *\n * See [specification draft](http://tools.ietf.org/html/draft-ietf-appsawg-json-patch-10)\n *\n * Does NOT currently generate patches for arrays (will replace them)\n * @private\n *\n * @param {Object} original The object to patch to\n * @param {Object} newData The object to patch from\n * @param {String} [basePath] The base path to use when generating the paths for\n *                            the patches (normally not used)\n * @returns {Array} An array of patches\n */\nJSONPatch.generate = function generate(original, newData, basePath) {\n  basePath = basePath || '';\n  let patches = [];\n\n  Object.keys(newData).forEach((key) => {\n    const val = generateValue(newData[key]);\n    const oldVal = original[key];\n    const tmpPath = `${basePath}/${key}`;\n\n    if (compare(val, oldVal) || isSpecialProperty(newData, key)) {\n      return;\n    }\n    if (isUndef(oldVal)) {\n      // property does not previously exist\n      patches.push({\n        op: 'add',\n        path: tmpPath,\n        value: val,\n      });\n    } else if (isObject(val) && isObject(oldVal)) {\n      // we need to generate sub-patches for this, since it already exist\n      patches = patches.concat(JSONPatch.generate(oldVal, val, tmpPath));\n    } else if (isArray(val) && isArray(oldVal)) {\n      patches = patches.concat(patchArray(oldVal, val, tmpPath));\n    } else {\n      // it's a simple property (bool, string, number)\n      patches.push({\n        op: 'replace',\n        path: `${basePath}/${key}`,\n        value: val,\n      });\n    }\n  });\n\n  Object.keys(original).forEach((key) => {\n    if (isUndef(newData[key]) && !isSpecialProperty(original, key)) {\n      // this property does not exist anymore\n      patches.push({\n        op: 'remove',\n        path: `${basePath}/${key}`,\n      });\n    }\n  });\n\n  return patches;\n};\n\n/**\n * Apply a list of patches to an object.\n * @private\n *\n * @param {Object} original The object to patch\n * @param {Array} patches The list of patches to apply\n */\nJSONPatch.apply = function apply(original, patches) {\n  patches.forEach((patch) => {\n    let parent = getParent(original, patch.path);\n    let key = patch.path.split('/').splice(-1)[0];\n    let target = key && isNaN(+key) ? parent[key] : parent[+key] || parent;\n    const from = patch.from ? patch.from.split('/').splice(-1)[0] : null;\n\n    if (patch.path === '/') {\n      parent = null;\n      target = original;\n    }\n\n    if (patch.op === 'add' || patch.op === 'replace') {\n      if (isArray(parent)) {\n        // trust indexes from patches, so don't replace the index if it's an add\n        if (key === '-') {\n          key = parent.length;\n        }\n        parent.splice(+key, patch.op === 'add' ? 0 : 1, patch.value);\n      } else if (isArray(target) && isArray(patch.value)) {\n        const newValues = patch.value.slice();\n        // keep array reference if possible...\n        target.length = 0;\n        target.push(...newValues);\n      } else if (isObject(target) && isObject(patch.value)) {\n        // keep object reference if possible...\n        emptyObject(target);\n        extend(target, patch.value);\n      } else if (!parent) {\n        throw new Error('Patchee is not an object we can patch');\n      } else {\n        // simple value\n        parent[key] = patch.value;\n      }\n    } else if (patch.op === 'move') {\n      const oldParent = getParent(original, patch.from);\n      if (isArray(parent)) {\n        parent.splice(+key, 0, oldParent.splice(+from, 1)[0]);\n      } else {\n        parent[key] = oldParent[from];\n        delete oldParent[from];\n      }\n    } else if (patch.op === 'remove') {\n      if (isArray(parent)) {\n        parent.splice(+key, 1);\n      } else {\n        delete parent[key];\n      }\n    }\n  });\n};\n\n/**\n * Deep clone an object.\n * @private\n *\n * @param {Object} obj The object to clone\n * @returns {Object} A new object identical to the `obj`\n */\nJSONPatch.clone = function clone(obj) {\n  return extend({}, obj);\n};\n\n/**\n * Creates a JSON-patch.\n * @private\n *\n * @param {String} op The operation of the patch. Available values: \"add\", \"remove\", \"move\"\n * @param {Object} [val] The value to set the `path` to. If `op` is `move`, `val`\n *                       is the \"from JSON-path\" path\n * @param {String} path The JSON-path for the property to change (e.g. \"/qHyperCubeDef/columnOrder\")\n * @returns {Object} A patch following the JSON-patch specification\n */\nJSONPatch.createPatch = function createPatch(op, val, path) {\n  const patch = {\n    op: op.toLowerCase(),\n    path,\n  };\n  if (patch.op === 'move') {\n    patch.from = val;\n  } else if (typeof val !== 'undefined') {\n    patch.value = val;\n  }\n  return patch;\n};\n\n/**\n * Apply the differences of two objects (keeping references if possible).\n * Identical to running `JSONPatch.apply(original, JSONPatch.generate(original, newData));`\n * @private\n *\n * @param {Object} original The object to update/patch\n * @param {Object} newData the object to diff against\n *\n * @example\n * var obj1 = { foo: [1,2,3], bar: { baz: true, qux: 1 } };\n * var obj2 = { foo: [4,5,6], bar: { baz: false } };\n * JSONPatch.updateObject(obj1, obj2);\n * // => { foo: [4,5,6], bar: { baz: false } };\n */\nJSONPatch.updateObject = function updateObject(original, newData) {\n  if (!Object.keys(original).length) {\n    extend(original, newData);\n    return;\n  }\n  JSONPatch.apply(original, JSONPatch.generate(original, newData));\n};\n\nexport default JSONPatch;\n","import EventEmitter from 'node-event-emitter';\n\nconst mixin = (obj) => {\n  /* eslint no-param-reassign: 0 */\n  Object.keys(EventEmitter.prototype).forEach((key) => {\n    obj[key] = EventEmitter.prototype[key];\n  });\n  EventEmitter.init(obj);\n  return obj;\n};\n\nconst actionWrapper = (component) => (item) => {\n  const wrapped = mixin({\n    ...item,\n    action() {\n      if (typeof item.action === 'function') {\n        item.action.call(wrapped, component);\n      }\n      wrapped.emit('changed');\n    },\n    enabled() {\n      if (typeof item.enabled === 'function') {\n        return item.enabled.call(wrapped, component);\n      }\n      return true;\n    },\n    active:\n      typeof item.active === 'function'\n        ? function active() {\n            return item.active.call(wrapped, component);\n          }\n        : undefined,\n  });\n\n  return wrapped;\n};\n\nexport default function ({ sn, component }) {\n  const actions = {};\n  const selectionToolbarItems = [];\n  const w = actionWrapper(component);\n  ((sn.definition.selectionToolbar || {}).items || []).forEach((item) => {\n    const wrapped = w(item);\n    // TODO - check if key exists\n    actions[item.key] = wrapped;\n    selectionToolbarItems.push(wrapped);\n  });\n\n  (sn.definition.actions || []).forEach((item) => {\n    const wrapped = w(item);\n    // TODO - check if key exists\n    actions[item.key] = wrapped;\n  });\n\n  return {\n    actions,\n    selectionToolbarItems,\n    destroy() {\n      selectionToolbarItems.length = 0;\n    },\n  };\n}\n","/* eslint no-underscore-dangle: 0 */\n/* eslint no-param-reassign: 0 */\n/* eslint no-console: 0 */\n/* eslint no-use-before-define: 0 */\n\n// Hooks implementation heavily inspired by prect hooks\n\nlet currentComponent;\nlet currentIndex;\n\nfunction depsChanged(prevDeps, deps) {\n  if (!prevDeps) {\n    return true;\n  }\n  if (deps.length !== prevDeps.length) {\n    return true;\n  }\n\n  for (let i = 0; i < deps.length; i++) {\n    if (prevDeps[i] !== deps[i]) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function initiate(component, { explicitResize = false } = {}) {\n  component.__hooks = {\n    obsolete: false,\n    error: false,\n    chain: {\n      promise: null,\n      resolve: () => {},\n    },\n    list: [],\n    snaps: [],\n    actions: {\n      list: [],\n    },\n    pendingEffects: [],\n    pendingLayoutEffects: [],\n    pendingPromises: [],\n    resizer: {\n      setters: [],\n      explicitResize,\n    },\n  };\n}\n\nexport function teardown(component) {\n  flushPending(component.__hooks.list, true);\n\n  component.__hooks.obsolete = true;\n  component.__hooks.list.length = 0;\n  component.__hooks.pendingEffects.length = 0;\n  component.__hooks.pendingLayoutEffects.length = 0;\n  component.__hooks.actions = null;\n  component.__hooks.imperativeHandle = null;\n  component.__hooks.resizer = null;\n\n  component.__actionsDispatch = null;\n\n  clearTimeout(component.__hooks.micro);\n  cancelAnimationFrame(component.__hooks.macro);\n}\n\nexport async function run(component) {\n  if (component.__hooks.obsolete) {\n    return Promise.resolve();\n  }\n\n  currentIndex = -1;\n  currentComponent = component;\n\n  let num = -1;\n\n  if (currentComponent.__hooks.initiated) {\n    num = currentComponent.__hooks.list.length;\n  }\n\n  try {\n    currentComponent.fn.call(null);\n  } catch (e) {\n    console.error(e);\n  }\n\n  currentComponent.__hooks.initiated = true;\n\n  if (__NEBULA_DEV__) {\n    if (num > -1 && num !== currentComponent.__hooks.list.length) {\n      console.error('Detected a change in the order of hooks called.');\n    }\n  }\n\n  const hooks = currentComponent.__hooks;\n  dispatchActions(currentComponent);\n\n  currentIndex = undefined;\n  currentComponent = undefined;\n\n  if (!hooks.chain.promise) {\n    hooks.chain.promise = new Promise((resolve) => {\n      hooks.chain.resolve = resolve;\n    });\n  }\n\n  flushMicro(hooks);\n  scheduleMacro(hooks);\n\n  return hooks.chain.promise;\n}\n\nfunction flushPending(list, skipUpdate) {\n  try {\n    list.forEach((fx) => {\n      // teardown existing\n      typeof fx.teardown === 'function' ? fx.teardown() : null;\n\n      // update\n      if (!skipUpdate) {\n        fx.teardown = fx.value[0]();\n      }\n    });\n  } catch (e) {\n    console.error(e);\n  }\n\n  list.length = 0;\n}\n\nfunction flushMicro(hooks) {\n  flushPending(hooks.pendingLayoutEffects);\n}\nfunction flushMacro(hooks) {\n  flushPending(hooks.pendingEffects);\n  hooks.macro = null;\n\n  maybeEndChain(hooks); // eslint-disable-line no-use-before-define\n}\n\nfunction maybeEndChain(hooks) {\n  if (hooks.pendingPromises.length || hooks.micro || hooks.macro) {\n    return;\n  }\n  hooks.chain.promise = null;\n  hooks.chain.resolve();\n}\n\nexport function runSnaps(component, layout) {\n  try {\n    return Promise.all(\n      component.__hooks.snaps.map((h) => {\n        return Promise.resolve(h.fn(layout));\n      })\n    ).then((snaps) => {\n      return snaps[snaps.length - 1];\n    });\n  } catch (e) {\n    console.error(e);\n  }\n  return Promise.resolve();\n}\n\nexport function getImperativeHandle(component) {\n  return component.__hooks.imperativeHandle;\n}\n\nfunction dispatchActions(component) {\n  if (component.__actionsDispatch && component.__hooks.actions.changed) {\n    component.__actionsDispatch(component.__hooks.actions.list.slice());\n    component.__hooks.actions.changed = false;\n  }\n}\n\nexport function observeActions(component, callback) {\n  component.__actionsDispatch = callback;\n  if (component.__hooks) {\n    component.__hooks.actions.changed = true;\n    dispatchActions(component);\n  }\n}\n\nfunction getHook(idx) {\n  if (typeof currentComponent === 'undefined') {\n    throw new Error('Invalid stardust hook call. Hooks can only be called inside a visualization component.');\n  }\n  const hooks = currentComponent.__hooks;\n  if (idx >= hooks.list.length) {\n    hooks.list.push({});\n  }\n  return hooks.list[idx];\n}\n\nfunction scheduleMicro(component) {\n  if (component.__hooks.micro) {\n    return;\n  }\n\n  component.__hooks.micro = setTimeout(() => {\n    component.__hooks.micro = null;\n    run(component);\n  }, 0);\n}\n\nfunction scheduleMacro(hooks) {\n  if (hooks.macro) {\n    return;\n  }\n\n  hooks.macro = requestAnimationFrame(() => {\n    flushMacro(hooks);\n  });\n}\n\nfunction useInternalContext(name) {\n  getHook(++currentIndex);\n  const ctx = currentComponent.context;\n  return ctx[name];\n}\n\nexport function updateRectOnNextRun(component) {\n  if (component.__hooks) {\n    component.__hooks.resizer.update = true;\n  }\n}\n\n// ========  EXTERNAL =========\n\nexport function hook(cb) {\n  return {\n    __hooked: true,\n    fn: cb,\n    initiate,\n    run,\n    teardown,\n    runSnaps,\n    observeActions,\n    getImperativeHandle,\n    updateRectOnNextRun,\n  };\n}\n\n/**\n * @template S\n * @interface SetStateFn\n * @param {S|function(S):S} newState - The new state\n */\n\n/**\n * Creates a stateful value.\n * @entry\n * @template S\n * @param {S|function():S} initialState - The initial state.\n * @returns {Array<S,SetStateFn<S>>} The value and a function to update it.\n * @example\n * import { useState } from '@nebula.js/stardust';\n * // ...\n * // initiate with simple primitive value\n * const [zoomed, setZoomed] = useState(false);\n *\n * // update\n * setZoomed(true);\n *\n * // lazy initiation\n * const [value, setValue] = useState(() => heavy());\n *\n */\nexport function useState(initial) {\n  const h = getHook(++currentIndex);\n  if (!h.value) {\n    // initiate\n    h.component = currentComponent;\n    const setState = (s) => {\n      if (h.component.__hooks.obsolete) {\n        if (__NEBULA_DEV__) {\n          throw new Error(\n            'Calling setState on an unmounted component is a no-op and indicates a memory leak in your component.'\n          );\n        }\n        return;\n      }\n      const v = typeof s === 'function' ? s(h.value[0]) : s;\n      if (v !== h.value[0]) {\n        h.value[0] = v;\n        scheduleMicro(h.component);\n      }\n    };\n    h.value = [typeof initial === 'function' ? initial() : initial, setState];\n  }\n  return h.value;\n}\n\n/**\n * @typedef {function():(void | function():void)} EffectCallback\n */\n\n/**\n * Triggers a callback function when a dependant value changes.\n * @entry\n * @param {EffectCallback} effect - The callback.\n * @param {Array<any>=} deps - The dependencies which should trigger the callback.\n * @example\n * import { useEffect } from '@nebula.js/stardust';\n * // ...\n * useEffect(() => {\n *   console.log('mounted');\n *   return () => {\n *     console.log('unmounted');\n *   };\n * }, []);\n */\nexport function useEffect(cb, deps) {\n  if (__NEBULA_DEV__) {\n    if (typeof deps !== 'undefined' && !Array.isArray(deps)) {\n      throw new Error('Invalid dependencies. Second argument must be an array.');\n    }\n  }\n  const h = getHook(++currentIndex);\n  if (depsChanged(h.value ? h.value[1] : undefined, deps)) {\n    h.value = [cb, deps];\n    if (currentComponent.__hooks.pendingEffects.indexOf(h) === -1) {\n      currentComponent.__hooks.pendingEffects.push(h);\n    }\n  }\n}\n\n// don't expose this hook since it's no different than useEffect except for the timing\nfunction useLayoutEffect(cb, deps) {\n  if (__NEBULA_DEV__) {\n    if (typeof deps !== 'undefined' && !Array.isArray(deps)) {\n      throw new Error('Invalid dependencies. Second argument must be an array.');\n    }\n  }\n  const h = getHook(++currentIndex);\n  if (depsChanged(h.value ? h.value[1] : undefined, deps)) {\n    h.value = [cb, deps];\n    currentComponent.__hooks.pendingLayoutEffects.push(h);\n  }\n}\n\n/**\n * Creates a stateful value when a dependant changes.\n * @entry\n * @template T\n * @param {function():T} factory - The factory function.\n * @param {Array<any>} deps - The dependencies.\n * @returns {T} The value returned from the factory function.\n * @example\n * import { useMemo } from '@nebula.js/stardust';\n * // ...\n * const v = useMemo(() => {\n *   return doSomeHeavyCalculation();\n * }), []);\n */\nexport function useMemo(fn, deps) {\n  if (__NEBULA_DEV__) {\n    if (!deps) {\n      console.warn('useMemo called without dependencies.');\n    }\n  }\n  const h = getHook(++currentIndex);\n  if (depsChanged(h.value ? h.value[0] : undefined, deps)) {\n    h.value = [deps, fn()];\n  }\n  return h.value[1];\n}\n\n/**\n * Runs a callback function when a dependant changes.\n * @entry\n * @template P\n * @param {function():Promise<P>} factory - The factory function that calls the promise.\n * @param {Array<any>=} deps - The dependencies.\n * @returns {Array<P,Error>} The resolved value.\n * @example\n * import { usePromise } from '@nebula.js/stardust';\n * import { useModel } from '@nebula.js/stardust';\n * // ...\n * const model = useModel();\n * const [resolved, rejected] = usePromise(() => model.getLayout(), []);\n */\nexport function usePromise(p, deps) {\n  const [obj, setObj] = useState(() => ({\n    resolved: undefined,\n    rejected: undefined,\n    state: 'pending',\n  }));\n\n  const h = getHook(++currentIndex);\n  if (!h.component) {\n    h.component = currentComponent;\n  }\n\n  useLayoutEffect(() => {\n    let canceled = false;\n    h.teardown = () => {\n      canceled = true;\n      h.teardown = null;\n      const idx = h.component.__hooks.pendingPromises.indexOf(h);\n      if (idx > -1) {\n        h.component.__hooks.pendingPromises.splice(idx, 1);\n      }\n    };\n\n    // setObj({\n    //   ...obj,\n    //   state: 'pending',\n    // });\n\n    p()\n      .then((v) => {\n        if (canceled) {\n          return;\n        }\n        h.teardown && h.teardown();\n        setObj({\n          resolved: v,\n          rejected: undefined,\n          state: 'resolved',\n        });\n      })\n      .catch((e) => {\n        if (canceled) {\n          return;\n        }\n        h.teardown && h.teardown();\n        setObj({\n          resolved: undefined,\n          rejected: e,\n          state: 'resolved',\n        });\n      });\n\n    h.component.__hooks.pendingPromises.push(h);\n\n    return () => {\n      h.teardown && h.teardown();\n    };\n  }, deps);\n\n  return [obj.resolved, obj.rejected];\n}\n\n// ---- composed hooks ------\n/**\n * Gets the HTMLElement this visualization is rendered into.\n * @entry\n * @returns {HTMLElement}\n * @example\n * import { useElement } from '@nebula.js/stardust';\n * // ...\n * const el = useElement();\n * el.innerHTML = 'Hello!';\n */\nexport function useElement() {\n  return useInternalContext('element');\n}\n\n/**\n * @interface Rect\n * @property {number} top\n * @property {number} left\n * @property {number} width\n * @property {number} height\n */\n\n/**\n * Gets the size of the HTMLElement the visualization is rendered into.\n * @entry\n * @returns {Rect} The size of the element.\n * @example\n * import { useRect } from '@nebula.js/stardust';\n * // ...\n * const rect = useRect();\n * useEffect(() => {\n *   console.log('resize');\n * }, [rect.width, rect.height])\n */\nexport function useRect() {\n  const element = useElement();\n  const ref = currentComponent.__hooks.resizer;\n\n  const [rect, setRect] = useState(() => {\n    const { left, top, width, height } = element.getBoundingClientRect();\n    return { left, top, width, height };\n  });\n\n  ref.current = rect;\n\n  if (ref.setters.indexOf(setRect) === -1) {\n    ref.setters.push(setRect);\n  }\n\n  // a forced resize should alwas update size regardless of whether ResizeObserver is available\n  if (ref.update && ref.resize) {\n    ref.update = false;\n    ref.resize();\n  }\n\n  useLayoutEffect(() => {\n    if (ref.initiated) {\n      return undefined;\n    }\n    ref.initiated = true;\n\n    const handleResize = () => {\n      // TODO - should we really care about left/top?\n      const { left, top, width, height } = element.getBoundingClientRect();\n      const r = ref.current;\n\n      if (r.width !== width || r.height !== height || r.left !== left || r.top !== top) {\n        ref.setters.forEach((setR) => setR({ left, top, width, height }));\n      }\n    };\n\n    ref.resize = () => {\n      handleResize();\n    };\n\n    // if component is configured with explicitResize, then we skip the\n    // size observer and let the user control the resize themselves\n    if (ref.explicitResize) {\n      return () => {\n        ref.resize = undefined;\n      };\n    }\n\n    // TODO - document that ResizeObserver needs to be polyfilled by the user\n    // if they want auto resize to work\n    if (typeof ResizeObserver === 'function') {\n      let resizeObserver = new ResizeObserver(handleResize);\n      resizeObserver.observe(element);\n      return () => {\n        resizeObserver.unobserve(element);\n        resizeObserver.disconnect(element);\n        resizeObserver = null;\n        ref.resize = undefined;\n      };\n    }\n    return undefined;\n  }, [element]);\n\n  return rect;\n}\n\n/**\n * Gets the layout of the generic object associated with this visualization.\n * @entry\n * @returns {qae.GenericObjectLayout}\n * @example\n * import { useLayout } from '@nebula.js/stardust';\n * // ...\n * const layout = useLayout();\n * console.log(layout);\n */\nexport function useLayout() {\n  return useInternalContext('layout');\n}\n\n/**\n * Gets the layout of the generic object associated with this visualization.\n *\n * Unlike the regular layout, a _stale_ layout is not changed when a generic object enters\n * the modal state. This is mostly notable in that `qSelectionInfo.qInSelections` in the layout is\n * always `false`.\n * The returned value from `useStaleLayout()` and `useLayout()` are identical when the object\n * is not in a modal state.\n * @entry\n * @returns {qae.GenericObjectLayout}\n * @example\n * import { useStaleLayout } from '@nebula.js/stardust';\n * // ...\n * const staleLayout = useStaleLayout();\n * console.log(staleLayout);\n */\nexport function useStaleLayout() {\n  const layout = useInternalContext('layout');\n  const [ref] = useState({ current: layout });\n  if (!layout.qSelectionInfo || !layout.qSelectionInfo.qInSelections) {\n    ref.current = layout;\n  }\n  return ref.current;\n}\n\n/**\n * Gets the layout of the app associated with this visualization.\n * @entry\n * @returns {qae.NxAppLayout} The app layout\n * @example\n * import { useAppLayout } from '@nebula.js/stardust';\n * // ...\n * const appLayout = useAppLayout();\n * console.log(appLayout.qLocaleInfo);\n */\nexport function useAppLayout() {\n  return useInternalContext('appLayout');\n}\n\n/**\n * Gets the generic object API of the generic object connected to this visualization.\n * @entry\n * @returns {enigma.GenericObject|undefined}\n * @example\n * import { useModel } from '@nebula.js/stardust';\n * // ...\n * const model = useModel();\n * useEffect(() => {\n *   model.getInfo().then(info => {\n *     console.log(info);\n *   })\n * }, []);\n */\nexport function useModel() {\n  const model = useInternalContext('model');\n  return model && model.session ? model : undefined;\n}\n\n/**\n * Gets the doc API.\n * @entry\n * @returns {enigma.Doc|undefined} The doc API.\n * @example\n * import { useApp } from '@nebula.js/stardust';\n * // ...\n * const app = useApp();\n * useEffect(() => {\n *   app.getAllInfos().then(infos => {\n *     console.log(infos);\n *   })\n * }, []);\n */\nexport function useApp() {\n  const app = useInternalContext('app');\n  return app && app.session ? app : undefined;\n}\n\n/**\n * Gets the global API.\n * @entry\n * @returns {enigma.Global|undefined} The global API.\n * @example\n * import { useGlobal } from '@nebula.js/stardust';\n *\n * // ...\n * const g = useGlobal();\n * useEffect(() => {\n *   g.engineVersion().then(version => {\n *     console.log(version);\n *   })\n * }, []);\n */\nexport function useGlobal() {\n  const global = useInternalContext('global');\n  return global && global.session ? global : undefined;\n}\n\n/**\n * Gets the object selections.\n * @entry\n * @returns {ObjectSelections} The object selections.\n * @example\n * import { useSelections } from '@nebula.js/stardust';\n * import { useElement } from '@nebula.js/stardust';\n * import { useEffect } from '@nebula.js/stardust';\n * // ...\n * const selections = useSelections();\n * const element = useElement();\n * useEffect(() => {\n *   const onClick = () => {\n *     selections.begin('/qHyperCubeDef');\n *   };\n *   element.addEventListener('click', onClick);\n *   return () => {\n *     element.removeEventListener('click', onClick);\n *   };\n * }, []);\n */\nexport function useSelections() {\n  return useInternalContext('selections');\n}\n\n/**\n * Gets the theme.\n * @entry\n * @returns {Theme} The theme.\n * @example\n * import { useTheme } from '@nebula.js/stardust';\n *\n * const theme = useTheme();\n * console.log(theme.getContrastinColorTo('#ff0000'));\n */\nexport function useTheme() {\n  return useInternalContext('theme');\n}\n\n/**\n * Gets the translator.\n * @entry\n * @returns {Translator} The translator.\n * @example\n * import { useTranslator } from '@nebula.js/stardust';\n * // ...\n * const translator = useTranslator();\n * console.log(translator.get('SomeString'));\n */\nexport function useTranslator() {\n  return useInternalContext('translator');\n}\n\n/**\n * @template A\n * @interface ActionDefinition\n * @property {A} action\n * @property {boolean=} hidden\n * @property {boolean=} disabled\n * @property {object=} icon\n * @property {string} [icon.viewBox=\"0 0 16 16\"]\n * @property {Array<object>} icon.shapes\n * @property {string} icon.shapes[].type\n * @property {object=} icon.shapes[].attrs\n */\n\n/**\n * Registers a custom action.\n * @entry\n * @template A\n * @param {function():ActionDefinition<A>} factory\n * @param {Array<any>=} deps\n * @returns {A}\n *\n * @example\n * import { useAction } from '@nebula.js/stardust';\n * // ...\n * const [zoomed, setZoomed] = useState(false);\n * const act = useAction(() => ({\n *   hidden: false,\n *   disabled: zoomed,\n *   action() {\n *     setZoomed(prev => !prev);\n *   },\n *   icon: {}\n * }), [zoomed]);\n */\nexport function useAction(fn, deps) {\n  const [ref] = useState({\n    action() {\n      ref._config.action.call(null);\n    },\n  });\n\n  if (!ref.component) {\n    ref.component = currentComponent;\n    currentComponent.__hooks.actions.list.push(ref);\n  }\n  useMemo(() => {\n    const a = fn();\n    ref._config = a;\n\n    ref.active = a.active || false;\n    ref.disabled = a.disabled || false;\n    ref.hidden = a.hidden || false;\n    ref.label = a.label || '';\n    ref.getSvgIconShape = a.icon ? () => a.icon : undefined;\n\n    ref.key = a.key || ref.component.__hooks.actions.list.length;\n\n    ref.component.__hooks.actions.changed = true;\n  }, deps);\n\n  return ref.action;\n}\n\n/**\n * @interface Constraints\n * @property {boolean=} passive\n * @property {boolean=} active\n * @property {boolean=} select\n */\n\n/**\n * Gets the desired constraints that should be applied when rendering the visualization.\n *\n * The constraints are set on the embed configuration before the visualization is rendered\n * and should respected by you when implementing the visualization.\n * @entry\n * @returns {Constraints}\n * @example\n * // configure embed to disallow active interactions when rendering\n * embed(app, {\n *   constraints: {\n *     active: true, // do not allow interactions\n *   }\n * }).render({ element, id: 'sdfsdf' });\n *\n * @example\n * import { useConstraints } from '@nebula.js/stardust';\n * // ...\n * const constraints = useConstraints();\n * useEffect(() => {\n *   if (constraints.active) {\n *     // do not add any event listener if active constraint is set\n *     return undefined;\n *   }\n *   const listener = () => {};\n *   element.addEventListener('click', listener);\n *   return () => {\n *     element.removeEventListener('click', listener);\n *   };\n * }, [constraints])\n *\n */\nexport function useConstraints() {\n  return useInternalContext('constraints');\n}\n\n/**\n * Gets the options object provided when rendering the visualization.\n *\n * This is an empty object by default but enables customization of the visualization through this object.\n * Options are different from setting properties on the generic object in that options\n * are only temporary settings applied to the visualization when rendered.\n *\n * You have the responsibility to provide documentation of the options you support, if any.\n * @entry\n * @returns {object}\n *\n * @example\n * // when embedding the visualization, anything can be set in options\n * embed(app).render({\n *   element,\n *   type: 'my-chart',\n *   options: {\n *     showNavigation: true,\n *   }\n * });\n *\n * @example\n * // it is up to you use and implement the provided options\n * import { useOptions } from '@nebula.js/stardust';\n * import { useEffect } from '@nebula.js/stardust';\n * // ...\n * const options = useOptions();\n * useEffect(() => {\n *   if (!options.showNavigation) {\n *     // hide navigation\n *   } else {\n *     // show navigation\n *   }\n * }, [options.showNavigation]);\n *\n */\nexport function useOptions() {\n  return useInternalContext('options');\n}\n\n/**\n * TODO before making public - expose getImperativeHandle on Viz\n * Exposes an API to the external environment.\n *\n * This is an empty object by default, but enables you to provide a custom API of your visualization to\n * make it possible to control after it has been rendered.\n *\n * You can only use this hook once, calling it more than once is considered an error.\n * @entry\n * @private\n * @template T\n * @param {function():T} factory\n * @param {Array<any>=} deps\n * @example\n * import { useImperativeHandle } form '@nebula.js/stardust';\n * // ...\n * useImperativeHandle(() => ({\n *   resetZoom() {\n *     setZoomed(false);\n *   }\n * }));\n *\n * @example\n * // when embedding the visualization, you can get a handle to this API\n * // and use it to control the visualization\n * const ctl = await embed(app).render({\n *   element,\n *   type: 'my-chart',\n * });\n * ctl.getImperativeHandle().resetZoom();\n */\nexport function useImperativeHandle(fn, deps) {\n  const h = getHook(++currentIndex);\n  if (!h.imperative) {\n    if (__NEBULA_DEV__) {\n      if (currentComponent.__hooks.imperativeHandle) {\n        throw new Error('useImperativeHandle already used.');\n      }\n    }\n    h.imperative = true;\n  }\n\n  if (depsChanged(h.value ? h.value[0] : undefined, deps)) {\n    const v = fn();\n    h.value = [deps, v];\n    currentComponent.__hooks.imperativeHandle = v;\n  }\n}\n\n/**\n * Registers a callback that is called when a snapshot is taken.\n * @entry\n * @param {function(qae.GenericObjectLayout): Promise<qae.GenericObjectLayout>} snapshotCallback\n * @example\n * import { onTakeSnapshot } from '@nebula.js/stardust';\n * import { useState } from '@nebula.js/stardust';\n * import { useLayout } from '@nebula.js/stardust';\n *\n * const layout = useLayout();\n * const [zoomed] = useState(layout.isZoomed || false);\n *\n * onTakeSnapshot((copyOfLayout) => {\n *   copyOfLayout.isZoomed = zoomed;\n *   return Promise.resolve(copyOfLayout);\n * });\n */\nexport function onTakeSnapshot(cb) {\n  const h = getHook(++currentIndex);\n  if (!h.value) {\n    h.value = 1;\n    currentComponent.__hooks.snaps.push(h);\n  }\n  h.fn = cb;\n}\n","/* eslint no-underscore-dangle: 0 */\n\nimport EventEmitter from 'node-event-emitter';\n\nimport JSONPatch from './json-patch';\nimport actionhero from './action-hero';\n\nimport { hook, run } from './hooks';\n\nconst defaultComponent = {\n  app: null,\n  model: null,\n  actions: null,\n  selections: null,\n  created: () => {},\n  mounted: () => {},\n  render: () => {},\n  resize: () => {},\n  willUnmount: () => {},\n  destroy: () => {},\n  emit: () => {},\n  getViewState: () => {},\n\n  // temporary\n  observeActions() {},\n  setSnapshotData: (snapshot) => Promise.resolve(snapshot),\n};\n\nconst reservedKeys = Object.keys(defaultComponent);\n\nconst mixin = (obj) => {\n  /* eslint no-param-reassign: 0 */\n  Object.keys(EventEmitter.prototype).forEach((key) => {\n    obj[key] = EventEmitter.prototype[key];\n  });\n  EventEmitter.init(obj);\n  return obj;\n};\n\nfunction createWithHooks(generator, opts, galaxy) {\n  if (__NEBULA_DEV__) {\n    if (generator.component.run !== run) {\n      // eslint-disable-next-line no-console\n      console.warn('Detected multiple supernova modules, this might cause problems.');\n    }\n  }\n  const qGlobal = opts.app && opts.app.session ? opts.app.session.getObjectApi({ handle: -1 }) : undefined;\n\n  // use a deep comparison for 'small' objects\n  let hasRun = false;\n  const current = {};\n  const deepCheck = ['appLayout', 'constraints'];\n  const forcedConstraints = {};\n\n  // select should be a constraint when a real model is not available\n  if (!opts.model || !opts.model.session) {\n    forcedConstraints.select = true;\n  }\n\n  const c = {\n    context: {\n      // static values that are not expected to\n      // change during the component's life\n      // --------------------\n      model: opts.model,\n      app: opts.app,\n      global: qGlobal,\n      selections: opts.selections,\n      element: undefined, // set on mount\n      // ---- singletons ----\n      theme: undefined,\n      translator: galaxy.translator,\n      // --- dynamic values ---\n      layout: {},\n      appLayout: {},\n      constraints: forcedConstraints,\n      options: {},\n    },\n    fn: generator.component.fn,\n    created() {},\n    mounted(element) {\n      this.context.element = element;\n      generator.component.initiate(c, {\n        explicitResize: !!opts.explicitResize,\n      });\n    },\n    render(r) {\n      let changed = !hasRun || false;\n\n      if (r) {\n        if (r.layout && r.layout !== this.context.layout) {\n          changed = true;\n          this.context.layout = r.layout;\n        }\n        if (r.context && r.context.theme) {\n          // changed is set further down only if the name is different\n          this.context.theme = r.context.theme;\n        }\n\n        if (r.options) {\n          // options could contain anything including methods, classes, cyclical references\n          // so we can't use JSON parse for comparison.\n          // but we can do a shallow reference check on the first level to check if\n          // options have changed. if it has changed then create a new reference for\n          // the options object to ensure callbacks are triggered\n          const op = {};\n          let opChanged = false;\n          Object.keys(r.options).forEach((key) => {\n            op[key] = r.options[key];\n            if (this.context.options[key] !== r.options[key]) {\n              opChanged = true;\n            }\n          });\n          if (opChanged) {\n            this.context.options = op;\n            changed = true;\n          }\n        }\n\n        // do a deep check on 'small' objects\n        deepCheck.forEach((key) => {\n          const ref = r.context;\n          if (ref && Object.prototype.hasOwnProperty.call(ref, key)) {\n            let s = JSON.stringify(ref[key]);\n            if (key === 'constraints') {\n              s = JSON.stringify({ ...ref[key], ...forcedConstraints });\n            }\n            if (s !== current[key]) {\n              changed = true;\n              current[key] = s;\n              // create new object reference to ensure useEffect/useMemo/useCallback\n              // is triggered if the object is used a dependency\n              this.context[key] = JSON.parse(s);\n            }\n          }\n        });\n      } else {\n        changed = true;\n      }\n\n      // theme and translator are singletons so their reference won't change, we do\n      // however need to observe if their internal content has changed (name, language) and\n      // trigger an update if they have\n      if (this.context.theme && this.context.theme.name() !== current.themeName) {\n        changed = true;\n        current.themeName = this.context.theme.name();\n      }\n      if (this.context.translator.language() !== current.language) {\n        changed = true;\n        current.language = c.context.translator.language();\n      }\n\n      // TODO - observe what hooks are used, and only trigger run if values associated\n      // with those hooks have changed, i.e. if layout has changed but useLayout() isn't called\n      // then there is no need to call run\n\n      if (changed) {\n        hasRun = true;\n        this.currentResult = generator.component.run(this);\n        return this.currentResult;\n      }\n      return this.currentResult || Promise.resolve();\n    },\n    resize() {\n      // resize should never really by necesseary since the ResizeObserver\n      // in useRect observes changes on the size of the object, the only time it might\n      // be necessary is on IE 11 when the object is resized without the window changing size\n      generator.component.updateRectOnNextRun(this);\n      return this.render();\n    },\n    willUnmount() {\n      generator.component.teardown(this);\n    },\n    setSnapshotData(layout) {\n      return generator.component.runSnaps(this, layout);\n    },\n    getImperativeHandle() {\n      return generator.component.getImperativeHandle(this);\n    },\n    destroy() {},\n    observeActions(callback) {\n      generator.component.observeActions(this, callback);\n    },\n    isHooked: true,\n  };\n\n  deepCheck.forEach((key) => {\n    current[key] = JSON.stringify(c.context[key]);\n  });\n  current.themeName = c.context.theme ? c.context.theme.name() : undefined;\n  current.language = c.context.translator ? c.context.translator.language() : undefined;\n\n  Object.assign(c, {\n    selections: opts.selections,\n  });\n\n  return [c, null];\n}\n\nfunction createClassical(generator, opts) {\n  if (__NEBULA_DEV__) {\n    // eslint-disable-next-line no-console\n    console.warn('Obsolete API - time to get hooked!');\n  }\n  const componentInstance = {\n    ...defaultComponent,\n  };\n\n  mixin(componentInstance);\n\n  const userInstance = {\n    emit(...args) {\n      componentInstance.emit(...args);\n    },\n  };\n\n  Object.keys(generator.component || {}).forEach((key) => {\n    if (reservedKeys.indexOf(key) !== -1) {\n      componentInstance[key] = generator.component[key].bind(userInstance);\n    } else {\n      userInstance[key] = generator.component[key];\n    }\n  });\n\n  const hero = actionhero({\n    sn: generator,\n    component: userInstance,\n  });\n\n  const qGlobal = opts.app && opts.app.session ? opts.app.session.getObjectApi({ handle: -1 }) : null;\n\n  Object.assign(userInstance, {\n    model: opts.model,\n    app: opts.app,\n    global: qGlobal,\n    selections: opts.selections,\n    actions: hero.actions,\n  });\n\n  Object.assign(componentInstance, {\n    actions: hero.actions,\n    model: opts.model,\n    app: opts.app,\n    selections: opts.selections,\n  });\n\n  return [componentInstance, hero];\n}\n\nexport default function create(generator, opts, galaxy) {\n  if (typeof generator.component === 'function') {\n    generator.component = hook(generator.component);\n  }\n  const [componentInstance, hero] =\n    generator.component && generator.component.__hooked\n      ? createWithHooks(generator, opts, galaxy)\n      : createClassical(generator, opts);\n\n  const teardowns = [];\n\n  if (generator.qae.properties.onChange) {\n    // TODO - handle multiple sn\n    // TODO - check privileges\n    if (opts.model.__snInterceptor) {\n      // remove old hook - happens only when proper cleanup hasn't been done\n      opts.model.__snInterceptor.teardown();\n    }\n\n    opts.model.__snInterceptor = {\n      setProperties: opts.model.setProperties,\n      applyPatches: opts.model.applyPatches,\n      teardown: undefined,\n    };\n\n    opts.model.setProperties = function setProperties(...args) {\n      generator.qae.properties.onChange.call({ model: opts.model }, ...args);\n      return opts.model.__snInterceptor.setProperties.call(this, ...args);\n    };\n\n    opts.model.applyPatches = function applyPatches(qPatches, qSoftPatch) {\n      const method = qSoftPatch ? 'getEffectiveProperties' : 'getProperties';\n      return opts.model[method]().then((currentProperties) => {\n        // apply patches to current props\n        const original = JSONPatch.clone(currentProperties);\n        const patches = qPatches.map((p) => ({ op: p.qOp, value: JSON.parse(p.qValue), path: p.qPath }));\n        JSONPatch.apply(currentProperties, patches);\n\n        generator.qae.properties.onChange.call({ model: opts.model }, currentProperties);\n\n        // calculate new patches from after change\n        const newPatches = JSONPatch.generate(original, currentProperties).map((p) => ({\n          qOp: p.op,\n          qValue: JSON.stringify(p.value),\n          qPath: p.path,\n        }));\n\n        return opts.model.__snInterceptor.applyPatches.call(this, newPatches, qSoftPatch);\n      });\n    };\n\n    opts.model.__snInterceptor.teardown = () => {\n      opts.model.setProperties = opts.model.__snInterceptor.setProperties;\n      delete opts.model.__snInterceptor;\n    };\n\n    teardowns.push(opts.model.__snInterceptor.teardown);\n  }\n\n  return {\n    generator,\n    component: componentInstance,\n    selectionToolbar: {\n      items: hero ? hero.selectionToolbarItems : [],\n    },\n    destroy() {\n      teardowns.forEach((t) => t());\n    },\n    logicalSize: generator.definition.logicalSize || (() => false),\n  };\n}\n","const noop = () => {};\n\n/**\n * @interface QAEDefinition\n * @property {qae.GenericObjectProperties=} properties\n * @property {object=} data\n * @property {DataTarget[]} data.targets\n */\n\n/**\n * @interface DataTarget\n * @property {string} path\n * @property {FieldTarget<qae.NxDimension>=} dimensions\n * @property {FieldTarget<qae.NxMeasure>=} measures\n */\n\n/**\n * @interface FieldTarget\n * @template T\n * @property {function():number} [min]\n * @property {function():number} [max]\n * @property {function(T, qae.GenericObjectProperties)} [added]\n * @property {function(T, qae.GenericObjectProperties, number)} [removed]\n */\n\nfunction fallback(x, value) {\n  if (typeof x === 'undefined') {\n    return () => value;\n  }\n  return () => x;\n}\n\nfunction defFn(input) {\n  const def = input || {};\n  return {\n    min: typeof def.min === 'function' ? def.min : fallback(def.min, 0),\n    max: typeof def.max === 'function' ? def.max : fallback(def.max, 1000),\n    added: def.added || def.add || noop, // TODO - deprecate add in favour of added\n    description: def.description || noop,\n    moved: def.moved || def.move || noop,\n    removed: def.removed || def.remove || noop,\n    replaced: def.replaced || def.replace || noop,\n    isDefined: () => !!input,\n  };\n}\n\nconst resolveValue = (data, reference, defaultValue) => {\n  const steps = reference.split('/');\n  let dataContainer = data;\n  if (dataContainer === undefined) {\n    return defaultValue;\n  }\n  for (let i = 0; i < steps.length; ++i) {\n    if (steps[i] === '') {\n      continue; // eslint-disable-line no-continue\n    }\n    if (typeof dataContainer[steps[i]] === 'undefined') {\n      return defaultValue;\n    }\n    dataContainer = dataContainer[steps[i]];\n  }\n\n  return dataContainer;\n};\n\nfunction target(def) {\n  const propertyPath = def.path || '/qHyperCubeDef';\n  const layoutPath = propertyPath.slice(0, -3);\n  if (/\\/(qHyperCube|qListObject)$/.test(layoutPath) === false) {\n    const d = layoutPath.includes('/qHyperCube') ? 'qHyperCubeDef' : 'qListObjectDef';\n    throw new Error(\n      `Incorrect definition for ${d} at ${propertyPath}. Valid paths include /qHyperCubeDef or /qListObjectDef, e.g. data/qHyperCubeDef`\n    );\n  }\n  return {\n    propertyPath,\n    layoutPath,\n    resolveLayout: (layout) => {\n      return resolveValue(layout, layoutPath, {});\n    },\n    dimensions: defFn(def.dimensions),\n    measures: defFn(def.measures),\n  };\n}\n\nexport default function qae(def = {}) {\n  let initial = def.properties || {};\n  let onChange;\n  if (def.properties && (def.properties.initial || def.properties.onChange)) {\n    initial = def.properties.initial;\n    onChange = def.properties.onChange;\n  }\n  const q = {\n    properties: {\n      initial,\n      onChange,\n    },\n    data: {\n      targets: ((def.data || {}).targets || []).map(target),\n    },\n    exportProperties: def.exportProperties,\n    importProperties: def.importProperties,\n  };\n\n  return q;\n}\n","import create from './creator';\n// import translator from './translator';\nimport qae from './qae';\n\n/**\n * The entry point for defining a visualization.\n * @interface Visualization\n * @param {Galaxy} galaxy\n * @returns {VisualizationDefinition}\n * @example\n * import { useElement, useLayout } from '@nebula.js/stardust';\n *\n * export default function() {\n *   return {\n *     qae: {\n *       properties: {\n *         dude: 'Heisenberg',\n *       }\n *     },\n *     component() {\n *       const el = useElement();\n *       const layout = useLayout();\n *       el.innerHTML = `What's my name? ${layout.dude}!!!`;\n *     }\n *   };\n * }\n */\n\n/**\n * @interface VisualizationDefinition\n * @property {QAEDefinition} qae\n * @property {function():void} component\n */\n\n/**\n * @interface snGenerator\n * @param {Visualization} Sn\n * @param {Galaxy} galaxy\n * @returns {generator}\n * @private\n */\nexport default function generatorFn(UserSN, galaxy) {\n  let sn;\n\n  // TODO validate galaxy API\n\n  if (typeof UserSN === 'function') {\n    sn = UserSN(galaxy);\n  } else {\n    sn = UserSN;\n  }\n\n  /**\n   * @alias generator\n   * @private\n   */\n  const generator = /** @lends generator */ {\n    /**\n     * @type {QAE}\n     */\n    qae: qae(sn.qae),\n    /**\n     * @type {SnComponent}\n     */\n    component: sn.component || {},\n    /**\n     * @param {object} p\n     * @param {EnigmaAppModel} p.app\n     * @param {EnigmaObjectModel} p.model\n     * @param {ObjectSelections} p.selections\n     */\n    create(params) {\n      const ss = create(generator, params, galaxy);\n      return ss;\n    },\n    definition: {},\n  };\n\n  Object.keys(sn).forEach((key) => {\n    if (!generator[key]) {\n      generator.definition[key] = sn[key];\n    }\n  });\n\n  return generator;\n}\n","exports = module.exports = SemVer\n\nvar debug\n/* istanbul ignore next */\nif (typeof process === 'object' &&\n    process.env &&\n    process.env.NODE_DEBUG &&\n    /\\bsemver\\b/i.test(process.env.NODE_DEBUG)) {\n  debug = function () {\n    var args = Array.prototype.slice.call(arguments, 0)\n    args.unshift('SEMVER')\n    console.log.apply(console, args)\n  }\n} else {\n  debug = function () {}\n}\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nexports.SEMVER_SPEC_VERSION = '2.0.0'\n\nvar MAX_LENGTH = 256\nvar MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n  /* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nvar MAX_SAFE_COMPONENT_LENGTH = 16\n\n// The actual regexps go on exports.re\nvar re = exports.re = []\nvar src = exports.src = []\nvar t = exports.tokens = {}\nvar R = 0\n\nfunction tok (n) {\n  t[n] = R++\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ntok('NUMERICIDENTIFIER')\nsrc[t.NUMERICIDENTIFIER] = '0|[1-9]\\\\d*'\ntok('NUMERICIDENTIFIERLOOSE')\nsrc[t.NUMERICIDENTIFIERLOOSE] = '[0-9]+'\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ntok('NONNUMERICIDENTIFIER')\nsrc[t.NONNUMERICIDENTIFIER] = '\\\\d*[a-zA-Z-][a-zA-Z0-9-]*'\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ntok('MAINVERSION')\nsrc[t.MAINVERSION] = '(' + src[t.NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[t.NUMERICIDENTIFIER] + ')\\\\.' +\n                   '(' + src[t.NUMERICIDENTIFIER] + ')'\n\ntok('MAINVERSIONLOOSE')\nsrc[t.MAINVERSIONLOOSE] = '(' + src[t.NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[t.NUMERICIDENTIFIERLOOSE] + ')\\\\.' +\n                        '(' + src[t.NUMERICIDENTIFIERLOOSE] + ')'\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n\ntok('PRERELEASEIDENTIFIER')\nsrc[t.PRERELEASEIDENTIFIER] = '(?:' + src[t.NUMERICIDENTIFIER] +\n                            '|' + src[t.NONNUMERICIDENTIFIER] + ')'\n\ntok('PRERELEASEIDENTIFIERLOOSE')\nsrc[t.PRERELEASEIDENTIFIERLOOSE] = '(?:' + src[t.NUMERICIDENTIFIERLOOSE] +\n                                 '|' + src[t.NONNUMERICIDENTIFIER] + ')'\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ntok('PRERELEASE')\nsrc[t.PRERELEASE] = '(?:-(' + src[t.PRERELEASEIDENTIFIER] +\n                  '(?:\\\\.' + src[t.PRERELEASEIDENTIFIER] + ')*))'\n\ntok('PRERELEASELOOSE')\nsrc[t.PRERELEASELOOSE] = '(?:-?(' + src[t.PRERELEASEIDENTIFIERLOOSE] +\n                       '(?:\\\\.' + src[t.PRERELEASEIDENTIFIERLOOSE] + ')*))'\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ntok('BUILDIDENTIFIER')\nsrc[t.BUILDIDENTIFIER] = '[0-9A-Za-z-]+'\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ntok('BUILD')\nsrc[t.BUILD] = '(?:\\\\+(' + src[t.BUILDIDENTIFIER] +\n             '(?:\\\\.' + src[t.BUILDIDENTIFIER] + ')*))'\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ntok('FULL')\ntok('FULLPLAIN')\nsrc[t.FULLPLAIN] = 'v?' + src[t.MAINVERSION] +\n                  src[t.PRERELEASE] + '?' +\n                  src[t.BUILD] + '?'\n\nsrc[t.FULL] = '^' + src[t.FULLPLAIN] + '$'\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ntok('LOOSEPLAIN')\nsrc[t.LOOSEPLAIN] = '[v=\\\\s]*' + src[t.MAINVERSIONLOOSE] +\n                  src[t.PRERELEASELOOSE] + '?' +\n                  src[t.BUILD] + '?'\n\ntok('LOOSE')\nsrc[t.LOOSE] = '^' + src[t.LOOSEPLAIN] + '$'\n\ntok('GTLT')\nsrc[t.GTLT] = '((?:<|>)?=?)'\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ntok('XRANGEIDENTIFIERLOOSE')\nsrc[t.XRANGEIDENTIFIERLOOSE] = src[t.NUMERICIDENTIFIERLOOSE] + '|x|X|\\\\*'\ntok('XRANGEIDENTIFIER')\nsrc[t.XRANGEIDENTIFIER] = src[t.NUMERICIDENTIFIER] + '|x|X|\\\\*'\n\ntok('XRANGEPLAIN')\nsrc[t.XRANGEPLAIN] = '[v=\\\\s]*(' + src[t.XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[t.XRANGEIDENTIFIER] + ')' +\n                   '(?:\\\\.(' + src[t.XRANGEIDENTIFIER] + ')' +\n                   '(?:' + src[t.PRERELEASE] + ')?' +\n                   src[t.BUILD] + '?' +\n                   ')?)?'\n\ntok('XRANGEPLAINLOOSE')\nsrc[t.XRANGEPLAINLOOSE] = '[v=\\\\s]*(' + src[t.XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[t.XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:\\\\.(' + src[t.XRANGEIDENTIFIERLOOSE] + ')' +\n                        '(?:' + src[t.PRERELEASELOOSE] + ')?' +\n                        src[t.BUILD] + '?' +\n                        ')?)?'\n\ntok('XRANGE')\nsrc[t.XRANGE] = '^' + src[t.GTLT] + '\\\\s*' + src[t.XRANGEPLAIN] + '$'\ntok('XRANGELOOSE')\nsrc[t.XRANGELOOSE] = '^' + src[t.GTLT] + '\\\\s*' + src[t.XRANGEPLAINLOOSE] + '$'\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ntok('COERCE')\nsrc[t.COERCE] = '(^|[^\\\\d])' +\n              '(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '})' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:\\\\.(\\\\d{1,' + MAX_SAFE_COMPONENT_LENGTH + '}))?' +\n              '(?:$|[^\\\\d])'\ntok('COERCERTL')\nre[t.COERCERTL] = new RegExp(src[t.COERCE], 'g')\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ntok('LONETILDE')\nsrc[t.LONETILDE] = '(?:~>?)'\n\ntok('TILDETRIM')\nsrc[t.TILDETRIM] = '(\\\\s*)' + src[t.LONETILDE] + '\\\\s+'\nre[t.TILDETRIM] = new RegExp(src[t.TILDETRIM], 'g')\nvar tildeTrimReplace = '$1~'\n\ntok('TILDE')\nsrc[t.TILDE] = '^' + src[t.LONETILDE] + src[t.XRANGEPLAIN] + '$'\ntok('TILDELOOSE')\nsrc[t.TILDELOOSE] = '^' + src[t.LONETILDE] + src[t.XRANGEPLAINLOOSE] + '$'\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ntok('LONECARET')\nsrc[t.LONECARET] = '(?:\\\\^)'\n\ntok('CARETTRIM')\nsrc[t.CARETTRIM] = '(\\\\s*)' + src[t.LONECARET] + '\\\\s+'\nre[t.CARETTRIM] = new RegExp(src[t.CARETTRIM], 'g')\nvar caretTrimReplace = '$1^'\n\ntok('CARET')\nsrc[t.CARET] = '^' + src[t.LONECARET] + src[t.XRANGEPLAIN] + '$'\ntok('CARETLOOSE')\nsrc[t.CARETLOOSE] = '^' + src[t.LONECARET] + src[t.XRANGEPLAINLOOSE] + '$'\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ntok('COMPARATORLOOSE')\nsrc[t.COMPARATORLOOSE] = '^' + src[t.GTLT] + '\\\\s*(' + src[t.LOOSEPLAIN] + ')$|^$'\ntok('COMPARATOR')\nsrc[t.COMPARATOR] = '^' + src[t.GTLT] + '\\\\s*(' + src[t.FULLPLAIN] + ')$|^$'\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ntok('COMPARATORTRIM')\nsrc[t.COMPARATORTRIM] = '(\\\\s*)' + src[t.GTLT] +\n                      '\\\\s*(' + src[t.LOOSEPLAIN] + '|' + src[t.XRANGEPLAIN] + ')'\n\n// this one has to use the /g flag\nre[t.COMPARATORTRIM] = new RegExp(src[t.COMPARATORTRIM], 'g')\nvar comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ntok('HYPHENRANGE')\nsrc[t.HYPHENRANGE] = '^\\\\s*(' + src[t.XRANGEPLAIN] + ')' +\n                   '\\\\s+-\\\\s+' +\n                   '(' + src[t.XRANGEPLAIN] + ')' +\n                   '\\\\s*$'\n\ntok('HYPHENRANGELOOSE')\nsrc[t.HYPHENRANGELOOSE] = '^\\\\s*(' + src[t.XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s+-\\\\s+' +\n                        '(' + src[t.XRANGEPLAINLOOSE] + ')' +\n                        '\\\\s*$'\n\n// Star ranges basically just allow anything at all.\ntok('STAR')\nsrc[t.STAR] = '(<|>)?=?\\\\s*\\\\*'\n\n// Compile to actual regexp objects.\n// All are flag-free, unless they were created above with a flag.\nfor (var i = 0; i < R; i++) {\n  debug(i, src[i])\n  if (!re[i]) {\n    re[i] = new RegExp(src[i])\n  }\n}\n\nexports.parse = parse\nfunction parse (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  if (version.length > MAX_LENGTH) {\n    return null\n  }\n\n  var r = options.loose ? re[t.LOOSE] : re[t.FULL]\n  if (!r.test(version)) {\n    return null\n  }\n\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    return null\n  }\n}\n\nexports.valid = valid\nfunction valid (version, options) {\n  var v = parse(version, options)\n  return v ? v.version : null\n}\n\nexports.clean = clean\nfunction clean (version, options) {\n  var s = parse(version.trim().replace(/^[=v]+/, ''), options)\n  return s ? s.version : null\n}\n\nexports.SemVer = SemVer\n\nfunction SemVer (version, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n  if (version instanceof SemVer) {\n    if (version.loose === options.loose) {\n      return version\n    } else {\n      version = version.version\n    }\n  } else if (typeof version !== 'string') {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  if (version.length > MAX_LENGTH) {\n    throw new TypeError('version is longer than ' + MAX_LENGTH + ' characters')\n  }\n\n  if (!(this instanceof SemVer)) {\n    return new SemVer(version, options)\n  }\n\n  debug('SemVer', version, options)\n  this.options = options\n  this.loose = !!options.loose\n\n  var m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n  if (!m) {\n    throw new TypeError('Invalid Version: ' + version)\n  }\n\n  this.raw = version\n\n  // these are actually numbers\n  this.major = +m[1]\n  this.minor = +m[2]\n  this.patch = +m[3]\n\n  if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n    throw new TypeError('Invalid major version')\n  }\n\n  if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n    throw new TypeError('Invalid minor version')\n  }\n\n  if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n    throw new TypeError('Invalid patch version')\n  }\n\n  // numberify any prerelease numeric ids\n  if (!m[4]) {\n    this.prerelease = []\n  } else {\n    this.prerelease = m[4].split('.').map(function (id) {\n      if (/^[0-9]+$/.test(id)) {\n        var num = +id\n        if (num >= 0 && num < MAX_SAFE_INTEGER) {\n          return num\n        }\n      }\n      return id\n    })\n  }\n\n  this.build = m[5] ? m[5].split('.') : []\n  this.format()\n}\n\nSemVer.prototype.format = function () {\n  this.version = this.major + '.' + this.minor + '.' + this.patch\n  if (this.prerelease.length) {\n    this.version += '-' + this.prerelease.join('.')\n  }\n  return this.version\n}\n\nSemVer.prototype.toString = function () {\n  return this.version\n}\n\nSemVer.prototype.compare = function (other) {\n  debug('SemVer.compare', this.version, this.options, other)\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return this.compareMain(other) || this.comparePre(other)\n}\n\nSemVer.prototype.compareMain = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  return compareIdentifiers(this.major, other.major) ||\n         compareIdentifiers(this.minor, other.minor) ||\n         compareIdentifiers(this.patch, other.patch)\n}\n\nSemVer.prototype.comparePre = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  // NOT having a prerelease is > having one\n  if (this.prerelease.length && !other.prerelease.length) {\n    return -1\n  } else if (!this.prerelease.length && other.prerelease.length) {\n    return 1\n  } else if (!this.prerelease.length && !other.prerelease.length) {\n    return 0\n  }\n\n  var i = 0\n  do {\n    var a = this.prerelease[i]\n    var b = other.prerelease[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\nSemVer.prototype.compareBuild = function (other) {\n  if (!(other instanceof SemVer)) {\n    other = new SemVer(other, this.options)\n  }\n\n  var i = 0\n  do {\n    var a = this.build[i]\n    var b = other.build[i]\n    debug('prerelease compare', i, a, b)\n    if (a === undefined && b === undefined) {\n      return 0\n    } else if (b === undefined) {\n      return 1\n    } else if (a === undefined) {\n      return -1\n    } else if (a === b) {\n      continue\n    } else {\n      return compareIdentifiers(a, b)\n    }\n  } while (++i)\n}\n\n// preminor will bump the version up to the next minor release, and immediately\n// down to pre-release. premajor and prepatch work the same way.\nSemVer.prototype.inc = function (release, identifier) {\n  switch (release) {\n    case 'premajor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor = 0\n      this.major++\n      this.inc('pre', identifier)\n      break\n    case 'preminor':\n      this.prerelease.length = 0\n      this.patch = 0\n      this.minor++\n      this.inc('pre', identifier)\n      break\n    case 'prepatch':\n      // If this is already a prerelease, it will bump to the next version\n      // drop any prereleases that might already exist, since they are not\n      // relevant at this point.\n      this.prerelease.length = 0\n      this.inc('patch', identifier)\n      this.inc('pre', identifier)\n      break\n    // If the input is a non-prerelease version, this acts the same as\n    // prepatch.\n    case 'prerelease':\n      if (this.prerelease.length === 0) {\n        this.inc('patch', identifier)\n      }\n      this.inc('pre', identifier)\n      break\n\n    case 'major':\n      // If this is a pre-major version, bump up to the same major version.\n      // Otherwise increment major.\n      // 1.0.0-5 bumps to 1.0.0\n      // 1.1.0 bumps to 2.0.0\n      if (this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0) {\n        this.major++\n      }\n      this.minor = 0\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'minor':\n      // If this is a pre-minor version, bump up to the same minor version.\n      // Otherwise increment minor.\n      // 1.2.0-5 bumps to 1.2.0\n      // 1.2.1 bumps to 1.3.0\n      if (this.patch !== 0 || this.prerelease.length === 0) {\n        this.minor++\n      }\n      this.patch = 0\n      this.prerelease = []\n      break\n    case 'patch':\n      // If this is not a pre-release version, it will increment the patch.\n      // If it is a pre-release it will bump up to the same patch version.\n      // 1.2.0-5 patches to 1.2.0\n      // 1.2.0 patches to 1.2.1\n      if (this.prerelease.length === 0) {\n        this.patch++\n      }\n      this.prerelease = []\n      break\n    // This probably shouldn't be used publicly.\n    // 1.0.0 \"pre\" would become 1.0.0-0 which is the wrong direction.\n    case 'pre':\n      if (this.prerelease.length === 0) {\n        this.prerelease = [0]\n      } else {\n        var i = this.prerelease.length\n        while (--i >= 0) {\n          if (typeof this.prerelease[i] === 'number') {\n            this.prerelease[i]++\n            i = -2\n          }\n        }\n        if (i === -1) {\n          // didn't increment anything\n          this.prerelease.push(0)\n        }\n      }\n      if (identifier) {\n        // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n        // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n        if (this.prerelease[0] === identifier) {\n          if (isNaN(this.prerelease[1])) {\n            this.prerelease = [identifier, 0]\n          }\n        } else {\n          this.prerelease = [identifier, 0]\n        }\n      }\n      break\n\n    default:\n      throw new Error('invalid increment argument: ' + release)\n  }\n  this.format()\n  this.raw = this.version\n  return this\n}\n\nexports.inc = inc\nfunction inc (version, release, loose, identifier) {\n  if (typeof (loose) === 'string') {\n    identifier = loose\n    loose = undefined\n  }\n\n  try {\n    return new SemVer(version, loose).inc(release, identifier).version\n  } catch (er) {\n    return null\n  }\n}\n\nexports.diff = diff\nfunction diff (version1, version2) {\n  if (eq(version1, version2)) {\n    return null\n  } else {\n    var v1 = parse(version1)\n    var v2 = parse(version2)\n    var prefix = ''\n    if (v1.prerelease.length || v2.prerelease.length) {\n      prefix = 'pre'\n      var defaultResult = 'prerelease'\n    }\n    for (var key in v1) {\n      if (key === 'major' || key === 'minor' || key === 'patch') {\n        if (v1[key] !== v2[key]) {\n          return prefix + key\n        }\n      }\n    }\n    return defaultResult // may be undefined\n  }\n}\n\nexports.compareIdentifiers = compareIdentifiers\n\nvar numeric = /^[0-9]+$/\nfunction compareIdentifiers (a, b) {\n  var anum = numeric.test(a)\n  var bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nexports.rcompareIdentifiers = rcompareIdentifiers\nfunction rcompareIdentifiers (a, b) {\n  return compareIdentifiers(b, a)\n}\n\nexports.major = major\nfunction major (a, loose) {\n  return new SemVer(a, loose).major\n}\n\nexports.minor = minor\nfunction minor (a, loose) {\n  return new SemVer(a, loose).minor\n}\n\nexports.patch = patch\nfunction patch (a, loose) {\n  return new SemVer(a, loose).patch\n}\n\nexports.compare = compare\nfunction compare (a, b, loose) {\n  return new SemVer(a, loose).compare(new SemVer(b, loose))\n}\n\nexports.compareLoose = compareLoose\nfunction compareLoose (a, b) {\n  return compare(a, b, true)\n}\n\nexports.compareBuild = compareBuild\nfunction compareBuild (a, b, loose) {\n  var versionA = new SemVer(a, loose)\n  var versionB = new SemVer(b, loose)\n  return versionA.compare(versionB) || versionA.compareBuild(versionB)\n}\n\nexports.rcompare = rcompare\nfunction rcompare (a, b, loose) {\n  return compare(b, a, loose)\n}\n\nexports.sort = sort\nfunction sort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compareBuild(a, b, loose)\n  })\n}\n\nexports.rsort = rsort\nfunction rsort (list, loose) {\n  return list.sort(function (a, b) {\n    return exports.compareBuild(b, a, loose)\n  })\n}\n\nexports.gt = gt\nfunction gt (a, b, loose) {\n  return compare(a, b, loose) > 0\n}\n\nexports.lt = lt\nfunction lt (a, b, loose) {\n  return compare(a, b, loose) < 0\n}\n\nexports.eq = eq\nfunction eq (a, b, loose) {\n  return compare(a, b, loose) === 0\n}\n\nexports.neq = neq\nfunction neq (a, b, loose) {\n  return compare(a, b, loose) !== 0\n}\n\nexports.gte = gte\nfunction gte (a, b, loose) {\n  return compare(a, b, loose) >= 0\n}\n\nexports.lte = lte\nfunction lte (a, b, loose) {\n  return compare(a, b, loose) <= 0\n}\n\nexports.cmp = cmp\nfunction cmp (a, op, b, loose) {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object')\n        a = a.version\n      if (typeof b === 'object')\n        b = b.version\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError('Invalid operator: ' + op)\n  }\n}\n\nexports.Comparator = Comparator\nfunction Comparator (comp, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (comp instanceof Comparator) {\n    if (comp.loose === !!options.loose) {\n      return comp\n    } else {\n      comp = comp.value\n    }\n  }\n\n  if (!(this instanceof Comparator)) {\n    return new Comparator(comp, options)\n  }\n\n  debug('comparator', comp, options)\n  this.options = options\n  this.loose = !!options.loose\n  this.parse(comp)\n\n  if (this.semver === ANY) {\n    this.value = ''\n  } else {\n    this.value = this.operator + this.semver.version\n  }\n\n  debug('comp', this)\n}\n\nvar ANY = {}\nComparator.prototype.parse = function (comp) {\n  var r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n  var m = comp.match(r)\n\n  if (!m) {\n    throw new TypeError('Invalid comparator: ' + comp)\n  }\n\n  this.operator = m[1] !== undefined ? m[1] : ''\n  if (this.operator === '=') {\n    this.operator = ''\n  }\n\n  // if it literally is just '>' or '' then allow anything.\n  if (!m[2]) {\n    this.semver = ANY\n  } else {\n    this.semver = new SemVer(m[2], this.options.loose)\n  }\n}\n\nComparator.prototype.toString = function () {\n  return this.value\n}\n\nComparator.prototype.test = function (version) {\n  debug('Comparator.test', version, this.options.loose)\n\n  if (this.semver === ANY || version === ANY) {\n    return true\n  }\n\n  if (typeof version === 'string') {\n    try {\n      version = new SemVer(version, this.options)\n    } catch (er) {\n      return false\n    }\n  }\n\n  return cmp(version, this.operator, this.semver, this.options)\n}\n\nComparator.prototype.intersects = function (comp, options) {\n  if (!(comp instanceof Comparator)) {\n    throw new TypeError('a Comparator is required')\n  }\n\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  var rangeTmp\n\n  if (this.operator === '') {\n    if (this.value === '') {\n      return true\n    }\n    rangeTmp = new Range(comp.value, options)\n    return satisfies(this.value, rangeTmp, options)\n  } else if (comp.operator === '') {\n    if (comp.value === '') {\n      return true\n    }\n    rangeTmp = new Range(this.value, options)\n    return satisfies(comp.semver, rangeTmp, options)\n  }\n\n  var sameDirectionIncreasing =\n    (this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '>=' || comp.operator === '>')\n  var sameDirectionDecreasing =\n    (this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '<=' || comp.operator === '<')\n  var sameSemVer = this.semver.version === comp.semver.version\n  var differentDirectionsInclusive =\n    (this.operator === '>=' || this.operator === '<=') &&\n    (comp.operator === '>=' || comp.operator === '<=')\n  var oppositeDirectionsLessThan =\n    cmp(this.semver, '<', comp.semver, options) &&\n    ((this.operator === '>=' || this.operator === '>') &&\n    (comp.operator === '<=' || comp.operator === '<'))\n  var oppositeDirectionsGreaterThan =\n    cmp(this.semver, '>', comp.semver, options) &&\n    ((this.operator === '<=' || this.operator === '<') &&\n    (comp.operator === '>=' || comp.operator === '>'))\n\n  return sameDirectionIncreasing || sameDirectionDecreasing ||\n    (sameSemVer && differentDirectionsInclusive) ||\n    oppositeDirectionsLessThan || oppositeDirectionsGreaterThan\n}\n\nexports.Range = Range\nfunction Range (range, options) {\n  if (!options || typeof options !== 'object') {\n    options = {\n      loose: !!options,\n      includePrerelease: false\n    }\n  }\n\n  if (range instanceof Range) {\n    if (range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease) {\n      return range\n    } else {\n      return new Range(range.raw, options)\n    }\n  }\n\n  if (range instanceof Comparator) {\n    return new Range(range.value, options)\n  }\n\n  if (!(this instanceof Range)) {\n    return new Range(range, options)\n  }\n\n  this.options = options\n  this.loose = !!options.loose\n  this.includePrerelease = !!options.includePrerelease\n\n  // First, split based on boolean or ||\n  this.raw = range\n  this.set = range.split(/\\s*\\|\\|\\s*/).map(function (range) {\n    return this.parseRange(range.trim())\n  }, this).filter(function (c) {\n    // throw out any that are not relevant for whatever reason\n    return c.length\n  })\n\n  if (!this.set.length) {\n    throw new TypeError('Invalid SemVer Range: ' + range)\n  }\n\n  this.format()\n}\n\nRange.prototype.format = function () {\n  this.range = this.set.map(function (comps) {\n    return comps.join(' ').trim()\n  }).join('||').trim()\n  return this.range\n}\n\nRange.prototype.toString = function () {\n  return this.range\n}\n\nRange.prototype.parseRange = function (range) {\n  var loose = this.options.loose\n  range = range.trim()\n  // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n  var hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n  range = range.replace(hr, hyphenReplace)\n  debug('hyphen replace', range)\n  // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n  range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n  debug('comparator trim', range, re[t.COMPARATORTRIM])\n\n  // `~ 1.2.3` => `~1.2.3`\n  range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n\n  // `^ 1.2.3` => `^1.2.3`\n  range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n\n  // normalize spaces\n  range = range.split(/\\s+/).join(' ')\n\n  // At this point, the range is completely trimmed and\n  // ready to be split into comparators.\n\n  var compRe = loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n  var set = range.split(' ').map(function (comp) {\n    return parseComparator(comp, this.options)\n  }, this).join(' ').split(/\\s+/)\n  if (this.options.loose) {\n    // in loose mode, throw out any that are not valid comparators\n    set = set.filter(function (comp) {\n      return !!comp.match(compRe)\n    })\n  }\n  set = set.map(function (comp) {\n    return new Comparator(comp, this.options)\n  }, this)\n\n  return set\n}\n\nRange.prototype.intersects = function (range, options) {\n  if (!(range instanceof Range)) {\n    throw new TypeError('a Range is required')\n  }\n\n  return this.set.some(function (thisComparators) {\n    return (\n      isSatisfiable(thisComparators, options) &&\n      range.set.some(function (rangeComparators) {\n        return (\n          isSatisfiable(rangeComparators, options) &&\n          thisComparators.every(function (thisComparator) {\n            return rangeComparators.every(function (rangeComparator) {\n              return thisComparator.intersects(rangeComparator, options)\n            })\n          })\n        )\n      })\n    )\n  })\n}\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nfunction isSatisfiable (comparators, options) {\n  var result = true\n  var remainingComparators = comparators.slice()\n  var testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every(function (otherComparator) {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// Mostly just for testing and legacy API reasons\nexports.toComparators = toComparators\nfunction toComparators (range, options) {\n  return new Range(range, options).set.map(function (comp) {\n    return comp.map(function (c) {\n      return c.value\n    }).join(' ').trim().split(' ')\n  })\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nfunction parseComparator (comp, options) {\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nfunction isX (id) {\n  return !id || id.toLowerCase() === 'x' || id === '*'\n}\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0\nfunction replaceTildes (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceTilde(comp, options)\n  }).join(' ')\n}\n\nfunction replaceTilde (comp, options) {\n  var r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('tilde', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0\n      ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0\n      ret = '>=' + M + '.' + m + '.' + p +\n            ' <' + M + '.' + (+m + 1) + '.0'\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0\n// ^1.2.3 --> >=1.2.3 <2.0.0\n// ^1.2.0 --> >=1.2.0 <2.0.0\nfunction replaceCarets (comp, options) {\n  return comp.trim().split(/\\s+/).map(function (comp) {\n    return replaceCaret(comp, options)\n  }).join(' ')\n}\n\nfunction replaceCaret (comp, options) {\n  debug('caret', comp, options)\n  var r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  return comp.replace(r, function (_, M, m, p, pr) {\n    debug('caret', comp, _, M, m, p, pr)\n    var ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = '>=' + M + '.0.0 <' + (+M + 1) + '.0.0'\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = '>=' + M + '.' + m + '.0 <' + M + '.' + (+m + 1) + '.0'\n      } else {\n        ret = '>=' + M + '.' + m + '.0 <' + (+M + 1) + '.0.0'\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p + '-' + pr +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + m + '.' + (+p + 1)\n        } else {\n          ret = '>=' + M + '.' + m + '.' + p +\n                ' <' + M + '.' + (+m + 1) + '.0'\n        }\n      } else {\n        ret = '>=' + M + '.' + m + '.' + p +\n              ' <' + (+M + 1) + '.0.0'\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nfunction replaceXRanges (comp, options) {\n  debug('replaceXRanges', comp, options)\n  return comp.split(/\\s+/).map(function (comp) {\n    return replaceXRange(comp, options)\n  }).join(' ')\n}\n\nfunction replaceXRange (comp, options) {\n  comp = comp.trim()\n  var r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, function (ret, gtlt, M, m, p, pr) {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    var xM = isX(M)\n    var xm = xM || isX(m)\n    var xp = xm || isX(p)\n    var anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        // >1.2.3 => >= 1.2.4\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      ret = gtlt + M + '.' + m + '.' + p + pr\n    } else if (xm) {\n      ret = '>=' + M + '.0.0' + pr + ' <' + (+M + 1) + '.0.0' + pr\n    } else if (xp) {\n      ret = '>=' + M + '.' + m + '.0' + pr +\n        ' <' + M + '.' + (+m + 1) + '.0' + pr\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nfunction replaceStars (comp, options) {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp.trim().replace(re[t.STAR], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0\nfunction hyphenReplace ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr, tb) {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = '>=' + fM + '.0.0'\n  } else if (isX(fp)) {\n    from = '>=' + fM + '.' + fm + '.0'\n  } else {\n    from = '>=' + from\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = '<' + (+tM + 1) + '.0.0'\n  } else if (isX(tp)) {\n    to = '<' + tM + '.' + (+tm + 1) + '.0'\n  } else if (tpr) {\n    to = '<=' + tM + '.' + tm + '.' + tp + '-' + tpr\n  } else {\n    to = '<=' + to\n  }\n\n  return (from + ' ' + to).trim()\n}\n\n// if ANY of the sets match ALL of its comparators, then pass\nRange.prototype.test = function (version) {\n  if (!version) {\n    return false\n  }\n\n  if (typeof version === 'string') {\n    try {\n      version = new SemVer(version, this.options)\n    } catch (er) {\n      return false\n    }\n  }\n\n  for (var i = 0; i < this.set.length; i++) {\n    if (testSet(this.set[i], version, this.options)) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction testSet (set, version, options) {\n  for (var i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        var allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n\nexports.satisfies = satisfies\nfunction satisfies (version, range, options) {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\n\nexports.maxSatisfying = maxSatisfying\nfunction maxSatisfying (versions, range, options) {\n  var max = null\n  var maxSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!max || maxSV.compare(v) === -1) {\n        // compare(max, v, true)\n        max = v\n        maxSV = new SemVer(max, options)\n      }\n    }\n  })\n  return max\n}\n\nexports.minSatisfying = minSatisfying\nfunction minSatisfying (versions, range, options) {\n  var min = null\n  var minSV = null\n  try {\n    var rangeObj = new Range(range, options)\n  } catch (er) {\n    return null\n  }\n  versions.forEach(function (v) {\n    if (rangeObj.test(v)) {\n      // satisfies(v, range, options)\n      if (!min || minSV.compare(v) === 1) {\n        // compare(min, v, true)\n        min = v\n        minSV = new SemVer(min, options)\n      }\n    }\n  })\n  return min\n}\n\nexports.minVersion = minVersion\nfunction minVersion (range, loose) {\n  range = new Range(range, loose)\n\n  var minver = new SemVer('0.0.0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = new SemVer('0.0.0-0')\n  if (range.test(minver)) {\n    return minver\n  }\n\n  minver = null\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    comparators.forEach(function (comparator) {\n      // Clone to avoid manipulating the comparator's semver object.\n      var compver = new SemVer(comparator.semver.version)\n      switch (comparator.operator) {\n        case '>':\n          if (compver.prerelease.length === 0) {\n            compver.patch++\n          } else {\n            compver.prerelease.push(0)\n          }\n          compver.raw = compver.format()\n          /* fallthrough */\n        case '':\n        case '>=':\n          if (!minver || gt(minver, compver)) {\n            minver = compver\n          }\n          break\n        case '<':\n        case '<=':\n          /* Ignore maximum versions */\n          break\n        /* istanbul ignore next */\n        default:\n          throw new Error('Unexpected operation: ' + comparator.operator)\n      }\n    })\n  }\n\n  if (minver && range.test(minver)) {\n    return minver\n  }\n\n  return null\n}\n\nexports.validRange = validRange\nfunction validRange (range, options) {\n  try {\n    // Return '*' instead of '' so that truthiness works.\n    // This will throw if it's invalid anyway\n    return new Range(range, options).range || '*'\n  } catch (er) {\n    return null\n  }\n}\n\n// Determine if version is less than all the versions possible in the range\nexports.ltr = ltr\nfunction ltr (version, range, options) {\n  return outside(version, range, '<', options)\n}\n\n// Determine if version is greater than all the versions possible in the range.\nexports.gtr = gtr\nfunction gtr (version, range, options) {\n  return outside(version, range, '>', options)\n}\n\nexports.outside = outside\nfunction outside (version, range, hilo, options) {\n  version = new SemVer(version, options)\n  range = new Range(range, options)\n\n  var gtfn, ltefn, ltfn, comp, ecomp\n  switch (hilo) {\n    case '>':\n      gtfn = gt\n      ltefn = lte\n      ltfn = lt\n      comp = '>'\n      ecomp = '>='\n      break\n    case '<':\n      gtfn = lt\n      ltefn = gte\n      ltfn = gt\n      comp = '<'\n      ecomp = '<='\n      break\n    default:\n      throw new TypeError('Must provide a hilo val of \"<\" or \">\"')\n  }\n\n  // If it satisifes the range it is not outside\n  if (satisfies(version, range, options)) {\n    return false\n  }\n\n  // From now on, variable terms are as if we're in \"gtr\" mode.\n  // but note that everything is flipped for the \"ltr\" function.\n\n  for (var i = 0; i < range.set.length; ++i) {\n    var comparators = range.set[i]\n\n    var high = null\n    var low = null\n\n    comparators.forEach(function (comparator) {\n      if (comparator.semver === ANY) {\n        comparator = new Comparator('>=0.0.0')\n      }\n      high = high || comparator\n      low = low || comparator\n      if (gtfn(comparator.semver, high.semver, options)) {\n        high = comparator\n      } else if (ltfn(comparator.semver, low.semver, options)) {\n        low = comparator\n      }\n    })\n\n    // If the edge version comparator has a operator then our version\n    // isn't outside it\n    if (high.operator === comp || high.operator === ecomp) {\n      return false\n    }\n\n    // If the lowest version comparator has an operator and our version\n    // is less than it then it isn't higher than the range\n    if ((!low.operator || low.operator === comp) &&\n        ltefn(version, low.semver)) {\n      return false\n    } else if (low.operator === ecomp && ltfn(version, low.semver)) {\n      return false\n    }\n  }\n  return true\n}\n\nexports.prerelease = prerelease\nfunction prerelease (version, options) {\n  var parsed = parse(version, options)\n  return (parsed && parsed.prerelease.length) ? parsed.prerelease : null\n}\n\nexports.intersects = intersects\nfunction intersects (r1, r2, options) {\n  r1 = new Range(r1, options)\n  r2 = new Range(r2, options)\n  return r1.intersects(r2)\n}\n\nexports.coerce = coerce\nfunction coerce (version, options) {\n  if (version instanceof SemVer) {\n    return version\n  }\n\n  if (typeof version === 'number') {\n    version = String(version)\n  }\n\n  if (typeof version !== 'string') {\n    return null\n  }\n\n  options = options || {}\n\n  var match = null\n  if (!options.rtl) {\n    match = version.match(re[t.COERCE])\n  } else {\n    // Find the right-most coercible string that does not share\n    // a terminus with a more left-ward coercible string.\n    // Eg, '1.2.3.4' wants to coerce '2.3.4', not '3.4' or '4'\n    //\n    // Walk through the string checking with a /g regexp\n    // Manually set the index so as to pick up overlapping matches.\n    // Stop when we get a match that ends at the string end, since no\n    // coercible string can be more right-ward without the same terminus.\n    var next\n    while ((next = re[t.COERCERTL].exec(version)) &&\n      (!match || match.index + match[0].length !== version.length)\n    ) {\n      if (!match ||\n          next.index + next[0].length !== match.index + match[0].length) {\n        match = next\n      }\n      re[t.COERCERTL].lastIndex = next.index + next[1].length + next[2].length\n    }\n    // leave it in a clean state\n    re[t.COERCERTL].lastIndex = -1\n  }\n\n  if (match === null) {\n    return null\n  }\n\n  return parse(match[2] +\n    '.' + (match[3] || '0') +\n    '.' + (match[4] || '0'), options)\n}\n","const LOADED = {};\n\n/**\n * @interface LoadType\n * @param {object} type\n * @param {string} type.name\n * @param {string} type.version\n * @returns {Promise<Visualization>}\n */\n\nexport async function load(name, version, { config }, loader) {\n  const key = `${name}__${version}`;\n  if (!LOADED[key]) {\n    const sKey = `${name}${(version && ` v${version}`) || ''}`;\n    const p = (loader || config.load)({\n      name,\n      version,\n    });\n    const prom = Promise.resolve(p);\n    LOADED[key] = prom\n      .then((sn) => {\n        if (!sn) {\n          // TODO - improve validation\n          throw new Error(`load() of visualization '${sKey}' resolved to an invalid object`);\n        }\n        return sn;\n      })\n      .catch((e) => {\n        if (__NEBULA_DEV__) {\n          console.warn(e); // eslint-disable-line no-console\n        }\n        throw new Error(`Failed to load visualization: '${sKey}'`);\n      });\n  }\n\n  return LOADED[key];\n}\n\nexport function clearFromCache(name) {\n  Object.keys(LOADED).forEach((key) => {\n    if (key.split('__')[0] === name) {\n      LOADED[key] = undefined;\n    }\n  });\n}\n","import type from './type';\nimport { clearFromCache } from './load';\n\nexport function semverSort(arr) {\n  const unversioned = arr.filter((v) => v === 'undefined');\n  return [\n    ...unversioned,\n    ...arr\n      .filter((v) => v !== 'undefined')\n      .map((v) => v.split('.').map((n) => parseInt(n, 10)))\n      .sort((a, b) => a[0] - b[0] || a[1] - b[1] || a[2] - b[2])\n      .map((n) => n.join('.')),\n  ];\n}\n\nexport function typeCollection(name, halo) {\n  const versions = {};\n  let sortedVersions = null;\n\n  return {\n    get: (version) => versions[version],\n    register: (version, opts) => {\n      if (versions[version]) {\n        throw new Error(`Supernova '${name}@${version}' already registered.`);\n      }\n\n      versions[version] = type(\n        {\n          name,\n          version,\n        },\n        halo,\n        opts\n      );\n      sortedVersions = null;\n    },\n    getMatchingVersionFromProperties: (propertyVersion) => {\n      if (!sortedVersions) {\n        sortedVersions = semverSort(Object.keys(versions));\n      }\n      for (let i = sortedVersions.length - 1; i >= 0; i--) {\n        const t = versions[sortedVersions[i]];\n        if (t.supportsPropertiesVersion(propertyVersion)) {\n          return sortedVersions[i];\n        }\n      }\n      return null;\n    },\n    versions,\n  };\n}\n\nexport function create({ halo, parent }) {\n  const tc = {};\n\n  const p = parent || {\n    get: () => undefined,\n  };\n\n  return {\n    register: (typeInfo, opts) => {\n      if (!tc[typeInfo.name]) {\n        tc[typeInfo.name] = typeCollection(typeInfo.name, halo);\n      }\n      tc[typeInfo.name].register(typeInfo.version, opts);\n    },\n    getSupportedVersion: (name, propertyVersion) => {\n      if (!tc[name]) {\n        return null;\n      }\n      return tc[name].getMatchingVersionFromProperties(propertyVersion);\n    },\n    get(typeInfo) {\n      const { name, version } = typeInfo;\n      if (!tc[name] || !tc[name].versions[version]) {\n        this.register({ name, version });\n      }\n      return tc[name].get(version) || p.get(typeInfo);\n    },\n    clearFromCache: (name) => {\n      if (tc[name]) {\n        tc[name] = undefined;\n      }\n      clearFromCache(name);\n    },\n  };\n}\n","import { generator as SNFactory } from '@nebula.js/supernova';\nimport { satisfies } from 'semver';\nimport { load } from './load';\n\n/**\n * @interface TypeInfo\n * @property {string} name\n * @property {string} version\n * @property {LoadType} load\n * @property {object=} meta\n */\n\nexport default function create(info, halo, opts = {}) {\n  let sn;\n  let stringified;\n  const { meta } = opts;\n  const type = {\n    name: info.name,\n    version: info.version,\n    supportsPropertiesVersion(v) {\n      if (v && meta && meta.deps && meta.deps.properties) {\n        return satisfies(v, meta.deps.properties);\n      }\n      return true;\n    },\n    supernova: () =>\n      load(type.name, type.version, halo, opts.load).then((SNDefinition) => {\n        sn = sn || SNFactory(SNDefinition, halo.public.galaxy);\n        stringified = JSON.stringify(sn.qae.properties.initial);\n        return sn;\n      }),\n    initialProperties(initial) {\n      return this.supernova().then(() => {\n        const props = {\n          qInfo: {\n            qType: type.name,\n          },\n          visualization: type.name,\n          version: type.version,\n          showTitles: true,\n          ...JSON.parse(stringified),\n          ...initial,\n        };\n        return props;\n      });\n    },\n  };\n\n  return type;\n}\n","/* eslint no-underscore-dangle:0 */\nimport appLocaleFn from './locale/app-locale';\nimport appThemeFn from './app-theme';\n\nimport bootNebulaApp from './components/NebulaApp';\nimport AppSelectionsPortal from './components/selections/AppSelections';\n\nimport create from './object/create-session-object';\nimport get from './object/get-object';\nimport flagsFn from './flags/flags';\nimport { create as typesFn } from './sn/types';\n\n/**\n * @interface Context\n * @property {object=} constraints\n * @property {boolean=} constraints.active\n * @property {boolean=} constraints.passive\n * @property {boolean=} constraints.select\n */\nconst DEFAULT_CONTEXT = /** @lends Context */ {\n  /** @type {string=} */\n  theme: 'light',\n  /** @type {string=} */\n  language: 'en-US',\n  constraints: {},\n};\n\n/**\n * @interface SnapshotConfiguration\n * @private\n */\nconst DEFAULT_SNAPSHOT_CONFIG = /** @lends SnapshotConfiguration */ {\n  /**\n   * @param {string} id\n   * @returns {Promise<SnapshotLayout>}\n   */\n  get: async (id) => {\n    const res = await fetch(`/njs/snapshot/${id}`);\n    if (!res.ok) {\n      throw new Error(res.statusText);\n    }\n    return res.json();\n  },\n  capture(payload) {\n    return fetch(`/njs/capture`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(payload),\n    }).then((res) => res.json());\n  },\n};\n\n/**\n * @interface Configuration\n */\nconst DEFAULT_CONFIG = /** @lends Configuration */ {\n  /**\n   * @type {Context=}\n   */\n  context: DEFAULT_CONTEXT,\n  load: () => undefined,\n  /**\n   * @type {(TypeInfo[])=}\n   */\n  types: [],\n\n  /**\n   * @type {(ThemeInfo[])=}\n   */\n  themes: [],\n\n  /** @type {object=} */\n  anything: {},\n\n  /**\n   * @type {SnapshotConfiguration=}\n   * @private\n   */\n  snapshot: DEFAULT_SNAPSHOT_CONFIG,\n};\n\n/**\n * @interface Galaxy\n */\n\nconst mergeObj = (o1 = {}, o2 = {}) => {\n  return {\n    ...o1,\n    ...o2,\n  };\n};\nconst mergeArray = (a1 = [], a2 = []) => {\n  // Simple merge and deduplication\n  return [...a1, ...a2].filter((v, i, a) => a.indexOf(v) === i);\n};\n\nconst mergeConfigs = (base, c) => ({\n  context: mergeObj(base.context, c.context),\n  load: c.load || base.load,\n  snapshot: {\n    ...(c.snapshot || base.snapshot),\n  },\n  types: mergeArray(base.types, c.types),\n  themes: mergeArray(base.themes, c.themes),\n  flags: mergeObj(base.flags, c.flags),\n  anything: mergeObj(base.anything, c.anything),\n});\n\nfunction nuked(configuration = {}) {\n  const locale = appLocaleFn(configuration.context.language);\n\n  /**\n   * Initiates a new `Embed` instance using the specified enigma `app`.\n   * @entry\n   * @function embed\n   * @param {enigma.Doc} app\n   * @param {Configuration=} instanceConfig\n   * @returns {Embed}\n   * @example\n   * import { embed } from '@nebula.js/stardust'\n   * const n = embed(app);\n   * n.render({ id: 'abc' });\n   */\n  function embed(app, instanceConfig) {\n    if (instanceConfig) {\n      return embed.createConfiguration(instanceConfig)(app);\n    }\n\n    let currentContext = {\n      ...configuration.context,\n      translator: locale.translator,\n    };\n\n    const [root] = bootNebulaApp({\n      app,\n      context: currentContext,\n    });\n\n    const appTheme = appThemeFn({\n      themes: configuration.themes,\n      root,\n    });\n\n    const publicAPIs = {\n      galaxy: /** @lends Galaxy */ {\n        /** @type {Translator} */\n        translator: locale.translator,\n        // TODO - validate flags input\n        /** @type {Flags} */\n        flags: flagsFn(configuration.flags),\n        /** @type {object} */\n        anything: configuration.anything,\n      },\n      theme: appTheme.externalAPI,\n      translator: locale.translator,\n      nebbie: null, // actual value is set further down\n    };\n\n    const halo = {\n      app,\n      root,\n      config: configuration,\n      public: publicAPIs,\n      context: currentContext,\n      nebbie: null,\n      types: null,\n    };\n\n    const types = typesFn({ halo });\n\n    configuration.types.forEach((t) =>\n      types.register(\n        {\n          name: t.name,\n          version: t.version,\n        },\n        {\n          meta: t.meta,\n          load: t.load,\n        }\n      )\n    );\n\n    let currentThemePromise = appTheme.setTheme(configuration.context.theme);\n\n    let selectionsApi = null;\n    let selectionsComponentReference = null;\n\n    /**\n     * @class\n     * @alias Embed\n     * @hideconstructor\n     */\n    const api = /** @lends Embed# */ {\n      /**\n       * Renders a visualization into an HTMLElement.\n       * @param {CreateConfig | GetConfig} cfg - The render configuration.\n       * @returns {Promise<Viz>} A controller to the rendered visualization.\n       * @example\n       * // render from existing object\n       * n.render({\n       *   element: el,\n       *   id: 'abcdef'\n       * });\n       * @example\n       * // render on the fly\n       * n.render({\n       *   element: el,\n       *   type: 'barchart',\n       *   fields: ['Product', { qLibraryId: 'u378hn', type: 'measure' }]\n       * });\n       */\n      render: async (cfg) => {\n        await currentThemePromise;\n        if (cfg.id) {\n          return get(cfg, halo);\n        }\n        return create(cfg, halo);\n      },\n      /**\n       * Updates the current context of this embed instance.\n       * Use this when you want to change some part of the current context, like theme.\n       * @param {Context} ctx - The context to update.\n       * @returns {Promise<undefined>}\n       * @example\n       * // change theme\n       * n.context({ theme: 'dark'});\n       * @example\n       * // limit constraints\n       * n.context({ constraints: { active: true } });\n       */\n      context: async (ctx) => {\n        // filter valid values to avoid triggering unnecessary rerender\n        let changes;\n        ['theme', 'language', 'constraints'].forEach((key) => {\n          if (ctx[key] && ctx[key] !== currentContext[key]) {\n            if (!changes) {\n              changes = {};\n            }\n            changes[key] = ctx[key];\n          }\n        });\n        if (!changes) {\n          return;\n        }\n        currentContext = {\n          ...currentContext,\n          ...changes,\n          translator: locale.translator,\n        };\n\n        halo.context = currentContext;\n\n        if (changes.theme) {\n          currentThemePromise = appTheme.setTheme(changes.theme);\n          await currentThemePromise;\n        }\n\n        if (changes.language) {\n          halo.public.translator.language(changes.language);\n        }\n\n        root.context(currentContext);\n      },\n      /**\n       * Gets the app selections of this instance.\n       * @returns {Promise<AppSelections>}\n       * @example\n       * const selections = await n.selections();\n       * selections.mount(element);\n       */\n      selections: async () => {\n        if (!selectionsApi) {\n          // const appSelections = await root.getAppSelections(); // Don't expose this for now\n          selectionsApi = /** @lends AppSelections# */ {\n            /**\n             * Mounts the app selection UI into the provided HTMLElement.\n             * @param {HTMLElement} element\n             * @example\n             * selections.mount(element);\n             */\n            mount(element) {\n              if (selectionsComponentReference) {\n                if (__NEBULA_DEV__) {\n                  console.error('Already mounted'); // eslint-disable-line no-console\n                }\n                return;\n              }\n              selectionsComponentReference = AppSelectionsPortal({\n                element,\n                app,\n              });\n              root.add(selectionsComponentReference);\n            },\n            /**\n             * Unmounts the app selection UI from the DOM.\n             * @example\n             * selections.unmount();\n             */\n            unmount() {\n              if (selectionsComponentReference) {\n                root.remove(selectionsComponentReference);\n                selectionsComponentReference = null;\n              }\n            },\n          };\n        }\n        return selectionsApi;\n      },\n      __DO_NOT_USE__: {\n        types,\n      },\n    };\n\n    halo.public.nebbie = api;\n    halo.types = types;\n\n    return api;\n  }\n\n  /**\n   * Creates a new `embed` scope bound to the specified `configuration`.\n   *\n   * The configuration is merged with all previous scopes.\n   * @memberof embed\n   * @param {Configuration} configuration - The configuration object\n   * @returns {embed}\n   * @example\n   * import { embed } from '@nebula.js/stardust';\n   * // create a 'master' config which registers all types\n   * const m = embed.createConfiguration({\n   *   types: [{\n   *     name: 'mekko',\n   *     version: '1.0.0',\n   *     load: () => Promise.resolve(mekko)\n   *   }],\n   * });\n   *\n   * // create an alternate config with dark theme\n   * // and inherit the config from the previous\n   * const d = m.createConfiguration({\n   *  theme: 'dark'\n   * });\n   *\n   * m(app).render({ type: 'mekko' }); // will render the object with default theme\n   * d(app).render({ type: 'mekko' }); // will render the object with 'dark' theme\n   * embed(app).render({ type: 'mekko' }); // will throw error since 'mekko' is not a register type on the default instance\n   */\n  embed.createConfiguration = (c) => nuked(mergeConfigs(configuration, c));\n  embed.config = configuration;\n\n  return embed;\n}\n\n/**\n * @interface ThemeInfo\n * @property {string} id Theme identifier\n * @property {function(): Promise<ThemeJSON>} load A function that should return a Promise that resolve to a raw JSON theme\n */\n\nexport default nuked(DEFAULT_CONFIG);\n","/* eslint no-underscore-dangle: 0 */\nimport 'regenerator-runtime/runtime'; // Polyfill for using async/await\nimport embed from '@nebula.js/nucleus';\nimport { generator, hook } from '@nebula.js/supernova';\nimport theme from '@nebula.js/theme';\nimport locale from '@nebula.js/locale';\nimport conversion from '@nebula.js/conversion';\n\n// mashup api\nexport { embed };\n\n// component api\nexport {\n  useState,\n  useEffect,\n  useMemo,\n  useImperativeHandle,\n  usePromise,\n  useAction,\n  useRect,\n  useModel,\n  useApp,\n  useGlobal,\n  useElement,\n  useSelections,\n  useTheme,\n  useLayout,\n  useStaleLayout,\n  useAppLayout,\n  useTranslator,\n  useConstraints,\n  useOptions,\n  onTakeSnapshot,\n} from '@nebula.js/supernova';\n\n// component internals\nconst __DO_NOT_USE__ = { generator, hook, theme, locale, conversion };\nexport { __DO_NOT_USE__ };\n"],"names":["runtime","exports","undefined","Op","Object","prototype","hasOwn","hasOwnProperty","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","GenStateSuspendedStart","method","arg","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","type","done","GenStateSuspendedYield","makeInvokeMethod","fn","call","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","this","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","defineIteratorMethods","forEach","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","resolve","reject","invoke","result","_typeof","__await","then","unwrapped","error","TypeError","info","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","length","i","constructor","displayName","isGeneratorFunction","genFun","ctor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","iter","toString","keys","object","reverse","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","module","regeneratorRuntime","accidentalStrictMode","Function","format","message","args","arr","replace","match","number","translator","initial","fallback","dictionaries","currentLocale","api","language","lang","add","item","id","locale","get","str","v","t","appLocaleFn","l","all","util","EventEmitter","init","isObject","isNumber","isUndefined","isFunction","_events","_maxListeners","defaultMaxListeners","setMaxListeners","n","emit","er","handler","len","listeners","arguments","Array","apply","addListener","listener","m","newListener","warned","console","trace","on","once","fired","g","removeListener","list","position","splice","removeAllListeners","isArray","listenerCount","emitter","toStr","gOPD","getOwnPropertyDescriptor","isPlainObject","hasOwnConstructor","hasIsPrototypeOf","setProperty","target","options","newValue","getProperty","extend","src","copy","copyIsArray","clone","deep","factory","parent","definition","Color","brighter","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","rgb","formatHex","color_formatRgb","formatRgb","color","trim","toLowerCase","exec","parseInt","rgbn","Rgb","rgba","hsla","NaN","r","b","a","rgbConvert","o","opacity","rgb_formatHex","hex","rgb_formatRgb","Math","max","min","round","h","s","Hsl","hslConvert","hsl2rgb","m1","m2","channels","assign","displayable","formatHsl","k","pow","darker","ColorScale","nanColor","colorParts","startLevel","color1","color2","level","scaledValue","Number","scale","getLevel","numParts","limitFunction","f","floor","part","c1","c2","blend","getScaleValue","current","size","percent","setupColorScale","colors","gradient","newColors","cs","j","addColorPart","generateLevel","c","getColor","scaled","createPyramidFromColors","gradientScale","pyramid","constructPaths","pathSteps","baseSteps","localBaseSteps","baseLength","ret","pathLength","concat","getObject","root","steps","searchValue","path","attribute","component","pathArray","split","theme","searchPathArray","styleResolver","basePath","themeJSON","basePathSteps","getStyle","luminance","colStr","map","toFixed","contrast","L1","L2","resolveRawTheme","raw","resolveVariables","objTree","variables","_variables","scales","scalesDef","def","generateScales","dataColors","nullColor","resolvedThemeJSON","paletteResolver","contraster","styleResolverInstanceCache","externalAPI","getDataColorScales","dataScales","getDataColorPalettes","dataPalettes","getDataColorPickerPalettes","uiPalettes","getDataColorSpecials","getColorPickerColor","uiColor","getContrastingColorTo","getBestContrastColor","styleResolverFn","internalAPI","setTheme","resolvedTheme","uiPalette","colorRawJSON","darkRawJSON","lightRawJSON","baseRawJSON","rawThemeJSON","palettes","data","ui","pals","propertyValue","translation","scheme","primary","primaryColor","nil","others","othersColor","index","textColor","textColorLuminance","cache","luminances","colorString","L","contrasts","lum","indexOf","contrasterFn","timed","setTimeout","appTheme","themes","wrappedTheme","themeFn","themeId","found","filter","muiTheme","load","race","__timedOut","setMuiThemeName","_extends","source","_typeof2","deepmerge","output","_defineProperty","formatMuiErrorMessage","code","url","encodeURIComponent","clamp","decomposeColor","substr","re","join","hexToRgb","marker","substring","_formatMuiErrorMessage","parseFloat","recomposeColor","getLuminance","hslToRgb","val","_objectWithoutProperties","excluded","sourceKeys","objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createBreakpoints","breakpoints","_breakpoints$values","xs","sm","md","lg","xl","_breakpoints$unit","unit","_breakpoints$step","step","other","up","between","start","end","endIndex","down","upperbound","only","width","createMixins","spacing","mixins","_toolbar","gutters","styles","paddingLeft","paddingRight","toolbar","minHeight","common","50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700","light","text","secondary","disabled","hint","divider","background","paper","default","action","active","hover","hoverOpacity","selected","selectedOpacity","disabledBackground","disabledOpacity","focus","focusOpacity","activatedOpacity","dark","icon","addLightOrDark","intent","direction","shade","tonalOffset","tonalOffsetLight","tonalOffsetDark","coefficient","lighten","main","darken","createPalette","palette","_palette$primary","_palette$secondary","_palette$error","_palette$warning","warning","_palette$info","_palette$success","success","_palette$type","_palette$contrastThre","contrastThreshold","_palette$tonalOffset","getContrastText","foreground","lumA","lumB","getContrastRatio","augmentColor","mainShade","lightShade","darkShade","JSON","stringify","contrastText","types","caseAllCaps","textTransform","createTypography","typography","_ref","_ref$fontFamily","fontFamily","_ref$fontSize","fontSize","_ref$fontWeightLight","fontWeightLight","_ref$fontWeightRegula","fontWeightRegular","_ref$fontWeightMedium","fontWeightMedium","_ref$fontWeightBold","fontWeightBold","_ref$htmlFontSize","htmlFontSize","allVariants","pxToRem2","pxToRem","coef","buildVariant","fontWeight","lineHeight","letterSpacing","casing","variants","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","button","caption","overline","createShadow","shadows","shape","borderRadius","createUnarySpacing","themeSpacing","abs","createSpacing","spacingInput","mui","transform","_len","_key","argument","easing","easeInOut","easeOut","easeIn","sharp","duration","shortest","shorter","short","standard","complex","enteringScreen","leavingScreen","formatMs","milliseconds","props","_options$duration","durationOption","_options$easing","easingOption","_options$delay","delay","animatedProp","getAutoHeightDuration","height","constant","zIndex","mobileStepper","speedDial","appBar","drawer","modal","snackbar","tooltip","MuiButtonBase","disableRipple","disableTouchRipple","focusRipple","lightest","lighter","darkest","custom","focusBorder","focusOutline","inputBackground","alternative","mainContrastText","alternativeContrastText","excludedContrastText","btn","normal","border","borderHover","overrides","MuiTypography","MuiIconButton","padding","borderColor","boxShadow","MuiOutlinedInput","backgroundColor","borderWidth","MuiButton","outlined","contained","MuiExpansionPanelSummary","content","margin","warn","withDefaults","base","_options$breakpoints","breakpointsInput","_options$mixins","mixinsInput","_options$palette","paletteInput","_options$typography","typographyInput","transitions","reduce","acc","createMuiTheme","React","createContext","constraints","initialState","applyMiddleware","sharedState","hookListeners","store","set","clear","dispatch","forceNewState","useKeyStore","setState","useState","useEffect","ix","createKeyStore","useRpcResultStore","rpcResultStore","useRpcRequestStore","rpcRequestStore","useRpcRequestSessionModelStore","rpcRequestSessionModelStore","rpcRequestModelStore","useModelChangedStore","modelChangedStore","modelInitializedStore","modelStoreMiddleware","model","initialized","onChanged","unsubscribe","useModelStore","modelStore","subscribe","rpcReducer","newState","valid","invalid","validating","canCancel","canRetry","rpcRetry","useRpc","rpcShared","useReducer","skipRetry","rpc","_context","longrunning","cancel","global","session","getObjectApi","cancelRequest","requestId","retry","useLayout","useAppLayout","useSessionModel","app","setModel","deps","createSessionObject","newModel","qInfo","qType","qSelectionObjectDef","qStateName","alternateStates","useCurrentSelectionsModel","useAppSelectionsNavigation","currentSelectionsModel","currentSelectionsLayout","appLayout","navigationState","setNavigationState","states","_toConsumableArray","qStateNames","stateName","applyPatches","qOp","qPath","qValue","patchAlternateState","canGoBack","canGoForward","canClear","qSelectionObject","qBackCount","qForwardCount","qSelections","qLocked","useAppSelectionsStore","useAppModalStore","appModalStore","useObjectSelectionsStore","objectSelectionsStore","useModalObjectStore","modalObjectStore","useAppSelections","navState","appSelectionsStore","appSelections","accept","endSelections","appModal","begin","p","beginSelections","_context2","abortModal","isInModal","isModal","layout","forward","back","clearAll","clearField","field","getField","createAppSelections","counter","NebulaApp","forwardRef","ref","initialContext","setContext","muiThemeName","useMemo","createTheme","createGenerateClassName","productionPrefix","disableGlobal","seed","components","setComponents","useImperativeHandle","addComponent","removeComponent","getAppSelections","StylesProvider","generateClassName","ThemeProvider","InstanceContext","Provider","boot","resolveRender","rendered","appRef","createRef","element","document","createElement","style","display","setAttribute","body","appendChild","ReactDOM","render","remove","themeName","ctx","useRect","node","setNode","rect","setRect","callbackRef","useCallback","handleResize","getBoundingClientRect","left","top","useLayoutEffect","ResizeObserver","resizeObserver","observe","unobserve","disconnect","window","addEventListener","removeEventListener","getFontSize","SvgIcon","viewBox","shapes","fontStyle","textAlign","verticalAlign","textRendering","WebkitFontSmoothing","MozOsxFontSmoothing","xmlns","fill","Type","attrs","d","lock","unlock","_assertThisInitialized","ReferenceError","areInputsEqual","newInputs","lastInputs","resultFn","isEqual","lastThis","lastResult","lastArgs","calledOnce","newArgs","now","performance","Date","cancelTimeout","timeoutID","cancelAnimationFrame","cachedRTLResult","getRTLOffsetType","recalculate","outerDiv","outerStyle","overflow","innerDiv","innerStyle","scrollLeft","removeChild","defaultItemKey$1","createListComponent","_class","_temp","getItemOffset","getEstimatedTotalSize","getItemSize","getOffsetForIndexAndAlignment","getStartIndexForOffset","getStopIndexForStartIndex","initInstanceProps","shouldResetStyleCacheOnItemSizeChange","validateProps","_PureComponent","subClass","superClass","List","_this","_instanceProps","_outerRef","_resetIsScrollingTimeoutId","instance","isScrolling","scrollDirection","scrollOffset","initialScrollOffset","scrollUpdateWasRequested","_callOnItemsRendered","memoizeOne","overscanStartIndex","overscanStopIndex","visibleStartIndex","visibleStopIndex","onItemsRendered","_callOnScroll","onScroll","_getItemStyle","_this$props","itemSize","itemStyleCache","_getItemStyleCache","_offset","isHorizontal","isRtl","offsetHorizontal","right","_","__","___","_onScrollHorizontal","event","_event$currentTarget","currentTarget","clientWidth","scrollWidth","prevState","_resetIsScrollingDebounced","_onScrollVertical","_event$currentTarget2","clientHeight","scrollHeight","scrollTop","_outerRefSetter","outerRef","callback","_resetIsScrolling","requestAnimationFrame","tick","getDerivedStateFromProps","nextProps","validateSharedProps$1","_proto","scrollTo","scrollToItem","align","itemCount","componentDidMount","_this$props2","_callPropsCallbacks","componentDidUpdate","_this$props3","_this$state","componentWillUnmount","_this$props4","children","className","innerRef","innerElementType","innerTagName","itemData","_this$props4$itemKey","itemKey","outerElementType","outerTagName","useIsScrolling","_this$_getRangeToRend","_getRangeToRender","startIndex","stopIndex","items","_index","estimatedTotalSize","WebkitOverflowScrolling","willChange","pointerEvents","_this$_getRangeToRend2","_overscanStartIndex","_overscanStopIndex","_visibleStartIndex","_visibleStopIndex","_this$state2","_scrollDirection","_scrollOffset","_scrollUpdateWasRequested","_this$props5","overscanCount","_this$state3","overscanBackward","overscanForward","PureComponent","defaultProps","_ref2","_ref3","FixedSizeList","_ref4","lastItemOffset","maxOffset","minOffset","middleOffset","ceil","_ref5","offset","_ref6","numVisibleItems","_ref7","classCallCheck","Constructor","createClass","defineProperties","descriptor","protoProps","staticProps","possibleConstructorReturn","slicedToArray","_arr","_n","_d","_e","_s","_i","sliceIterator","InfiniteLoader","_lastRenderedStartIndex","_lastRenderedStopIndex","_memoizedUnloadedRanges","_onItemsRendered","_ensureRowsLoaded","_setRef","listRef","_listRef","inherits","autoReload","_props","isItemLoaded","_props$minimumBatchSi","minimumBatchSize","_props$threshold","threshold","unloadedRanges","rangeStartIndex","rangeStopIndex","potentialStopIndex","_index2","firstRange","_index3","scanForUnloadedRanges","some","_loadUnloadedRanges","_this2","loadMoreItems","loadMoreRows","promise","lastRenderedStartIndex","lastRenderedStopIndex","isRangeVisible","resetAfterIndex","forceUpdate","useStyles","makeStyles","row","flexWrap","borderBottom","outline","cell","whiteSpace","textOverflow","S","A","X","highlighted","Row","classes","classArr","label","onClick","pages","page","qArea","qTop","qHeight","area","qMatrix","locked","qText","qState","ranges","qHighlightRanges","qRanges","sort","qCharPos","labels","curr","qCharCount","Grid","container","role","tabIndex","qElemNumber","minWidth","flexGrow","Typography","noWrap","Lock","Tick","ListBox","selections","setPages","loaderRef","useRef","local","queue","validPages","listData","e","qListObject","qDimensionInfo","elemNumber","getAttribute","select","params","qIsOneAndOnlyOne","checkIdx","shift","clearTimeout","timeout","sorted","getListObjectData","qLeft","qWidth","resetloadMoreItemsCache","qSelectionInfo","qInSelections","count","qSize","qcy","selectAll","selectAlternative","selectPossible","selectExcluded","more","useActionState","useTheme","enabled","hasSvgIconShape","getSvgIconShape","hidden","Item","addAnchor","IconButton","title","bottom","close","clearSelections","MoreItem","onActionClick","MenuItem","ListItemIcon","More","actions","show","alignTo","popoverProps","popoverPaperStyle","onCloseOrActionClick","Popover","onClose","open","anchorEl","getContentAnchorEl","disablePortal","hideBackdrop","transitionDuration","anchorOrigin","vertical","horizontal","transformOrigin","PaperProps","maxWidth","MenuList","itemSpacing","firstItemSpacing","lastItemSpacing","ActionsGroup","first","last","cls","isFirstItem","isLastItem","popoverStyle","popoverAnchorOrigin","popoverTransformOrigin","ActionsToolbar","maxItems","onConfirm","onCancel","popover","defaultSelectionActions","useContext","canConfirm","confirm","useDefaultSelectionActions","showMoreItems","setShowMoreItems","moreEnabled","setMoreEnabled","moreActions","setMoreActions","moreAlignTo","setMoreAlignTo","moreRef","dividerStyle","newActions","moreItem","moreIcon","newMoreActions","showActions","showMore","showDivider","Actions","Divider","orientation","disableEnforceFocus","search","ListBoxSearch","setValue","OutlinedInput","startAdornment","InputAdornment","Search","autoFocus","fullWidth","placeholder","onChange","searchListObjectFor","onKeyDown","acceptListObjectSearch","abortListObjectSearch","createObjectSelections","isActive","hasSelected","setLayout","lyt","paths","prevented","isPrevented","preventDefault","resetMadeSelections","qSuccess","goModal","noModal","useObjectSelections","objectSelections","ListBoxPopover","fieldName","Boolean","qListObjectDef","qShowAlternatives","qInitialDataFetch","qDef","qSortCriterias","qSortByState","qSortByAscii","qSortByNumeric","qSortByLoadOrder","qFieldDefs","isLocked","popoverClose","reason","listboxSelectionToolbarItems","sc","qStateCounts","selectListObjectAll","selectListObjectPossible","selectListObjectAlternative","selectListObjectExcluded","createListboxSelectionToolbar","counts","hasSelections","qSelected","qSelectedExcluded","qLockedExcluded","Unlock","elevation","cursor","OneField","stateIx","skipHandleShowListBoxPopover","showListBoxPopover","setShowListBoxPopover","handleCloseShowListBoxPopover","selection","qTotal","qExcluded","qAlternative","numSelected","noSegments","qSelectedFieldSelectionInfo","qName","segments","ratio","Header","Icon","SegmentsIndicator","Component","qField","stopPropagation","Remove","contains","downArrow","alignItems","badge","MultiState","showFields","setShowFields","showStateIx","setShowStateIx","setAnchorEl","clearAllStates","handleCloseShowState","zeroMinWidth","Badge","badgeContent","DownArrow","Fields","dense","ListItem","Button","variant","handleShowState","Box","PopoverFields","showItemIx","setShowItemIx","handleCloseShowItem","CurrentItem","handleShowItem","collect","fields","SelectedFields","containerRef","containerRect","setMaxItems","getItems","currState","newItems","genericType","lastDeselectedField","f1","f2","wasIx","newMoreItems","borderRight","selectionsBack","selectionsForward","Nav","marginRight","SelectionsBack","SelectionsForward","ClearSelections","AppSelections","mount","createPortal","idGen","toChar","random","uid","addIndex","array","removeIndex","removeIdx","populateData","sn","properties","qae","targets","parts","propertyPath","hc","dc","qDimensions","qMeasures","qInterColumnSortOrder","qColumnOrder","qExpansionState","objectProperties","dimensions","measures","addDimension","dimension","cId","qOtherTotalSpec","qAttributeExpressions","qAttributeDimensions","maxDimensions","added","qLayoutExclude","qHyperCubeDef","removeDimension","idx","removed","addMeasure","measure","qSortBy","maxMeasures","removeMeasure","canAddDimension","canAddMeasure","hcHandler","qLibraryId","fieldType","reference","defaultValue","dataContainer","propertyName","isOrderedSubset","outer","subset","indexAdded","indexRemoved","findLibraryItem","libraryItemList","qId","isMasterItemPropperty","createDefaultDimension","dimensionDef","dimensionProperties","utils","qv","othersLabel","createDefaultMeasure","measureDef","measureProperties","resolveValue","input","updateTitle","libItem","libraryUtils","qData","restoreChangedProperties","changed","property","to","from","importCommonProperties","newProperties","exportFormat","initialProperties","visualization","copyPropertyIfExist","copyPropertyOrSetDefault","getHypercubePath","getDefaultDimension","autoSort","qNullSuppression","qOtherLabel","qOtherLimitMode","qOtherMode","qOtherSortMode","qSuppressOther","getDefaultMeasure","numFormatFromTemplate","qTrendLines","setInterColumnSortOrder","newHyperCubeDef","dataGroup","nCols","interColumnSortOrder","arrayUtils","createNewProperties","hypercubePath","quarantine","getMaxMinDimensionMeasure","dataDefinition","minMeasures","minDimensions","shouldInitLayoutExclude","excludedDimensions","excludedMeasures","initLayoutExclude","addDefaultDimensions","defaultDimension","addDefaultMeasures","defaultMeasure","checkLibraryObjects","dimensionList","measureList","exportProperties","propertyTree","nDataGroups","createExportFormat","qProperty","hcdParent","hcd","order","prop","helpers","importProperties","defaultPropertyValues","newPropertyTree","qChildren","initHyperCubeDef","getType","halo","version","supernova","getPath","getExportPropertiesFnc","hypercube","getDefaultExportPropertiesFn","getImportPropertiesFnc","getDefaultImportPropertiesFnc","convertTo","cellRef","newType","targetSnType","getFullPropertyTree","sourceQae","getQae","targetQae","getLibraryList","DescriptionRow","styleColor","missing","WrappedIcon","WarningTriangle","description","Descriptions","Rows","descriptions","dix","paddingBottom","justify","front","animationDuration","SIZES","small","medium","large","xlarge","Progress","CircularProgress","thickness","disableShrink","stripes","backgroundSize","backgroundImage","Cancel","Retry","LongRunningQuery","Loading","containerStyle","containerTitleStyle","hovering","showTitle","showTitles","showSubtitle","subtitle","showInSelectionActions","setActions","shouldShowPopoverToolbar","setShouldShowPopoverToolbar","isHooked","observeActions","selectionToolbar","showPopoverToolbar","showToolbar","Toolbar","itemStyle","paddingTop","Footer","footnote","VizElement","Supernova","snOptions","renderDebouncer","isMounted","setIsMounted","renderCnt","setRenderCnt","containerNode","snNode","setSnNode","snRef","created","mounted","willUnmount","permissions","passive","public","logicalSize","localeInfo","qLocaleInfo","onInitialRender","getSessionModel","getNewState","getRpc","getLayout","log","D","qDimensionListDef","labelExpression","M","qMeasureListDef","qDimensionList","qMeasureList","qItems","CellElement","contentReducer","loading","loaded","longRunningQuery","LoadingSn","showLoading","setShowLoading","handleModal","firstPropertyPath","filterData","qError","qErrorCode","validateInfo","getDescription","translatedError","translatedCalcCond","exists","softError","calcCondMsg","qCalcCondMsg","qFallbackTitle","customDescription","getInfo","validateTarget","minD","minM","resolveLayout","reqDimErrors","reqMeasErrors","qMeasureInfo","validateCubes","hasUnfulfilledErrors","aggMinD","aggMinM","hasLayoutErrors","hasLayoutUnfulfilledCalculcationCondition","layoutErrors","validateTargets","loopCacheProperties","getProperties","res","fulfilledDims","reqDimErrorsTitle","fulfilledMeas","reqMeasErrorsTitle","reqErrors","showError","SN","loadType","snType","_context3","Cell","initialSnOptions","initialError","onMount","cellRect","cellNode","contentRef","contentRect","setSnOptions","setHover","hoveringDebouncer","enter","leave","validate","withVersion","getSupportedVersion","takeSnapshot","clonedLayout","parse","setSnapshotData","String","meta","exportImage","config","snapshot","capture","Content","CError","Paper","square","onMouseEnter","onMouseLeave","glue","portal","unmount","getPatches","old","patches","noopi","viz","onDestroy","unmountCell","mountedReference","opts","destroy","__DO_NOT_USE__","glueCell","applyProperties","getEffectiveProperties","conversionConvertTo","setProperties","optional","vizualizationAPI","mergedProps","destroySessionObject","flags","isEnabled","originalExtend","bind","JSONPatch","isUndef","isSpecialProperty","getParent","numPart","newPart","compare","isIdentical","generate","original","newData","generateValue","oldVal","tmpPath","op","newA","oldA","tmpIdx","findIndex","ii","ll","patchArray","patch","newValues","oldParent","createPatch","updateObject","currentComponent","currentIndex","actionWrapper","wrapped","depsChanged","prevDeps","initiate","explicitResize","__hooks","obsolete","chain","snaps","pendingEffects","pendingLayoutEffects","pendingPromises","resizer","setters","teardown","flushPending","imperativeHandle","__actionsDispatch","micro","macro","run","initiated","hooks","dispatchActions","flushMicro","scheduleMacro","skipUpdate","fx","runSnaps","getImperativeHandle","getHook","maybeEndChain","flushMacro","useInternalContext","updateRectOnNextRun","update","hook","cb","__hooked","usePromise","resolved","rejected","setObj","canceled","catch","useElement","resize","setR","useStaleLayout","useModel","useApp","useGlobal","useSelections","useTranslator","useAction","_config","useConstraints","useOptions","imperative","onTakeSnapshot","defaultComponent","getViewState","reservedKeys","createClassical","componentInstance","userInstance","selectionToolbarItems","w","hero","qGlobal","galaxy","hasRun","deepCheck","forcedConstraints","opChanged","currentResult","createWithHooks","teardowns","__snInterceptor","qPatches","qSoftPatch","currentProperties","newPatches","noop","x","defFn","moved","move","replaced","isDefined","layoutPath","test","includes","q","generatorFn","UserSN","debug","SemVer","process","env","NODE_DEBUG","unshift","MAX_SAFE_INTEGER","R","tok","NUMERICIDENTIFIER","NUMERICIDENTIFIERLOOSE","NONNUMERICIDENTIFIER","MAINVERSION","MAINVERSIONLOOSE","PRERELEASEIDENTIFIER","PRERELEASEIDENTIFIERLOOSE","PRERELEASE","PRERELEASELOOSE","BUILDIDENTIFIER","BUILD","FULLPLAIN","FULL","LOOSEPLAIN","LOOSE","GTLT","XRANGEIDENTIFIERLOOSE","XRANGEIDENTIFIER","XRANGEPLAIN","XRANGEPLAINLOOSE","XRANGE","XRANGELOOSE","COERCE","COERCERTL","LONETILDE","TILDETRIM","TILDE","TILDELOOSE","LONECARET","CARETTRIM","CARET","CARETLOOSE","COMPARATORLOOSE","COMPARATOR","COMPARATORTRIM","HYPHENRANGE","HYPHENRANGELOOSE","STAR","loose","includePrerelease","major","minor","prerelease","num","build","compareMain","comparePre","compareIdentifiers","compareBuild","inc","release","identifier","version1","version2","eq","v1","v2","prefix","defaultResult","numeric","anum","bnum","gt","lt","neq","gte","lte","cmp","Comparator","comp","semver","ANY","operator","versionA","versionB","Range","range","parseRange","isSatisfiable","comparators","remainingComparators","testComparator","every","otherComparator","intersects","isX","hyphenReplace","$0","fM","fm","fp","fpr","fb","tM","tm","tp","tpr","tb","testSet","allowed","satisfies","outside","hilo","gtfn","ltefn","ltfn","ecomp","high","low","comparator","rangeTmp","sameDirectionIncreasing","sameDirectionDecreasing","sameSemVer","differentDirectionsInclusive","oppositeDirectionsLessThan","oppositeDirectionsGreaterThan","comps","hr","compRe","pr","replaceCaret","replaceCarets","replaceTilde","replaceTildes","gtlt","xM","xm","xp","anyX","replaceXRange","replaceXRanges","replaceStars","parseComparator","thisComparators","rangeComparators","thisComparator","rangeComparator","versions","maxSV","rangeObj","minSV","minver","compver","parsed","r1","r2","rtl","lastIndex","LOADED","loader","sKey","prom","typeCollection","sortedVersions","register","stringified","supportsPropertiesVersion","SNDefinition","SNFactory","getMatchingVersionFromProperties","propertyVersion","unversioned","tc","typeInfo","clearFromCache","DEFAULT_SNAPSHOT_CONFIG","fetch","ok","statusText","json","payload","headers","mergeObj","o1","o2","mergeArray","a1","a2","mergeConfigs","anything","nuked","configuration","embed","instanceConfig","createConfiguration","currentContext","bootNebulaApp","appThemeFn","publicAPIs","flagsFn","nebbie","typesFn","currentThemePromise","selectionsApi","selectionsComponentReference","cfg","changes","AppSelectionsPortal","conversion"],"mappings":"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I,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,EAAG,IAAK,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,GAAI,IAAK,EAAG,EAAG,GAAI,GAAI,EAAG,EAAG,EAAG,GAAI,GAAIA,GAAa,EAAG,GAAI,IAAK,EAAG,EAAG,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"}